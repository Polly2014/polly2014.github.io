<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Polly Blog - AI Assistant, Tutorials, and Insights - FastAPI</title>
    <subtitle>Explore Polly Blog for AI tutorials, insights, and updates on cutting-edge technology.</subtitle>
    <link href="https://polly.wang/tags/fastapi/atom.xml" rel="self" type="application/atom+xml"/>
    <link href="https://polly.wang"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2025-06-07T00:00:00+00:00</updated>
    <id>https://polly.wang/tags/fastapi/atom.xml</id>
    <entry xml:lang="en">
        <title>ä»é›¶æ„å»ºAIé©±åŠ¨çš„PPTè¯„åˆ†ç³»ç»Ÿï¼šä¸ºå¯¹å¤–ç»è´¸å¤§å­¦æ‰“é€ çš„æ™ºèƒ½è¯„ä¼°å¹³å°</title>
        <published>2025-06-07T00:00:00+00:00</published>
        <updated>2025-06-07T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://polly.wang/ai-ppt-scoring-system-for-uibe/" type="text/html"/>
        <id>https://polly.wang/ai-ppt-scoring-system-for-uibe/</id>
        
        <content type="html">&lt;p&gt;æœ€è¿‘å®Œæˆäº†ä¸€ä¸ªç‰¹åˆ«æœ‰æ„æ€çš„é¡¹ç›®â€”â€”ä¸ºå¯¹å¤–ç»è´¸å¤§å­¦ä¿¡æ¯å­¦é™¢å¼€å‘äº†ä¸€å¥—AIé©±åŠ¨çš„PPTæ™ºèƒ½è¯„åˆ†ç³»ç»Ÿã€‚è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±åº¦æ€è€ƒäº†å¦‚ä½•å°†AIæŠ€æœ¯ä¸æ•™è‚²åœºæ™¯ç»“åˆï¼Œåˆ›é€ çœŸæ­£æœ‰ä»·å€¼çš„åº”ç”¨ã€‚ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«è¿™ä¸ªä»é›¶åˆ°ä¸€çš„å®Œæ•´å¼€å‘å†ç¨‹ã€‚&lt;&#x2F;p&gt;
&lt;img src=&quot;Thanks_Letter.png&quot; alt=&quot;Thanks Letter&quot; style=&quot;width: 50%;&quot;&gt;
&lt;h2 id=&quot;xiang-mu-bei-jing-jie-jue-zhen-shi-de-jiao-yu-tong-dian&quot;&gt;é¡¹ç›®èƒŒæ™¯ï¼šè§£å†³çœŸå®çš„æ•™è‚²ç—›ç‚¹&lt;&#x2F;h2&gt;
&lt;p&gt;åœ¨é«˜æ ¡ä¿¡æ¯å­¦é™¢ï¼Œå­¦ç”Ÿä»¬ç»å¸¸éœ€è¦è¿›è¡Œå„ç§PPTç­”è¾©å’Œé¡¹ç›®å±•ç¤ºã€‚ä¼ ç»Ÿçš„äººå·¥è¯„åˆ†æ–¹å¼å­˜åœ¨å‡ ä¸ªæ˜æ˜¾ç—›ç‚¹ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯„åˆ†æ ‡å‡†ä¸ç»Ÿä¸€&lt;&#x2F;strong&gt;ï¼šä¸åŒè¯„å§”å¯¹åŒä¸€ä»½PPTçš„è¯„ä»·å¯èƒ½å·®å¼‚å¾ˆå¤§&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;è¯„åˆ†æ•ˆç‡ä½ä¸‹&lt;&#x2F;strong&gt;ï¼šå¤§é‡PPTéœ€è¦é€ä¸€äººå·¥å®¡é˜…ï¼Œè€—æ—¶è€—åŠ›&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;åé¦ˆä¸å¤Ÿè¯¦ç»†&lt;&#x2F;strong&gt;ï¼šå¾€å¾€åªç»™å‡ºæ€»åˆ†ï¼Œç¼ºä¹å…·ä½“çš„æ”¹è¿›å»ºè®®&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å†å²æ•°æ®éš¾ä»¥åˆ©ç”¨&lt;&#x2F;strong&gt;ï¼šè¿‡å¾€çš„è¯„åˆ†æ•°æ®æ— æ³•æœ‰æ•ˆç§¯ç´¯å’Œåˆ†æ&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;æ­£æ˜¯åŸºäºè¿™äº›å®é™…éœ€æ±‚ï¼Œæˆ‘å¼€å§‹æ„æ€ä¸€ä¸ªèƒ½å¤Ÿæä¾›æ ‡å‡†åŒ–ã€æ™ºèƒ½åŒ–è¯„åˆ†çš„ç³»ç»Ÿã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;ji-zhu-jia-gou-she-ji-xian-dai-hua-de-quan-zhan-fang-an&quot;&gt;æŠ€æœ¯æ¶æ„è®¾è®¡ï¼šç°ä»£åŒ–çš„å…¨æ ˆæ–¹æ¡ˆ&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;hou-duan-ji-zhu-xuan-xing&quot;&gt;åç«¯æŠ€æœ¯é€‰å‹&lt;&#x2F;h3&gt;
&lt;p&gt;æˆ‘é€‰æ‹©äº†&lt;strong&gt;FastAPI&lt;&#x2F;strong&gt;ä½œä¸ºåç«¯æ¡†æ¶ï¼Œä¸»è¦è€ƒè™‘ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;å¤©ç„¶çš„å¼‚æ­¥æ”¯æŒï¼Œé€‚åˆå¤„ç†æ–‡ä»¶ä¸Šä¼ å’ŒAIæ¨ç†&lt;&#x2F;li&gt;
&lt;li&gt;è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œä¾¿äºå‰ç«¯å¯¹æ¥&lt;&#x2F;li&gt;
&lt;li&gt;å‡ºè‰²çš„æ€§èƒ½è¡¨ç°&lt;&#x2F;li&gt;
&lt;li&gt;ç±»å‹å®‰å…¨å’Œç°ä»£Pythonç‰¹æ€§æ”¯æŒ&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;æ•°æ®åº“é€‰æ‹©äº†&lt;strong&gt;SQLite&lt;&#x2F;strong&gt;ï¼Œè™½ç„¶ç®€å•ä½†å®Œå…¨èƒ½æ»¡è¶³å•æœºéƒ¨ç½²çš„éœ€æ±‚ï¼ŒåŒæ—¶ä¾¿äºæ•°æ®è¿ç§»å’Œå¤‡ä»½ã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ ¸å¿ƒçš„è¯„åˆ†å¼•æ“æ¶æ„
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;PPTScorer&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;PPTè¯„åˆ†æ ¸å¿ƒå¼•æ“&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;api_key&lt;&#x2F;span&gt;&lt;span&gt;: str = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;model&lt;&#x2F;span&gt;&lt;span&gt;: str = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.api_key = api_key
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.model = model or &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;anthropic&#x2F;claude-3-haiku-20240307&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;score_presentation&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;slides&lt;&#x2F;span&gt;&lt;span&gt;: List) -&amp;gt; Dict:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;æ‰§è¡ŒPPTè¯„åˆ†çš„ä¸»è¦æ–¹æ³•&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.api_key:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_score_with_llm&lt;&#x2F;span&gt;&lt;span&gt;(content, slides)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_score_with_rules&lt;&#x2F;span&gt;&lt;span&gt;(content, slides)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;qian-duan-shi-xian-chun-jing-de-yuan-sheng-webji-zhu&quot;&gt;å‰ç«¯å®ç°ï¼šçº¯å‡€çš„åŸç”ŸWebæŠ€æœ¯&lt;&#x2F;h3&gt;
&lt;p&gt;è€ƒè™‘åˆ°éƒ¨ç½²ç®€ä¾¿æ€§å’Œç»´æŠ¤æˆæœ¬ï¼Œæˆ‘æ²¡æœ‰é€‰æ‹©å¤æ‚çš„å‰ç«¯æ¡†æ¶ï¼Œè€Œæ˜¯é‡‡ç”¨äº†&lt;strong&gt;åŸç”ŸHTML&#x2F;CSS&#x2F;JavaScript&lt;&#x2F;strong&gt;çš„æ–¹æ¡ˆã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;é›¶æ„å»ºä¾èµ–ï¼Œéƒ¨ç½²å³ç”¨&lt;&#x2F;li&gt;
&lt;li&gt;åŠ è½½é€Ÿåº¦å¿«ï¼Œç”¨æˆ·ä½“éªŒå¥½&lt;&#x2F;li&gt;
&lt;li&gt;ç»´æŠ¤æˆæœ¬ä½ï¼Œä¾¿äºåç»­è¿­ä»£&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;å‰ç«¯é‡‡ç”¨äº†ç°ä»£çš„CSS Gridå’ŒFlexboxå¸ƒå±€ï¼Œé…åˆEChartså›¾è¡¨åº“å®ç°æ•°æ®å¯è§†åŒ–ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;aiji-cheng-shuang-mo-shi-ping-fen-ce-lue&quot;&gt;AIé›†æˆï¼šåŒæ¨¡å¼è¯„åˆ†ç­–ç•¥&lt;&#x2F;h3&gt;
&lt;p&gt;ç³»ç»Ÿæ”¯æŒä¸¤ç§è¯„åˆ†æ¨¡å¼ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;1. åŸºäºè§„åˆ™çš„è¯„åˆ†ï¼ˆRule-based Scoringï¼‰&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;_score_with_rules&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;slides&lt;&#x2F;span&gt;&lt;span&gt;: List) -&amp;gt; Dict:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;åŸºäºè§„åˆ™çš„è¯„åˆ†ç®—æ³•&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›æ–°æ€§è¯„åˆ†ï¼šå…³é”®è¯åŒ¹é… + æŠ€æœ¯æ·±åº¦åˆ†æ
&lt;&#x2F;span&gt;&lt;span&gt;    innovation_score = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_analyze_innovation&lt;&#x2F;span&gt;&lt;span&gt;(content)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¯è¡Œæ€§è¯„åˆ†ï¼šå®ç°æ–¹æ¡ˆ + èµ„æºè¯„ä¼°
&lt;&#x2F;span&gt;&lt;span&gt;    feasibility_score = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_analyze_feasibility&lt;&#x2F;span&gt;&lt;span&gt;(content)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç¤¾ä¼šæ•ˆç›Šè¯„åˆ†ï¼šå½±å“èŒƒå›´ + ä»·å€¼åˆ›é€ 
&lt;&#x2F;span&gt;&lt;span&gt;    social_impact_score = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_analyze_social_impact&lt;&#x2F;span&gt;&lt;span&gt;(content)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ¼”ç¤ºè´¨é‡è¯„åˆ†ï¼šç»“æ„å®Œæ•´æ€§ + å†…å®¹ç»„ç»‡
&lt;&#x2F;span&gt;&lt;span&gt;    presentation_quality = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_analyze_presentation_quality&lt;&#x2F;span&gt;&lt;span&gt;(slides)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_generate_score_report&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;        innovation_score, feasibility_score, 
&lt;&#x2F;span&gt;&lt;span&gt;        social_impact_score, presentation_quality
&lt;&#x2F;span&gt;&lt;span&gt;    )
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;2. åŸºäºLLMçš„æ™ºèƒ½è¯„åˆ†ï¼ˆLLM-based Scoringï¼‰&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;_score_with_llm&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;slides&lt;&#x2F;span&gt;&lt;span&gt;: List) -&amp;gt; Dict:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½è¯„åˆ†&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    prompt = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_create_scoring_prompt&lt;&#x2F;span&gt;&lt;span&gt;(content, slides)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        response = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.llm_client.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;complete&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;model&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.model,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;messages&lt;&#x2F;span&gt;&lt;span&gt;=[{&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;role&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;user&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: prompt}]
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_parse_llm_response&lt;&#x2F;span&gt;&lt;span&gt;(response.content)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é™çº§åˆ°è§„åˆ™è¯„åˆ†
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_score_with_rules&lt;&#x2F;span&gt;&lt;span&gt;(content, slides)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;he-xin-gong-neng-shi-xian&quot;&gt;æ ¸å¿ƒåŠŸèƒ½å®ç°&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;duo-ge-shi-wen-jian-chu-li&quot;&gt;å¤šæ ¼å¼æ–‡ä»¶å¤„ç†&lt;&#x2F;h3&gt;
&lt;p&gt;ç³»ç»Ÿæ”¯æŒPPTã€PPTXã€PDFä¸‰ç§ä¸»æµæ ¼å¼ï¼Œè¿™æ˜¯å®ç°çš„å…³é”®æŒ‘æˆ˜ä¹‹ä¸€ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;ContentExtractor&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;å†…å®¹æå–å™¨&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;extract_content&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;file_path&lt;&#x2F;span&gt;&lt;span&gt;: str) -&amp;gt; Dict:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©ç›¸åº”çš„æå–ç­–ç•¥&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        file_extension = file_path.suffix.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;lower&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;file_extension in [&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.ppt&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.pptx&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_extract_from_ppt&lt;&#x2F;span&gt;&lt;span&gt;(file_path)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;elif &lt;&#x2F;span&gt;&lt;span&gt;file_extension == &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.pdf&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_extract_from_pdf&lt;&#x2F;span&gt;&lt;span&gt;(file_path)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;UnsupportedFileTypeError&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: &lt;&#x2F;span&gt;&lt;span&gt;{file_extension}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;_extract_from_ppt&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;file_path&lt;&#x2F;span&gt;&lt;span&gt;: str) -&amp;gt; Dict:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä»PPTæ–‡ä»¶æå–å†…å®¹&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        presentation = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Presentation&lt;&#x2F;span&gt;&lt;span&gt;(file_path)
&lt;&#x2F;span&gt;&lt;span&gt;        slides_content = []
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;slide &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;presentation.slides:
&lt;&#x2F;span&gt;&lt;span&gt;            slide_text = []
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;shape &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;slide.shapes:
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;hasattr&lt;&#x2F;span&gt;&lt;span&gt;(shape, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;):
&lt;&#x2F;span&gt;&lt;span&gt;                    slide_text.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(shape.text)
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            slides_content.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;(slide_text),
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;slide_number&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(slides_content) + &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1
&lt;&#x2F;span&gt;&lt;span&gt;            })
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;slides&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: slides_content,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;slide_count&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(slides_content),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;total_text&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;([slide[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;] &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;slide &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;slides_content])
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;zhi-neng-ping-fen-suan-fa&quot;&gt;æ™ºèƒ½è¯„åˆ†ç®—æ³•&lt;&#x2F;h3&gt;
&lt;p&gt;è¯„åˆ†ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯äº”ä¸ªç»´åº¦çš„ç»¼åˆè¯„ä¼°ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº§å“åˆ›æ–°æ€§&lt;&#x2F;strong&gt; (10åˆ†)ï¼šæŠ€æœ¯æ–°é¢–ç¨‹åº¦ã€å·®å¼‚åŒ–ä»·å€¼&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;äº§å“å¯è¡Œæ€§&lt;&#x2F;strong&gt; (10åˆ†)ï¼šæŠ€æœ¯å®ç°å¯èƒ½æ€§ã€èµ„æºå¯è¾¾æ€§&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;ç¤¾ä¼šæ•ˆç›Š&lt;&#x2F;strong&gt; (10åˆ†)ï¼šå¯¹ç¤¾ä¼šã€è¡Œä¸šçš„æ­£é¢å½±å“&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ¼”ç¤ºæ–‡ç¨¿è´¨é‡&lt;&#x2F;strong&gt; (10åˆ†)ï¼šé€»è¾‘ç»“æ„ã€è§†è§‰è®¾è®¡&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;ç°åœºç­”è¾©è¡¨ç°&lt;&#x2F;strong&gt; (10åˆ†)ï¼šæ”¯æŒäººå·¥å½•å…¥çš„åŠ¨æ€è¯„åˆ†&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;_generate_overall_comment&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;scores&lt;&#x2F;span&gt;&lt;span&gt;: Dict) -&amp;gt; str:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ç”Ÿæˆç»¼åˆè¯„ä»·&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    total_score = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;sum&lt;&#x2F;span&gt;&lt;span&gt;(scores.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt;())
&lt;&#x2F;span&gt;&lt;span&gt;    total_percentage = (total_score &#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;40&lt;&#x2F;span&gt;&lt;span&gt;) * &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;100  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å‰å››é¡¹æ»¡åˆ†40åˆ†
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;total_percentage &amp;gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;90&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        grade = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ä¼˜ç§€&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        description = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;é¡¹ç›®æ•´ä½“è¡¨ç°å“è¶Šï¼Œå…·æœ‰å¾ˆå¼ºçš„ç«äº‰åŠ›å’Œå®ç”¨ä»·å€¼ã€‚&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;elif &lt;&#x2F;span&gt;&lt;span&gt;total_percentage &amp;gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;80&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        grade = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;è‰¯å¥½&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;  
&lt;&#x2F;span&gt;&lt;span&gt;        description = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;é¡¹ç›®è¡¨ç°è‰¯å¥½ï¼Œæœ‰ä¸€å®šçš„äº®ç‚¹å’Œä¼˜åŠ¿ï¼Œå…·å¤‡å®æ–½æ½œåŠ›ã€‚&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ... æ›´å¤šç­‰çº§åˆ¤å®š
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ‰¾å‡ºæœ€å¼ºå’Œæœ€å¼±çš„ç»´åº¦
&lt;&#x2F;span&gt;&lt;span&gt;    best_dimension = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;max&lt;&#x2F;span&gt;&lt;span&gt;(scores, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;=scores.get)
&lt;&#x2F;span&gt;&lt;span&gt;    worst_dimension = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;min&lt;&#x2F;span&gt;&lt;span&gt;(scores, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;=scores.get)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç”Ÿæˆå…·ä½“æ”¹è¿›å»ºè®®
&lt;&#x2F;span&gt;&lt;span&gt;    suggestions = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_generate_improvement_suggestions&lt;&#x2F;span&gt;&lt;span&gt;(scores)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_format_evaluation_report&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;        grade, description, best_dimension, worst_dimension, suggestions
&lt;&#x2F;span&gt;&lt;span&gt;    )
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;pi-liang-dui-bi-fen-xi&quot;&gt;æ‰¹é‡å¯¹æ¯”åˆ†æ&lt;&#x2F;h3&gt;
&lt;p&gt;ç³»ç»Ÿæ”¯æŒå¤šä¸ªPPTæ–‡ä»¶çš„å¯¹æ¯”åˆ†æï¼Œè¿™å¯¹äºç«èµ›è¯„é€‰ç‰¹åˆ«æœ‰ç”¨ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;@app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;compare&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;compare_presentations&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ids&lt;&#x2F;span&gt;&lt;span&gt;: str):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;PPTå¯¹æ¯”åˆ†ææ¥å£&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    presentation_ids = [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strip&lt;&#x2F;span&gt;&lt;span&gt;()) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;id &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;ids.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;split&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;,&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)]
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    comparison_data = []
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;presentation_id &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;presentation_ids:
&lt;&#x2F;span&gt;&lt;span&gt;        presentation = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_presentation_by_id&lt;&#x2F;span&gt;&lt;span&gt;(presentation_id)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;presentation:
&lt;&#x2F;span&gt;&lt;span&gt;            comparison_data.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.id,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;filename&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.filename,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;scores&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: {
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;innovation&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.innovation_score,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;feasibility&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.feasibility_score,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;social_impact&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.social_impact_score,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;presentation_quality&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.presentation_quality_score,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;defense_performance&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.defense_performance_score,
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;total&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.total_score
&lt;&#x2F;span&gt;&lt;span&gt;                },
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;slide_count&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;: presentation.slide_count
&lt;&#x2F;span&gt;&lt;span&gt;            })
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;comparison&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: comparison_data}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;bu-shu-yu-yun-wei-rong-qi-hua-de-xian-dai-bu-shu-fang-an&quot;&gt;éƒ¨ç½²ä¸è¿ç»´ï¼šå®¹å™¨åŒ–çš„ç°ä»£éƒ¨ç½²æ–¹æ¡ˆ&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;dockerrong-qi-hua&quot;&gt;Dockerå®¹å™¨åŒ–&lt;&#x2F;h3&gt;
&lt;p&gt;ä¸ºäº†ç®€åŒ–éƒ¨ç½²å’Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ï¼Œæˆ‘å°†æ•´ä¸ªç³»ç»Ÿå®¹å™¨åŒ–ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;dockerfile&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-dockerfile &quot;&gt;&lt;code class=&quot;language-dockerfile&quot; data-lang=&quot;dockerfile&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ”¯æŒå¤šå¹³å°æ„å»º
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM&lt;&#x2F;span&gt;&lt;span&gt; --platform=linux&#x2F;amd64 registry.cn-hangzhou.aliyuncs.com&#x2F;library&#x2F;python:3.11-slim
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å®‰è£…ç³»ç»Ÿä¾èµ–
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;RUN &lt;&#x2F;span&gt;&lt;span&gt;apt-get update &amp;amp;&amp;amp; apt-get install -y \
&lt;&#x2F;span&gt;&lt;span&gt;    poppler-utils \
&lt;&#x2F;span&gt;&lt;span&gt;    tesseract-ocr \
&lt;&#x2F;span&gt;&lt;span&gt;    tesseract-ocr-chi-sim \
&lt;&#x2F;span&gt;&lt;span&gt;    tesseract-ocr-eng \
&lt;&#x2F;span&gt;&lt;span&gt;    libreoffice \
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;amp;&amp;amp; rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists&#x2F;*
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºérootç”¨æˆ·ï¼Œæé«˜å®‰å…¨æ€§
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;RUN &lt;&#x2F;span&gt;&lt;span&gt;groupadd -r appuser &amp;amp;&amp;amp; useradd -r -g appuser appuser
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;WORKDIR &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;app
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;COPY&lt;&#x2F;span&gt;&lt;span&gt; requirements.txt .
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;RUN &lt;&#x2F;span&gt;&lt;span&gt;pip install --no-cache-dir -r requirements.txt
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;COPY&lt;&#x2F;span&gt;&lt;span&gt; . .
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;RUN &lt;&#x2F;span&gt;&lt;span&gt;mkdir -p uploads static &amp;amp;&amp;amp; \
&lt;&#x2F;span&gt;&lt;span&gt;    chown -R appuser:appuser &#x2F;app
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;USER &lt;&#x2F;span&gt;&lt;span&gt;appuser
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EXPOSE &lt;&#x2F;span&gt;&lt;span&gt;8000
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;CMD [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;python&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;main.py&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;m1-mackua-ping-tai-gou-jian&quot;&gt;M1 Macè·¨å¹³å°æ„å»º&lt;&#x2F;h3&gt;
&lt;p&gt;ç”±äºæˆ‘ä½¿ç”¨M1 Macå¼€å‘ï¼Œä½†éƒ¨ç½²ç›®æ ‡æ˜¯LinuxæœåŠ¡å™¨ï¼Œéœ€è¦å¤„ç†è·¨å¹³å°æ„å»ºï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;bash
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# build.sh - M1 Macè·¨å¹³å°æ„å»ºè„šæœ¬
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ğŸš€ PPTè¯„åˆ†ç³»ç»Ÿ - M1 Mac è·¨å¹³å°æ„å»º&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºå¤šå¹³å°æ„å»ºå™¨
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker&lt;&#x2F;span&gt;&lt;span&gt; buildx create&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --name&lt;&#x2F;span&gt;&lt;span&gt; multiplatform&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --use &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&#x2F;dev&#x2F;null || &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker&lt;&#x2F;span&gt;&lt;span&gt; buildx use multiplatform
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ„å»ºAMD64å¹³å°é•œåƒ
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker&lt;&#x2F;span&gt;&lt;span&gt; buildx build \
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;    --platform&lt;&#x2F;span&gt;&lt;span&gt; linux&#x2F;amd64 \
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;    --tag&lt;&#x2F;span&gt;&lt;span&gt; ppt-scorer:latest \
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;    --load&lt;&#x2F;span&gt;&lt;span&gt; .
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;echo &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;âœ… è·¨å¹³å°æ„å»ºå®Œæˆï¼&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;huan-jing-pei-zhi-guan-li&quot;&gt;ç¯å¢ƒé…ç½®ç®¡ç†&lt;&#x2F;h3&gt;
&lt;p&gt;ç³»ç»Ÿæ”¯æŒçµæ´»çš„ç¯å¢ƒé…ç½®ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# .env é…ç½®æ–‡ä»¶
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;SCORING_METHOD&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;llm_based
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;OPENROUTER_API_KEY&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your_api_key_here
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;OPENROUTER_MODEL&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;anthropic&#x2F;claude-3-haiku-20240307
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DATABASE_URL&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sqlite:&#x2F;&#x2F;&#x2F;.&#x2F;ppt_scores.db
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MAX_FILE_SIZE_MB&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;50
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DEBUG&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;false
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;shi-ji-ying-yong-xiao-guo-yu-fan-kui&quot;&gt;å®é™…åº”ç”¨æ•ˆæœä¸åé¦ˆ&lt;&#x2F;h2&gt;
&lt;p&gt;ç³»ç»Ÿä¸Šçº¿ååœ¨å¯¹å¤–ç»è´¸å¤§å­¦ä¿¡æ¯å­¦é™¢å¾—åˆ°äº†ç§¯æåé¦ˆï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;xiao-lu-ti-sheng-xian-zhu&quot;&gt;æ•ˆç‡æå‡æ˜¾è‘—&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;å•ä¸ªPPTè¯„åˆ†æ—¶é—´ä»30åˆ†é’Ÿé™ä½åˆ°3åˆ†é’Ÿ&lt;&#x2F;li&gt;
&lt;li&gt;æ”¯æŒæ‰¹é‡å¤„ç†ï¼Œå¤§å¹…æé«˜è¯„åˆ†æ•ˆç‡&lt;&#x2F;li&gt;
&lt;li&gt;24&#x2F;7å¯ç”¨ï¼Œä¸å—æ—¶é—´é™åˆ¶&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;ping-fen-biao-zhun-hua&quot;&gt;è¯„åˆ†æ ‡å‡†åŒ–&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;ç»Ÿä¸€çš„è¯„åˆ†ç»´åº¦å’Œæ ‡å‡†&lt;&#x2F;li&gt;
&lt;li&gt;è¯¦ç»†çš„è¯„åˆ†è¯´æ˜å’Œæ”¹è¿›å»ºè®®&lt;&#x2F;li&gt;
&lt;li&gt;å†å²æ•°æ®ç§¯ç´¯ä¾¿äºè¶‹åŠ¿åˆ†æ&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;yong-hu-ti-yan-you-hua&quot;&gt;ç”¨æˆ·ä½“éªŒä¼˜åŒ–&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;ç›´è§‚çš„Webç•Œé¢ï¼Œæ— éœ€å®‰è£…å®¢æˆ·ç«¯&lt;&#x2F;li&gt;
&lt;li&gt;æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæ“ä½œç®€ä¾¿&lt;&#x2F;li&gt;
&lt;li&gt;å®æ—¶è¿›åº¦æ˜¾ç¤ºï¼Œç”¨æˆ·ä½“éªŒæµç•…&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;ji-zhu-nan-dian-yu-jie-jue-fang-an&quot;&gt;æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;wen-jian-ge-shi-jian-rong-xing&quot;&gt;æ–‡ä»¶æ ¼å¼å…¼å®¹æ€§&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;&#x2F;strong&gt;ï¼šä¸åŒç‰ˆæœ¬çš„PPTæ–‡ä»¶æ ¼å¼å·®å¼‚å¾ˆå¤§ï¼ŒPDFæå–æ›´åŠ å¤æ‚ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨python-pptxå¤„ç†æ–°ç‰ˆPPTXæ–‡ä»¶&lt;&#x2F;li&gt;
&lt;li&gt;ç»“åˆLibreOfficeè½¬æ¢å¤„ç†è€ç‰ˆæœ¬PPT&lt;&#x2F;li&gt;
&lt;li&gt;åˆ©ç”¨poppler-utilså’Œtesseract-ocrå¤„ç†PDFçš„OCRéœ€æ±‚&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;aiping-fen-de-wen-ding-xing&quot;&gt;AIè¯„åˆ†çš„ç¨³å®šæ€§&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;&#x2F;strong&gt;ï¼šLLMæœåŠ¡å¯èƒ½ä¸ç¨³å®šï¼Œå“åº”æ—¶é—´ä¸å¯æ§ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;å®ç°åŒæ¨¡å¼è¯„åˆ†ç­–ç•¥ï¼ŒLLMå¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ°è§„åˆ™è¯„åˆ†&lt;&#x2F;li&gt;
&lt;li&gt;æ·»åŠ è¯·æ±‚é‡è¯•æœºåˆ¶å’Œè¶…æ—¶æ§åˆ¶&lt;&#x2F;li&gt;
&lt;li&gt;æœ¬åœ°ç¼“å­˜è¯„åˆ†ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;xing-neng-you-hua&quot;&gt;æ€§èƒ½ä¼˜åŒ–&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;&#x2F;strong&gt;ï¼šå¤§æ–‡ä»¶å¤„ç†å’ŒAIæ¨ç†å¯èƒ½å¯¼è‡´å“åº”æ…¢ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;å¼‚æ­¥æ–‡ä»¶å¤„ç†ï¼Œé¿å…é˜»å¡ç”¨æˆ·ç•Œé¢&lt;&#x2F;li&gt;
&lt;li&gt;å®ç°è¿›åº¦æ¡æ˜¾ç¤ºï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒ&lt;&#x2F;li&gt;
&lt;li&gt;æ–‡ä»¶å¤§å°é™åˆ¶å’Œæ ¼å¼éªŒè¯ï¼Œé˜²æ­¢ç³»ç»Ÿè¿‡è½½&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;hou-xu-you-hua-fang-xiang&quot;&gt;åç»­ä¼˜åŒ–æ–¹å‘&lt;&#x2F;h2&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®è¿˜æœ‰å¾ˆå¤šå¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;ji-zhu-ceng-mian&quot;&gt;æŠ€æœ¯å±‚é¢&lt;&#x2F;h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¼•å…¥å‘é‡æ•°æ®åº“&lt;&#x2F;strong&gt;ï¼šæ”¯æŒè¯­ä¹‰ç›¸ä¼¼åº¦åˆ†æï¼Œæé«˜è¯„åˆ†å‡†ç¡®æ€§&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ å›¾åƒè¯†åˆ«&lt;&#x2F;strong&gt;ï¼šåˆ†æPPTä¸­çš„å›¾è¡¨ã€å›¾ç‰‡è´¨é‡&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶åä½œè¯„åˆ†&lt;&#x2F;strong&gt;ï¼šæ”¯æŒå¤šä½è¯„å§”åŒæ—¶è¯„åˆ†&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;ç§»åŠ¨ç«¯é€‚é…&lt;&#x2F;strong&gt;ï¼šå¼€å‘ç§»åŠ¨Appæˆ–å“åº”å¼ç•Œé¢&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;gong-neng-kuo-zhan&quot;&gt;åŠŸèƒ½æ‰©å±•&lt;&#x2F;h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ¿æ¨è&lt;&#x2F;strong&gt;ï¼šåŸºäºé«˜åˆ†PPTç”Ÿæˆæ¨¡æ¿å»ºè®®&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æŠ„è¢­æ£€æµ‹&lt;&#x2F;strong&gt;ï¼šæ£€æŸ¥å†…å®¹åŸåˆ›æ€§&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ¼”è®²è¾…å¯¼&lt;&#x2F;strong&gt;ï¼šç»“åˆè¯­éŸ³è¯†åˆ«æä¾›æ¼”è®²å»ºè®®&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åˆ†æä»ªè¡¨æ¿&lt;&#x2F;strong&gt;ï¼šä¸ºæ•™å¸ˆæä¾›ç­çº§æ•´ä½“åˆ†æ&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;zong-jie-yu-si-kao&quot;&gt;æ€»ç»“ä¸æ€è€ƒ&lt;&#x2F;h2&gt;
&lt;p&gt;è¿™æ¬¡ä¸ºå¯¹å¤–ç»è´¸å¤§å­¦å¼€å‘PPTè¯„åˆ†ç³»ç»Ÿçš„ç»å†è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°ï¼Œ&lt;strong&gt;çœŸæ­£æœ‰ä»·å€¼çš„AIåº”ç”¨ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯è§£å†³å®é™…é—®é¢˜&lt;&#x2F;strong&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»æŠ€æœ¯è§’åº¦ï¼Œè¿™ä¸ªé¡¹ç›®æ¶µç›–äº†ç°ä»£Webå¼€å‘çš„å¤šä¸ªæ–¹é¢ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åç«¯APIè®¾è®¡&lt;&#x2F;strong&gt;ï¼šRESTfulæ¥å£ã€å¼‚æ­¥å¤„ç†ã€é”™è¯¯å¤„ç†&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶å¤„ç†&lt;&#x2F;strong&gt;ï¼šå¤šæ ¼å¼æ”¯æŒã€å†…å®¹æå–ã€OCRè¯†åˆ«&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;AIé›†æˆ&lt;&#x2F;strong&gt;ï¼šLLMè°ƒç”¨ã€Promptå·¥ç¨‹ã€é™çº§ç­–ç•¥&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å‰ç«¯äº¤äº’&lt;&#x2F;strong&gt;ï¼šç°ä»£CSSã€JavaScriptã€æ•°æ®å¯è§†åŒ–&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²è¿ç»´&lt;&#x2F;strong&gt;ï¼šDockerå®¹å™¨åŒ–ã€è·¨å¹³å°æ„å»ºã€ç¯å¢ƒç®¡ç†&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªé¡¹ç›®è®©æˆ‘æ€è€ƒäº†AIæŠ€æœ¯åœ¨æ•™è‚²é¢†åŸŸçš„åº”ç”¨å‰æ™¯ã€‚æˆ‘ç›¸ä¿¡éšç€æŠ€æœ¯çš„å‘å±•ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ›´å¤šè¿™æ ·çš„æ™ºèƒ½åŒ–æ•™è‚²å·¥å…·ï¼Œå®ƒä»¬ä¸ä¼šå–ä»£æ•™å¸ˆï¼Œè€Œæ˜¯æˆä¸ºæ•™å¸ˆçš„å¾—åŠ›åŠ©æ‰‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¦‚æœä½ ä¹Ÿåœ¨è€ƒè™‘å¼€å‘ç±»ä¼¼çš„æ•™è‚²ç§‘æŠ€äº§å“ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š&lt;strong&gt;ä»ç”¨æˆ·çš„çœŸå®éœ€æ±‚å‡ºå‘ï¼Œç”¨æŠ€æœ¯å»è§£å†³å…·ä½“é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¸ºäº†æŠ€æœ¯è€ŒæŠ€æœ¯&lt;&#x2F;strong&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ€åï¼Œè¿™ä¸ªé¡¹ç›®çš„å®Œæ•´ä»£ç å·²ç»æ•´ç†å¥½ï¼Œå¦‚æœä½ å¯¹æŸä¸ªæŠ€æœ¯ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæ¬¢è¿ä¸æˆ‘äº¤æµè®¨è®ºï¼&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;é¡¹ç›®åœ°å€&lt;&#x2F;strong&gt;ï¼š&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Polly2014&#x2F;PPT_Scorer&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;Polly2014&#x2F;PPT_Scorer&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;&lt;em&gt;è¿™ä¸ªPPTè¯„åˆ†ç³»ç»Ÿç›®å‰å·²åœ¨å¯¹å¤–ç»è´¸å¤§å­¦ä¿¡æ¯å­¦é™¢ç¨³å®šè¿è¡Œï¼Œä¸ºå¸ˆç”Ÿçš„æ•™å­¦æ´»åŠ¨æä¾›äº†æœ‰åŠ›æ”¯æŒã€‚å¸Œæœ›è¿™ä¸ªé¡¹ç›®çš„ç»éªŒåˆ†äº«èƒ½å¯¹æ­£åœ¨è¿›è¡Œç±»ä¼¼å¼€å‘çš„æœ‹å‹ä»¬æœ‰æ‰€å¸®åŠ©ã€‚&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ä½¿ç”¨GitHub Copilot Agentæ„å»ºä¸€å¥è¯AIæ™ºèƒ½ç®€å†ç­›é€‰ç³»ç»Ÿ</title>
        <published>2025-06-03T00:00:00+00:00</published>
        <updated>2025-06-03T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://polly.wang/build-ai-resume-screening-with-copilot-agent/" type="text/html"/>
        <id>https://polly.wang/build-ai-resume-screening-with-copilot-agent/</id>
        
        <content type="html">&lt;p&gt;æœ€è¿‘GitHub Copilotæ¨å‡ºäº†Agentæ¨¡å¼ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸OpenHandsæœ‰ç€å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œå½»åº•æ”¹å˜äº†æˆ‘çš„å¼€å‘æ–¹å¼ã€‚ä¸ä¼ ç»Ÿçš„ä»£ç è¡¥å…¨ä¸åŒï¼ŒAgentæ¨¡å¼æ›´åƒæ˜¯ä¸€ä¸ªçœŸæ­£çš„ç¼–ç¨‹ä¼™ä¼´ï¼Œèƒ½å¤Ÿç†è§£é¡¹ç›®å…¨è²Œã€ååŠ©æ¶æ„è®¾è®¡ï¼Œç”šè‡³å¸®åŠ©è§£å†³å¤æ‚çš„å·¥ç¨‹é—®é¢˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä»Šå¤©åˆ†äº«ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜æ¡ˆä¾‹ï¼šå¦‚ä½•ä½¿ç”¨GitHub Copilot Agentä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªAIé©±åŠ¨çš„ä¸€å¥è¯æ™ºèƒ½ç®€å†ç­›é€‰ç³»ç»Ÿã€‚è¿™ä¸ªé¡¹ç›®ä¸ä»…å±•ç¤ºäº†Agentæ¨¡å¼çš„å¼ºå¤§èƒ½åŠ›ï¼Œä¹Ÿä½“ç°äº†ç°ä»£AIè¾…åŠ©å¼€å‘çš„æœ€ä½³å®è·µã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;polly.wang&#x2F;build-ai-resume-screening-with-copilot-agent&#x2F;HR_Copilot.png&quot; alt=&quot;HR Copilot&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;xiang-mu-gou-si-cong-xu-qiu-dao-jia-gou&quot;&gt;é¡¹ç›®æ„æ€ï¼šä»éœ€æ±‚åˆ°æ¶æ„&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;ming-que-xiang-mu-mu-biao&quot;&gt;æ˜ç¡®é¡¹ç›®ç›®æ ‡&lt;&#x2F;h3&gt;
&lt;p&gt;æœ‹å‹æ¯å¤©éƒ½è¦å¤„ç†å¤§é‡ç®€å†ï¼Œä¼ ç»Ÿçš„æ‰‹å·¥ç­›é€‰æ•ˆç‡ä½ä¸‹ã€‚æˆ‘æƒ³æ„å»ºä¸€ä¸ªAIåŠ©æ‰‹æ¥è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰¹é‡ä¸Šä¼ å’Œè§£æç®€å†&lt;&#x2F;li&gt;
&lt;li&gt;æ™ºèƒ½ä¿¡æ¯æå–å’Œç»“æ„åŒ–å­˜å‚¨&lt;&#x2F;li&gt;
&lt;li&gt;åŸºäºè§„åˆ™å’ŒAIçš„åŒé‡ç­›é€‰&lt;&#x2F;li&gt;
&lt;li&gt;å€™é€‰äººçŠ¶æ€è·Ÿè¸ªç®¡ç†&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;agentmo-shi-de-di-yi-ci-dui-hua&quot;&gt;Agentæ¨¡å¼çš„ç¬¬ä¸€æ¬¡å¯¹è¯&lt;&#x2F;h3&gt;
&lt;p&gt;æˆ‘é¦–å…ˆå‘Copilot Agentæè¿°äº†å®Œæ•´çš„é¡¹ç›®æ„¿æ™¯ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;# AI-Powered Resume Screening System Development
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;## Project Goal
&lt;&#x2F;span&gt;&lt;span&gt;Build an AI-powered HR resume screening assistant system to help HR specialists streamline daily recruitment tasks, improve resume processing efficiency and screening quality.
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;## Core Features
&lt;&#x2F;span&gt;&lt;span&gt;### 1. User Management
&lt;&#x2F;span&gt;&lt;span&gt;- No login required, multi-user support
&lt;&#x2F;span&gt;&lt;span&gt;- Session-based user isolation
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;### 2. Resume Processing
&lt;&#x2F;span&gt;&lt;span&gt;- **Batch Upload**: Support PDF and Word document formats
&lt;&#x2F;span&gt;&lt;span&gt;- **Information Extraction**: 
&lt;&#x2F;span&gt;&lt;span&gt;  - Rule-based extraction for structured data
&lt;&#x2F;span&gt;&lt;span&gt;  - LLM-powered extraction for complex information
&lt;&#x2F;span&gt;&lt;span&gt;  - Auto-update candidate profiles in talent pool
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;### 3. Talent Pool Management
&lt;&#x2F;span&gt;&lt;span&gt;- **View**: Browse all candidates in talent pool
&lt;&#x2F;span&gt;&lt;span&gt;- **Operations**: Upload, view, and manage resumes
&lt;&#x2F;span&gt;&lt;span&gt;- **Status Tracking**: Mark candidate status (e.g., interviewed, rejected, pending)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;### 4. Intelligent Filtering
&lt;&#x2F;span&gt;&lt;span&gt;- **Rule-based Filtering**: Traditional keyword and criteria matching
&lt;&#x2F;span&gt;&lt;span&gt;- **AI-powered Filtering**: 
&lt;&#x2F;span&gt;&lt;span&gt;  - Natural language filter conditions
&lt;&#x2F;span&gt;&lt;span&gt;  - LLM optimization for filter criteria
&lt;&#x2F;span&gt;&lt;span&gt;  - Smart recommendations based on job requirements
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;## Technical Requirements
&lt;&#x2F;span&gt;&lt;span&gt;### Backend Architecture
&lt;&#x2F;span&gt;&lt;span&gt;- **Framework**: FastAPI (Python)
&lt;&#x2F;span&gt;&lt;span&gt;- **Package Manager**: Poetry
&lt;&#x2F;span&gt;&lt;span&gt;- **LLM Integration**: litellm + OpenRouter + Claude 3.5 Sonnet
&lt;&#x2F;span&gt;&lt;span&gt;- **Database**: SQLite for candidate data
&lt;&#x2F;span&gt;&lt;span&gt;- **File Storage**: Local for resume files
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;### Frontend Design
&lt;&#x2F;span&gt;&lt;span&gt;- **Style**: Clean, minimalist design
&lt;&#x2F;span&gt;&lt;span&gt;- **Color Scheme**: White and gray as primary colors
&lt;&#x2F;span&gt;&lt;span&gt;- **UI Framework**: React&#x2F;Vue.js with Ant Design or Material-UI
&lt;&#x2F;span&gt;&lt;span&gt;- **Responsive**: Mobile-friendly interface
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;è¿™ä¸ªè¯¦ç»†çš„Promptæˆä¸ºäº†æ•´ä¸ªé¡¹ç›®çš„&amp;quot;å®ªæ³•&amp;quot;ï¼ŒAgentåŸºäºè¿™ä¸ªæè¿°ä¸ºæˆ‘ç”Ÿæˆäº†å®Œæ•´çš„é¡¹ç›®æ¶æ„ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;agentqu-dong-de-kai-fa-liu-cheng&quot;&gt;Agenté©±åŠ¨çš„å¼€å‘æµç¨‹&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;1-xiang-mu-jie-gou-da-jian&quot;&gt;1. é¡¹ç›®ç»“æ„æ­å»º&lt;&#x2F;h3&gt;
&lt;p&gt;Agenté¦–å…ˆå¸®æˆ‘è®¾è®¡äº†æ¸…æ™°çš„é¡¹ç›®ç»“æ„ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Hr_Copilot_v2&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ backend&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ app&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â”œâ”€â”€ api&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â”œâ”€â”€ models&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â”œâ”€â”€ services&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â””â”€â”€ utils&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ pyproject.toml
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ main.py
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ frontend&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ src&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â”œâ”€â”€ components&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â”œâ”€â”€ pages&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â”œâ”€â”€ services&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”‚   â””â”€â”€ utils&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ package.json
&lt;&#x2F;span&gt;&lt;span&gt;â””â”€â”€ docker-compose.yml
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;2-hou-duan-he-xin-jia-gou&quot;&gt;2. åç«¯æ ¸å¿ƒæ¶æ„&lt;&#x2F;h3&gt;
&lt;p&gt;Agentå¸®æˆ‘è®¾è®¡äº†åŸºäºFastAPIçš„RESTful APIæ¶æ„ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¨¡å‹å±‚&lt;&#x2F;strong&gt;ï¼šä½¿ç”¨SQLAlchemyå®šä¹‰å€™é€‰äººã€ç®€å†ç­‰å®ä½“&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å±‚&lt;&#x2F;strong&gt;ï¼šå°è£…ä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬æ–‡ä»¶è§£æã€LLMè°ƒç”¨&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;APIå±‚&lt;&#x2F;strong&gt;ï¼šæä¾›æ ‡å‡†åŒ–çš„RESTæ¥å£&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å·¥å…·å±‚&lt;&#x2F;strong&gt;ï¼šæ–‡ä»¶å¤„ç†ã€æ•°æ®éªŒè¯ç­‰è¾…åŠ©åŠŸèƒ½&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;3-qian-duan-jie-mian-she-ji&quot;&gt;3. å‰ç«¯ç•Œé¢è®¾è®¡&lt;&#x2F;h3&gt;
&lt;p&gt;å¯¹äºå‰ç«¯ï¼Œæˆ‘æ›´å€¾å‘äºç®€æ´çš„è®¾è®¡é£æ ¼ã€‚Agentç†è§£äº†æˆ‘çš„éœ€æ±‚ï¼Œç”Ÿæˆäº†åŸºäºReact + Ant Designçš„ç•Œé¢æ¡†æ¶ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;ç®€æ´çš„ç™½ç°è‰²ä¸»é¢˜&lt;&#x2F;li&gt;
&lt;li&gt;å“åº”å¼å¸ƒå±€è®¾è®¡&lt;&#x2F;li&gt;
&lt;li&gt;ç›´è§‚çš„æ“ä½œæµç¨‹&lt;&#x2F;li&gt;
&lt;li&gt;æ¸…æ™°çš„æ•°æ®å±•ç¤º&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;guan-jian-ji-zhu-xi-jie-de-die-dai-you-hua&quot;&gt;å…³é”®æŠ€æœ¯ç»†èŠ‚çš„è¿­ä»£ä¼˜åŒ–&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;llmji-cheng-de-tiao-zhan&quot;&gt;LLMé›†æˆçš„æŒ‘æˆ˜&lt;&#x2F;h3&gt;
&lt;p&gt;åœ¨å®ç°AIç®€å†è§£æåŠŸèƒ½æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›æŠ€æœ¯ç»†èŠ‚é—®é¢˜ã€‚é€šè¿‡ä¸Agentçš„å¤šè½®å¯¹è¯ï¼Œæˆ‘ä»¬é€æ­¥ä¼˜åŒ–äº†ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜1ï¼šå¦‚ä½•è®¾è®¡é«˜æ•ˆçš„promptæ¥æå–ç®€å†ä¿¡æ¯ï¼Ÿ&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Agentå¸®æˆ‘è®¾è®¡äº†ç»“æ„åŒ–çš„promptæ¨¡æ¿ï¼Œç¡®ä¿æå–ç»“æœçš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜2ï¼šå¦‚ä½•å¤„ç†ä¸åŒæ ¼å¼çš„æ–‡ä»¶ä¸Šä¼ ï¼Ÿ&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Agentå»ºè®®ä½¿ç”¨python-docxå¤„ç†Wordæ–‡æ¡£ï¼ŒPyPDF2å¤„ç†PDFæ–‡ä»¶ï¼Œå¹¶æä¾›äº†å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜3ï¼šå‰åç«¯æ¥å£å¦‚ä½•è®¾è®¡æ›´åˆç†ï¼Ÿ&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€èµ·è®¾è®¡äº†RESTfulé£æ ¼çš„APIæ¥å£ï¼Œç¡®ä¿å‰åç«¯çš„æ— ç¼å¯¹æ¥ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;sou-suo-he-shai-xuan-gong-neng-de-shi-xian&quot;&gt;æœç´¢å’Œç­›é€‰åŠŸèƒ½çš„å®ç°&lt;&#x2F;h3&gt;
&lt;p&gt;è¿™æ˜¯é¡¹ç›®ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œéœ€è¦ç»“åˆä¼ ç»Ÿçš„å…³é”®è¯åŒ¹é…å’ŒAIé©±åŠ¨çš„è¯­ä¹‰æœç´¢ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç¤ºä¾‹ï¼šæ™ºèƒ½ç­›é€‰æœåŠ¡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;FilterService&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.llm_client = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_llm_client&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;optimize_filter_criteria&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;user_input&lt;&#x2F;span&gt;&lt;span&gt;: str):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä½¿ç”¨LLMä¼˜åŒ–ç”¨æˆ·çš„ç­›é€‰æ¡ä»¶&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        prompt = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å°†ä»¥ä¸‹è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºç»“æ„åŒ–çš„ç­›é€‰æ¡ä»¶: &lt;&#x2F;span&gt;&lt;span&gt;{user_input}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        response = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.llm_client.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;complete&lt;&#x2F;span&gt;&lt;span&gt;(prompt)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;parse_filter_response&lt;&#x2F;span&gt;&lt;span&gt;(response)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;apply_filters&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;candidates&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;filters&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;åº”ç”¨ç­›é€‰æ¡ä»¶åˆ°å€™é€‰äººåˆ—è¡¨&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å®ç°å¤åˆç­›é€‰é€»è¾‘
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;pass
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;ui-uxde-chi-xu-da-mo&quot;&gt;UI&#x2F;UXçš„æŒç»­æ‰“ç£¨&lt;&#x2F;h3&gt;
&lt;p&gt;Agentåœ¨UIè®¾è®¡æ–¹é¢ä¹Ÿæä¾›äº†å¾ˆå¤šæœ‰ä»·å€¼çš„å»ºè®®ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶ä¸Šä¼ çš„æ‹–æ‹½ä½“éªŒ&lt;&#x2F;li&gt;
&lt;li&gt;ç­›é€‰ç»“æœçš„å®æ—¶é¢„è§ˆ&lt;&#x2F;li&gt;
&lt;li&gt;å€™é€‰äººçŠ¶æ€çš„å¯è§†åŒ–æ ‡è®°&lt;&#x2F;li&gt;
&lt;li&gt;å“åº”å¼è®¾è®¡çš„ç»†èŠ‚ä¼˜åŒ–&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;yi-ju-hua-shai-xuan-aiqu-dong-de-zi-ran-yu-yan-sou-suo&quot;&gt;&amp;quot;ä¸€å¥è¯ç­›é€‰&amp;quot;ï¼šAIé©±åŠ¨çš„è‡ªç„¶è¯­è¨€æœç´¢&lt;&#x2F;h3&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®æœ€è®©æˆ‘å…´å¥‹çš„åŠŸèƒ½å°±æ˜¯&lt;strong&gt;ä¸€å¥è¯æ™ºèƒ½ç­›é€‰&lt;&#x2F;strong&gt;ã€‚ä¼ ç»Ÿçš„ç®€å†ç­›é€‰éœ€è¦è®¾ç½®å¤æ‚çš„æ¡ä»¶ç»„åˆï¼Œè€Œæˆ‘ä»¬çš„ç³»ç»Ÿå¯ä»¥ç›´æ¥ç†è§£è‡ªç„¶è¯­è¨€æè¿°ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¯”å¦‚ï¼ŒHRåªéœ€è¦è¾“å…¥ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;quot;æ‰¾ä¸ªåšAIå®‰å…¨çš„&amp;quot;&lt;&#x2F;li&gt;
&lt;li&gt;&amp;quot;è¦æœ‰5å¹´ä»¥ä¸ŠPythonç»éªŒçš„å…¨æ ˆå·¥ç¨‹å¸ˆ&amp;quot;&lt;&#x2F;li&gt;
&lt;li&gt;&amp;quot;è‹±è¯­æµåˆ©ï¼Œæœ‰æµ·å¤–å·¥ä½œç»éªŒçš„äº§å“ç»ç†&amp;quot;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;ç³»ç»Ÿä¼šè‡ªåŠ¨å°†è¿™äº›è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºç²¾ç¡®çš„æœç´¢æ¡ä»¶ï¼Œå¹¶ä»ç®€å†å†…å®¹ä¸­è¿›è¡Œè¯­ä¹‰åŒ¹é…ã€‚&lt;&#x2F;p&gt;
&lt;h4 id=&quot;shi-xian-yuan-li&quot;&gt;å®ç°åŸç†&lt;&#x2F;h4&gt;
&lt;p&gt;Agentå¸®æˆ‘è®¾è®¡äº†ä¸€ä¸ªä¸¤é˜¶æ®µçš„æ™ºèƒ½ç­›é€‰æ¶æ„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;SmartFilterService&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.llm_client = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_llm_client&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;natural_language_search&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;query&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;candidates&lt;&#x2F;span&gt;&lt;span&gt;: List[Candidate]):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä¸€å¥è¯æ™ºèƒ½æœç´¢å€™é€‰äºº&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç¬¬ä¸€é˜¶æ®µï¼šç†è§£ç”¨æˆ·æ„å›¾
&lt;&#x2F;span&gt;&lt;span&gt;        intent_prompt = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        è§£æä»¥ä¸‹æ‹›è˜éœ€æ±‚ï¼Œæå–å…³é”®ç­›é€‰æ¡ä»¶ï¼š
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        ç”¨æˆ·è¾“å…¥ï¼š&lt;&#x2F;span&gt;&lt;span&gt;{query}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        è¯·æå–ï¼š
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        1. æŠ€èƒ½è¦æ±‚ï¼ˆå¦‚ï¼šPython, AI, å®‰å…¨ç­‰ï¼‰
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        2. ç»éªŒè¦æ±‚ï¼ˆå¦‚ï¼šå¹´é™ã€é¢†åŸŸç»éªŒï¼‰
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        3. å…¶ä»–æ¡ä»¶ï¼ˆå¦‚ï¼šè¯­è¨€èƒ½åŠ›ã€åœ°ç†ä½ç½®ç­‰ï¼‰
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        ä»¥JSONæ ¼å¼è¿”å›ç»“æ„åŒ–æ¡ä»¶ã€‚
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        criteria = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.llm_client.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;complete&lt;&#x2F;span&gt;&lt;span&gt;(intent_prompt)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç¬¬äºŒé˜¶æ®µï¼šè¯­ä¹‰åŒ¹é…å’Œè¯„åˆ†
&lt;&#x2F;span&gt;&lt;span&gt;        scored_candidates = []
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;candidate &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;candidates:
&lt;&#x2F;span&gt;&lt;span&gt;            score = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;calculate_match_score&lt;&#x2F;span&gt;&lt;span&gt;(candidate, criteria, query)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;score &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0.6&lt;&#x2F;span&gt;&lt;span&gt;:  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¾ç½®åŒ¹é…é˜ˆå€¼
&lt;&#x2F;span&gt;&lt;span&gt;                scored_candidates.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;((candidate, score))
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æŒ‰åŒ¹é…åº¦æ’åºè¿”å›
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;sorted&lt;&#x2F;span&gt;&lt;span&gt;(scored_candidates, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;lambda &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;: x[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;], &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;reverse&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;calculate_match_score&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;candidate&lt;&#x2F;span&gt;&lt;span&gt;: Candidate, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;criteria&lt;&#x2F;span&gt;&lt;span&gt;: dict, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;original_query&lt;&#x2F;span&gt;&lt;span&gt;: str):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;è®¡ç®—å€™é€‰äººä¸éœ€æ±‚çš„åŒ¹é…åº¦&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        match_prompt = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        è¯„ä¼°å€™é€‰äººä¸æ‹›è˜éœ€æ±‚çš„åŒ¹é…åº¦ï¼š
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        æ‹›è˜éœ€æ±‚ï¼š&lt;&#x2F;span&gt;&lt;span&gt;{original_query}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        ç»“æ„åŒ–æ¡ä»¶ï¼š&lt;&#x2F;span&gt;&lt;span&gt;{criteria}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        å€™é€‰äººä¿¡æ¯ï¼š
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        - æŠ€èƒ½ï¼š&lt;&#x2F;span&gt;&lt;span&gt;{candidate.skills}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        - ç»éªŒï¼š&lt;&#x2F;span&gt;&lt;span&gt;{candidate.experience}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        - æ•™è‚²ï¼š&lt;&#x2F;span&gt;&lt;span&gt;{candidate.education}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        - ç®€å†æ‘˜è¦ï¼š&lt;&#x2F;span&gt;&lt;span&gt;{candidate.summary}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        è¯·ç»™å‡º0-1ä¹‹é—´çš„åŒ¹é…åˆ†æ•°ï¼Œå¹¶è¯´æ˜ç†ç”±ã€‚
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;        &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        response = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.llm_client.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;complete&lt;&#x2F;span&gt;&lt;span&gt;(match_prompt)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;parse_match_score&lt;&#x2F;span&gt;&lt;span&gt;(response)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;yong-hu-ti-yan-she-ji&quot;&gt;ç”¨æˆ·ä½“éªŒè®¾è®¡&lt;&#x2F;h4&gt;
&lt;p&gt;åœ¨å‰ç«¯ç•Œé¢ä¸Šï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ªç®€æ´çš„æœç´¢æ¡†ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;jsx&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-jsx &quot;&gt;&lt;code class=&quot;language-jsx&quot; data-lang=&quot;jsx&quot;&gt;&lt;span&gt;const SmartSearch = () =&amp;gt; {
&lt;&#x2F;span&gt;&lt;span&gt;  const [query, setQuery] = useState(&amp;#39;&amp;#39;);
&lt;&#x2F;span&gt;&lt;span&gt;  const [results, setResults] = useState([]);
&lt;&#x2F;span&gt;&lt;span&gt;  const [loading, setLoading] = useState(false);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  const handleSearch = async () =&amp;gt; {
&lt;&#x2F;span&gt;&lt;span&gt;    setLoading(true);
&lt;&#x2F;span&gt;&lt;span&gt;    try {
&lt;&#x2F;span&gt;&lt;span&gt;      const response = await api.post(&amp;#39;&#x2F;search&#x2F;natural-language&amp;#39;, { query });
&lt;&#x2F;span&gt;&lt;span&gt;      setResults(response.data.candidates);
&lt;&#x2F;span&gt;&lt;span&gt;    } catch (error) {
&lt;&#x2F;span&gt;&lt;span&gt;      message.error(&amp;#39;æœç´¢å¤±è´¥ï¼Œè¯·é‡è¯•&amp;#39;);
&lt;&#x2F;span&gt;&lt;span&gt;    } finally {
&lt;&#x2F;span&gt;&lt;span&gt;      setLoading(false);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  return (
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;div className=&amp;quot;smart-search&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;Input.Search
&lt;&#x2F;span&gt;&lt;span&gt;        placeholder=&amp;quot;è¯•è¯•è¯´ï¼šæ‰¾ä¸ªåšAIå®‰å…¨çš„ï¼Œæˆ–è€…ï¼šè¦æœ‰5å¹´Pythonç»éªŒçš„åç«¯å·¥ç¨‹å¸ˆ&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        size=&amp;quot;large&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        onSearch={handleSearch}
&lt;&#x2F;span&gt;&lt;span&gt;        loading={loading}
&lt;&#x2F;span&gt;&lt;span&gt;        style={{ marginBottom: 16 }}
&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      
&lt;&#x2F;span&gt;&lt;span&gt;      {results.map(([candidate, score]) =&amp;gt; (
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;CandidateCard 
&lt;&#x2F;span&gt;&lt;span&gt;          key={candidate.id} 
&lt;&#x2F;span&gt;&lt;span&gt;          candidate={candidate} 
&lt;&#x2F;span&gt;&lt;span&gt;          matchScore={score}
&lt;&#x2F;span&gt;&lt;span&gt;        &#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      ))}
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;div&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  );
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;shi-ji-shi-yong-xiao-guo&quot;&gt;å®é™…ä½¿ç”¨æ•ˆæœ&lt;&#x2F;h4&gt;
&lt;p&gt;åœ¨æµ‹è¯•ä¸­ï¼Œè¿™ä¸ªåŠŸèƒ½è¡¨ç°å‡ºäº†æƒŠäººçš„æ™ºèƒ½ç¨‹åº¦ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;polly.wang&#x2F;build-ai-resume-screening-with-copilot-agent&#x2F;HR_Resume_Filter.png&quot; alt=&quot;HR_Resume_Filter&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;agentmo-shi-de-du-te-jie-zhi&quot;&gt;Agentæ¨¡å¼çš„ç‹¬ç‰¹ä»·å€¼&lt;&#x2F;h2&gt;
&lt;p&gt;åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº†Agentæ¨¡å¼ç›¸æ¯”ä¼ ç»Ÿä»£ç è¡¥å…¨çš„ä¼˜åŠ¿ï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;1-quan-ju-shi-jiao&quot;&gt;1. å…¨å±€è§†è§’&lt;&#x2F;h3&gt;
&lt;p&gt;Agentèƒ½å¤Ÿç†è§£æ•´ä¸ªé¡¹ç›®çš„æ¶æ„å’Œä¸Šä¸‹æ–‡ï¼Œæä¾›çš„å»ºè®®éƒ½æ˜¯åŸºäºé¡¹ç›®å…¨è²Œçš„ï¼Œè€Œä¸æ˜¯å±€éƒ¨çš„ä»£ç ç‰‡æ®µã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;2-jia-gou-zhi-dao&quot;&gt;2. æ¶æ„æŒ‡å¯¼&lt;&#x2F;h3&gt;
&lt;p&gt;å½“æˆ‘é¢ä¸´æŠ€æœ¯é€‰å‹æˆ–æ¶æ„è®¾è®¡é—®é¢˜æ—¶ï¼ŒAgentèƒ½å¤ŸåŸºäºæœ€ä½³å®è·µæä¾›å»ºè®®ï¼Œå¸®æˆ‘é¿å…äº†å¾ˆå¤šæ½œåœ¨çš„å‘ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;3-wen-ti-jie-jue&quot;&gt;3. é—®é¢˜è§£å†³&lt;&#x2F;h3&gt;
&lt;p&gt;é‡åˆ°å¤æ‚çš„æŠ€æœ¯é—®é¢˜æ—¶ï¼ŒAgentä¸åªæ˜¯æä¾›ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯æä¾›è§£å†³æ€è·¯å’Œå®Œæ•´çš„å®ç°æ–¹æ¡ˆã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;4-die-dai-you-hua&quot;&gt;4. è¿­ä»£ä¼˜åŒ–&lt;&#x2F;h3&gt;
&lt;p&gt;Agentèƒ½å¤Ÿè®°ä½æˆ‘ä»¬ä¹‹å‰çš„å¯¹è¯ï¼Œåœ¨åç»­çš„ä¼˜åŒ–ä¸­ä¿æŒä¸€è‡´æ€§ï¼Œè¿™åœ¨é•¿æœŸé¡¹ç›®å¼€å‘ä¸­éå¸¸æœ‰ä»·å€¼ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;xiang-mu-cheng-guo-yu-bu-shu&quot;&gt;é¡¹ç›®æˆæœä¸éƒ¨ç½²&lt;&#x2F;h2&gt;
&lt;p&gt;ç»è¿‡å‡ å‘¨çš„å¼€å‘å’Œè¿­ä»£ï¼Œæœ€ç»ˆå®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„AIç®€å†ç­›é€‰ç³»ç»Ÿï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åç«¯&lt;&#x2F;strong&gt;ï¼šåŸºäºFastAPIçš„é«˜æ€§èƒ½APIæœåŠ¡&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å‰ç«¯&lt;&#x2F;strong&gt;ï¼šç®€æ´ç¾è§‚çš„Reactåº”ç”¨&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;AIåŠŸèƒ½&lt;&#x2F;strong&gt;ï¼šé›†æˆClaude 3.5 Sonnetçš„æ™ºèƒ½è§£æå’Œç­›é€‰&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼šæä¾›äº†å®Œæ•´çš„Dockeré…ç½®&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Agentè¿˜å¸®æˆ‘ç”Ÿæˆäº†è¯¦ç»†çš„éƒ¨ç½²æ–‡æ¡£å’Œä½¿ç”¨è¯´æ˜ï¼Œè®©å…¶ä»–å¼€å‘è€…å¯ä»¥å¿«é€Ÿä¸Šæ‰‹ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;fan-si-yu-zhan-wang&quot;&gt;åæ€ä¸å±•æœ›&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;kai-fa-xiao-lu-de-xian-zhu-ti-sheng&quot;&gt;å¼€å‘æ•ˆç‡çš„æ˜¾è‘—æå‡&lt;&#x2F;h3&gt;
&lt;p&gt;ä½¿ç”¨Agentæ¨¡å¼å¼€å‘è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘çš„æ•ˆç‡è‡³å°‘æå‡äº†3å€ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘äº†æŸ¥èµ„æ–™çš„æ—¶é—´&lt;&#x2F;strong&gt;ï¼šAgentæä¾›çš„å»ºè®®éƒ½æ˜¯åŸºäºæœ€ä½³å®è·µçš„&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…äº†å¾ˆå¤šä½çº§é”™è¯¯&lt;&#x2F;strong&gt;ï¼šAgentçš„ä»£ç è´¨é‡å¾ˆé«˜ï¼Œbugå¾ˆå°‘&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;åŠ é€Ÿäº†å­¦ä¹ è¿‡ç¨‹&lt;&#x2F;strong&gt;ï¼šé€šè¿‡ä¸Agentçš„å¯¹è¯ï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šæ–°çš„æŠ€æœ¯å’Œæ–¹æ³•&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;agentmo-shi-de-zui-jia-shi-jian&quot;&gt;Agentæ¨¡å¼çš„æœ€ä½³å®è·µ&lt;&#x2F;h3&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘æ€»ç»“äº†å‡ ä¸ªä½¿ç”¨Agentæ¨¡å¼çš„æœ€ä½³å®è·µï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¯¦ç»†çš„åˆå§‹æè¿°&lt;&#x2F;strong&gt;ï¼šé¡¹ç›®å¼€å§‹æ—¶æä¾›å®Œæ•´ã€è¯¦ç»†çš„éœ€æ±‚æè¿°&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;è¿­ä»£å¼å¯¹è¯&lt;&#x2F;strong&gt;ï¼šå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå°çš„ã€å…·ä½“çš„é—®é¢˜&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒä¸Šä¸‹æ–‡&lt;&#x2F;strong&gt;ï¼šå……åˆ†åˆ©ç”¨Agentçš„ä¸Šä¸‹æ–‡è®°å¿†èƒ½åŠ›&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯å’Œæµ‹è¯•&lt;&#x2F;strong&gt;ï¼šAgentæä¾›çš„ä»£ç ä»éœ€è¦äººå·¥éªŒè¯å’Œæµ‹è¯•&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;wei-lai-de-fa-zhan-fang-xiang&quot;&gt;æœªæ¥çš„å‘å±•æ–¹å‘&lt;&#x2F;h3&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œæˆ‘è®¡åˆ’ç»§ç»­æ‰©å±•ä»¥ä¸‹åŠŸèƒ½ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;æ›´æ™ºèƒ½çš„å€™é€‰äººåŒ¹é…ç®—æ³•&lt;&#x2F;li&gt;
&lt;li&gt;å¤šè¯­è¨€ç®€å†æ”¯æŒ&lt;&#x2F;li&gt;
&lt;li&gt;æ›´ä¸°å¯Œçš„æ•°æ®åˆ†æåŠŸèƒ½&lt;&#x2F;li&gt;
&lt;li&gt;ä¼ä¸šçº§çš„éƒ¨ç½²å’Œæ‰©å±•æ–¹æ¡ˆ&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;jie-yu&quot;&gt;ç»“è¯­&lt;&#x2F;h2&gt;
&lt;p&gt;GitHub Copilotçš„Agentæ¨¡å¼çœŸæ­£æ”¹å˜äº†æˆ‘çš„å¼€å‘æ–¹å¼ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªç»éªŒä¸°å¯Œçš„ç¼–ç¨‹ä¼™ä¼´ï¼Œèƒ½å¤Ÿä»é¡¹ç›®æ¶æ„åˆ°å®ç°ç»†èŠ‚æä¾›å…¨æ–¹ä½çš„æ”¯æŒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¯¹äºé‚£äº›è¿˜åœ¨çŠ¹è±«æ˜¯å¦ä½¿ç”¨AIè¾…åŠ©å¼€å‘çš„æœ‹å‹ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼šå¤§èƒ†å°è¯•ï¼Œä½†è¦ä¿æŒæ€è€ƒã€‚AIå¯ä»¥å¤§å¤§æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œä½†æ ¸å¿ƒçš„è®¾è®¡æ€ç»´å’Œé—®é¢˜è§£å†³èƒ½åŠ›ä»ç„¶éœ€è¦æˆ‘ä»¬è‡ªå·±åŸ¹å…»ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¦‚æœä½ å¯¹è¿™ä¸ªé¡¹ç›®æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è®¿é—®GitHubä»“åº“ï¼Œä¹Ÿæ¬¢è¿å’Œæˆ‘äº¤æµä½¿ç”¨Agentæ¨¡å¼å¼€å‘çš„å¿ƒå¾—ä½“ä¼šã€‚è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ±AIæ—¶ä»£çš„ç¼–ç¨‹æ–°æ¨¡å¼ï¼&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;&lt;strong&gt;é¡¹ç›®åœ°å€&lt;&#x2F;strong&gt;ï¼š&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Polly2014&#x2F;AI_Resume_Screening&quot;&gt;AI_Resume_Screening&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>åŸºäºOpenHandsè¾…åŠ©çš„è´¢æŠ¥æ•°æ®çˆ¬å–ä¸åˆ†æå¹³å°å¼€å‘å®è·µ</title>
        <published>2025-05-16T00:00:00+00:00</published>
        <updated>2025-05-16T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://polly.wang/financial-report-crawler-analysis-platform/" type="text/html"/>
        <id>https://polly.wang/financial-report-crawler-analysis-platform/</id>
        
        <content type="html">&lt;!--
&gt; è´¢æŠ¥æ•°æ®å¦‚æµ·ï¼Œåˆ†æå¸ˆè¿·é€”éš¾è¿”ã€‚
&gt;
&gt; çœ‹çˆ¬è™«ç²¾å·§ï¼Œæ¥å£ä¼˜åŒ–ï¼›ä½“éªŒæå‡ï¼Œåˆ†æè½»æ¾ã€‚
&gt;
&gt; æ¶æ„æ¸…æ™°ï¼Œæµç¨‹æ˜äº†ï¼Œåƒè¡Œä»£ç å°½æ˜¾åŒ å¿ƒã€‚
&gt;
&gt; é—®æ•°æ®ï¼Œè®ºè´¢æŠ¥åˆ†æä¹‹é“ï¼Œè°ä¸»æ²‰æµ®ï¼Ÿ
&gt;
&gt; å¤šæ–¹æŠ€æœ¯æ›¾èã€‚å¿†codingæ—¶æ—¥æœˆå¦‚æ¢­ã€‚
&gt;
&gt; æ°Webåº”ç”¨ï¼Œè®¾è®¡å…¸é›…ï¼›å¼€å‘ä½“éªŒï¼Œæµç•…å¦‚è™¹ã€‚
&gt;
&gt; å°è£…ç®—æ³•ï¼Œç®€åŒ–åˆ†æï¼Œå‡ æ­¥æ“ä½œèƒœç™¾è¡Œè„šæœ¬ã€‚
&gt;
&gt; ç»ˆæœ‰æˆï¼Œå¾…LLMåŠ æŒï¼Œæ™ºèƒ½å¯èˆªï¼
--&gt;
&lt;h2 id=&quot;yi-xiang-mu-bei-jing-yu-yi-yi&quot;&gt;ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸æ„ä¹‰&lt;&#x2F;h2&gt;
&lt;p&gt;è´¢åŠ¡æŠ¥å‘Šæ˜¯äº†è§£ä¼ä¸šç»è¥çŠ¶å†µçš„é‡è¦çª—å£ï¼Œä½†è·å–å’Œåˆ†æè´¢æŠ¥æ•°æ®å¯¹æ™®é€šæŠ•èµ„è€…è€Œè¨€é¢‡å…·æŒ‘æˆ˜æ€§ã€‚ç”¨æˆ·éœ€è¦ç†Ÿæ‚‰å„å¤§äº¤æ˜“æ‰€ç½‘ç«™ç»“æ„ã€æ•°æ®æ ¼å¼åŠè´¢åŠ¡åˆ†ææ–¹æ³•ï¼Œè¿™æ— ç–‘æé«˜äº†å…¥é—¨é—¨æ§›ã€‚ä¸ºè§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œæˆ‘ä»¬å¼€å‘äº†åŸºäºFastAPIçš„è´¢æŠ¥æ•°æ®çˆ¬å–ä¸åˆ†æå¹³å°ï¼Œæ—¨åœ¨ç”¨å›¾å½¢åŒ–ç•Œé¢å°è£…å¤æ‚çš„æ•°æ®è·å–å’Œåˆ†ææµç¨‹ï¼Œä½¿ä¸å…·å¤‡ä¸“ä¸šèƒŒæ™¯çš„ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾è·å–å’Œç†è§£ä¼ä¸šè´¢åŠ¡æ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;polly.wang&#x2F;financial-report-crawler-analysis-platform&#x2F;Financial_Platform.png&quot; alt=&quot;Finalcial Platform&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;er-ji-zhu-zhan-xuan-ze&quot;&gt;äºŒã€æŠ€æœ¯æ ˆé€‰æ‹©&lt;&#x2F;h2&gt;
&lt;p&gt;åœ¨æŠ€æœ¯é€‰å‹ä¸Šï¼Œè€ƒè™‘äº†å¼€å‘æ•ˆç‡ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Python&lt;&#x2F;strong&gt; - ä½œä¸ºä¸»è¦å¼€å‘è¯­è¨€ï¼Œå…¼å…·å¼€å‘æ•ˆç‡å’Œå¼ºå¤§çš„æ•°æ®å¤„ç†èƒ½åŠ›&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;FastAPI&lt;&#x2F;strong&gt; - é«˜æ€§èƒ½çš„Webæ¡†æ¶ï¼Œæä¾›å¼‚æ­¥æ”¯æŒå’Œè‡ªåŠ¨APIæ–‡æ¡£&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Jinja2&lt;&#x2F;strong&gt; - çµæ´»çš„æ¨¡æ¿å¼•æ“ï¼Œç”¨äºå‰ç«¯é¡µé¢æ¸²æŸ“&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Bootstrap&lt;&#x2F;strong&gt; - å“åº”å¼å‰ç«¯æ¡†æ¶ï¼Œç¡®ä¿è‰¯å¥½çš„è·¨è®¾å¤‡ä½“éªŒ&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Requests &amp;amp; BeautifulSoup&lt;&#x2F;strong&gt; - å¼ºå¤§çš„ç½‘ç»œè¯·æ±‚å’ŒHTMLè§£æåº“&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;PDFPlumber&lt;&#x2F;strong&gt; - PDFæ–‡æ¡£è§£æå·¥å…·ï¼Œç”¨äºæå–è´¢æŠ¥æ–‡æœ¬&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;LiteLLM&lt;&#x2F;strong&gt; - å¤§è¯­è¨€æ¨¡å‹æ¥å£å°è£…ï¼Œç”¨äºæ™ºèƒ½è´¢æŠ¥åˆ†æ&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Docker&lt;&#x2F;strong&gt; - å®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;san-jia-gou-she-ji&quot;&gt;ä¸‰ã€æ¶æ„è®¾è®¡&lt;&#x2F;h2&gt;
&lt;p&gt;åº”ç”¨é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œæ˜ç¡®èŒè´£åˆ†ç¦»ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;Financial Platform
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ æ•°æ®æ¨¡å‹å±‚ (Models)
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ è·¯ç”±æ§åˆ¶å±‚ (Routers)
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ æœåŠ¡é€»è¾‘å±‚ (Services)
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ çˆ¬è™«æœåŠ¡ (CrawlerService)
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ åˆ†ææœåŠ¡ (AnalysisService)
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ LLMåˆ†ææœåŠ¡ (LLMAnalysisService)
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ æ¨¡æ¿è§†å›¾å±‚ (Templates)
&lt;&#x2F;span&gt;&lt;span&gt;â””â”€â”€ é™æ€èµ„æºå±‚ (Static)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œå‡å°‘è€¦åˆæ€§ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§ã€‚è¿™ç§è®¾è®¡èƒ½å¤Ÿç‹¬ç«‹ä¼˜åŒ–å„ä¸ªç»„ä»¶ï¼Œä¾‹å¦‚æ”¹è¿›çˆ¬è™«ç®—æ³•è€Œä¸å½±å“åˆ†æé€»è¾‘ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;si-guan-jian-gong-neng-shi-xian&quot;&gt;å››ã€å…³é”®åŠŸèƒ½å®ç°&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;4-1-zhi-neng-cai-bao-pa-chong&quot;&gt;4.1 æ™ºèƒ½è´¢æŠ¥çˆ¬è™«&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;crawl_annual_report_from_cninfo&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;stock_code&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;year&lt;&#x2F;span&gt;&lt;span&gt;: int, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;report_type&lt;&#x2F;span&gt;&lt;span&gt;: str = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¹´åº¦æŠ¥å‘Š&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;) -&amp;gt; Dict[str, Any]:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä»å·¨æ½®èµ„è®¯ç½‘çˆ¬å–è´¢åŠ¡æŠ¥å‘Š&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¼€å§‹çˆ¬å– &lt;&#x2F;span&gt;&lt;span&gt;{stock_code} {year}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¹´ &lt;&#x2F;span&gt;&lt;span&gt;{report_type}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ„å»ºæœç´¢å…³é”®è¯
&lt;&#x2F;span&gt;&lt;span&gt;    search_key = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{stock_code} {year}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¹´&lt;&#x2F;span&gt;&lt;span&gt;{report_type}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ„é€ å·¨æ½®èµ„è®¯ç½‘æœç´¢URLå’Œå‚æ•°
&lt;&#x2F;span&gt;&lt;span&gt;    base_url = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;http:&#x2F;&#x2F;www.cninfo.com.cn&#x2F;new&#x2F;fulltextSearch&#x2F;full&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    params = {
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;searchkey&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: search_key,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sdate&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;edate&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;isfulltext&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;false&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sortName&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pubdate&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sortType&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;desc&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pageNum&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;pageSize&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¢åŠ éšæœºå»¶è¿Ÿï¼Œé¿å…åçˆ¬
&lt;&#x2F;span&gt;&lt;span&gt;        delay = random.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uniform&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ç­‰å¾… &lt;&#x2F;span&gt;&lt;span&gt;{delay&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;:.2f&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; ç§’åå‘é€è¯·æ±‚&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(delay)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å‘é€è¯·æ±‚
&lt;&#x2F;span&gt;&lt;span&gt;        response = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;post&lt;&#x2F;span&gt;&lt;span&gt;(base_url, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;headers&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.headers, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;=params, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timeout&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;30&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;raise_for_status&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è§£æJSONå“åº”
&lt;&#x2F;span&gt;&lt;span&gt;        result = response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ... å¤„ç†å“åº”æ•°æ® ...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;çˆ¬è™«æœåŠ¡æ˜¯åº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œé€šè¿‡æ™ºèƒ½è§£æå„å¤§è´¢ç»ç½‘ç«™ç»“æ„ï¼Œè‡ªåŠ¨è·å–è´¢æŠ¥PDFæ–‡ä»¶å¹¶æå–æ–‡æœ¬å†…å®¹ï¼Œä¸ºåç»­åˆ†ææä¾›æ•°æ®åŸºç¡€ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;4-2-cai-bao-shu-ju-fen-xi&quot;&gt;4.2 è´¢æŠ¥æ•°æ®åˆ†æ&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;extract_financial_indicators&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;report_content&lt;&#x2F;span&gt;&lt;span&gt;: str) -&amp;gt; Dict[str, Any]:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä»è´¢æŠ¥å†…å®¹ä¸­æå–å…³é”®è´¢åŠ¡æŒ‡æ ‡&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    indicators = {
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;revenue&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;net_profit&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;total_assets&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;total_liabilities&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;equity&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cash_flow_from_operations&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;eps&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;roe&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ... æ›´å¤šæŒ‡æ ‡ ...
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;    revenue_pattern = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;r&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;è¥ä¸šæ”¶å…¥&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;^&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;\d]&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;[\d,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    revenue_match = re.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;search&lt;&#x2F;span&gt;&lt;span&gt;(revenue_pattern, report_content)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;revenue_match:
&lt;&#x2F;span&gt;&lt;span&gt;        indicators[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;revenue&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_convert_to_number&lt;&#x2F;span&gt;&lt;span&gt;(revenue_match.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;group&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;))
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ... æå–æ›´å¤šæŒ‡æ ‡ ...
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;indicators
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;åˆ†ææœåŠ¡è´Ÿè´£ä»è´¢æŠ¥æ–‡æœ¬ä¸­æå–å…³é”®è´¢åŠ¡æŒ‡æ ‡ï¼Œå¹¶è®¡ç®—é‡è¦è´¢åŠ¡æ¯”ç‡ï¼Œä¸ºç”¨æˆ·æä¾›ç›´è§‚çš„è´¢åŠ¡çŠ¶å†µæ¦‚è§ˆã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;4-3-llmzhi-neng-fen-xi&quot;&gt;4.3 LLMæ™ºèƒ½åˆ†æ&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;analyze_financial_report&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;report_content&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;company_info&lt;&#x2F;span&gt;&lt;span&gt;: Dict[str, str]) -&amp;gt; Dict[str, Any]:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä½¿ç”¨LLMåˆ†æè´¢æŠ¥å†…å®¹&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;not &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.api_key:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;warning&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœªæä¾›APIå¯†é’¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_get_mock_analysis_result&lt;&#x2F;span&gt;&lt;span&gt;(company_info)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ„å»ºæç¤ºè¯
&lt;&#x2F;span&gt;&lt;span&gt;    prompt = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_build_analysis_prompt&lt;&#x2F;span&gt;&lt;span&gt;(report_content, company_info)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä½¿ç”¨litellmè°ƒç”¨LLM API
&lt;&#x2F;span&gt;&lt;span&gt;        response = litellm.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;completion&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;model&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.model_name,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;messages&lt;&#x2F;span&gt;&lt;span&gt;=[{&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;role&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;user&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: prompt}],
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;temperature&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0.2&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;max_tokens&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2000
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è§£æå“åº”
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_parse_llm_response&lt;&#x2F;span&gt;&lt;span&gt;(response)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;LLM APIè°ƒç”¨å¤±è´¥: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;message&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;åˆ†æå¤±è´¥: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;LLMåˆ†ææœåŠ¡æ˜¯å¹³å°çš„åˆ›æ–°äº®ç‚¹ï¼Œé€šè¿‡é›†æˆå¤§è¯­è¨€æ¨¡å‹ï¼Œæä¾›ä¸“ä¸šçº§çš„è´¢æŠ¥è§£è¯»å’ŒæŠ•èµ„å»ºè®®ï¼Œå¤§å¹…é™ä½äº†è´¢æŠ¥åˆ†æçš„ä¸“ä¸šé—¨æ§›ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;4-4-yong-hu-you-hao-de-webjie-mian&quot;&gt;4.4 ç”¨æˆ·å‹å¥½çš„Webç•Œé¢&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;container mt-4&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;row&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;col-md-6&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;card&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;card-header bg-primary text-white&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h5 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;card-title mb-0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;è´¢æŠ¥è·å–&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;h5&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;card-body&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;form &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;crawlerForm&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                        &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mb-3&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;label &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;stockCode&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;form-label&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;è‚¡ç¥¨ä»£ç &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;label&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;input &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;form-control&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;stockCode&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;stock_code&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;required&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                        &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;lt;!-- ... æ›´å¤šè¡¨å•å­—æ®µ ... --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                        &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;button &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;submit&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;class&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;btn btn-primary&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&amp;gt;è·å–è´¢æŠ¥&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;form&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;lt;!-- ... æ›´å¤šå¡ç‰‡ ... --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Webç•Œé¢é‡‡ç”¨ç›´è§‚çš„å¡ç‰‡å¼å¸ƒå±€ï¼Œå°†å¤æ‚çš„åŠŸèƒ½æ¨¡å—åŒ–å±•ç¤ºï¼Œç”¨æˆ·å¯ä»¥è½»æ¾å®Œæˆä»è´¢æŠ¥è·å–åˆ°æ™ºèƒ½åˆ†æçš„å…¨æµç¨‹æ“ä½œã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wu-jie-jue-de-ji-zhu-nan-ti&quot;&gt;äº”ã€è§£å†³çš„æŠ€æœ¯éš¾é¢˜&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;5-1-fan-pa-ji-zhi-ying-dui&quot;&gt;5.1 åçˆ¬æœºåˆ¶åº”å¯¹&lt;&#x2F;h3&gt;
&lt;p&gt;åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‘ç°å·¨æ½®èµ„è®¯ç½‘ç­‰ç½‘ç«™æœ‰è¾ƒä¸ºä¸¥æ ¼çš„åçˆ¬æœºåˆ¶ï¼Œç›´æ¥è¯·æ±‚å®¹æ˜“è¢«å°ç¦IPã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼šå®ç°äº†æ™ºèƒ½è¯·æ±‚ç­–ç•¥ï¼ŒåŒ…æ‹¬éšæœºå»¶æ—¶ã€User-Agentè½®æ¢å’ŒæŒ‡æ•°é€€é¿é‡è¯•ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;_make_request_with_retry&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;url&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;method&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;GET&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;max_retries&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;å¸¦é‡è¯•æœºåˆ¶çš„è¯·æ±‚æ–¹æ³•&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    headers_list = [
&lt;&#x2F;span&gt;&lt;span&gt;        {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;User-Agent&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;91.0.4472.124 Safari&#x2F;537.36&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;},
&lt;&#x2F;span&gt;&lt;span&gt;        {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;User-Agent&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit&#x2F;605.1.15 (KHTML, like Gecko) Version&#x2F;14.1.1 Safari&#x2F;605.1.15&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;},
&lt;&#x2F;span&gt;&lt;span&gt;        {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;User-Agent&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Mozilla&#x2F;5.0 (X11; Linux x86_64) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;92.0.4515.107 Safari&#x2F;537.36&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;}
&lt;&#x2F;span&gt;&lt;span&gt;    ]
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;attempt &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;range&lt;&#x2F;span&gt;&lt;span&gt;(max_retries):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# éšæœºå»¶æ—¶
&lt;&#x2F;span&gt;&lt;span&gt;            time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;(random.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uniform&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;))
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# éšæœºé€‰æ‹©User-Agent
&lt;&#x2F;span&gt;&lt;span&gt;            headers = random.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;choice&lt;&#x2F;span&gt;&lt;span&gt;(headers_list)
&lt;&#x2F;span&gt;&lt;span&gt;            headers.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;update&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.base_headers)
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;method.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;upper&lt;&#x2F;span&gt;&lt;span&gt;() == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;GET&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;                response = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(url, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;headers&lt;&#x2F;span&gt;&lt;span&gt;=headers, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timeout&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;30&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;                response = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;post&lt;&#x2F;span&gt;&lt;span&gt;(url, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;headers&lt;&#x2F;span&gt;&lt;span&gt;=headers, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;=data, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timeout&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;30&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;                
&lt;&#x2F;span&gt;&lt;span&gt;            response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;raise_for_status&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;response
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;            logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;warning&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;è¯·æ±‚å¤±è´¥ (å°è¯• &lt;&#x2F;span&gt;&lt;span&gt;{attempt+&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;{max_retries}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;): &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æŒ‡æ•°é€€é¿
&lt;&#x2F;span&gt;&lt;span&gt;            time.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sleep&lt;&#x2F;span&gt;&lt;span&gt;((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span&gt;** attempt) + random.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;random&lt;&#x2F;span&gt;&lt;span&gt;())
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Exception&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;è¯·æ±‚å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°: &lt;&#x2F;span&gt;&lt;span&gt;{max_retries}&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;5-2-pdfwen-ben-ti-qu-you-hua&quot;&gt;5.2 PDFæ–‡æœ¬æå–ä¼˜åŒ–&lt;&#x2F;h3&gt;
&lt;p&gt;è´¢æŠ¥PDFæ ¼å¼å¤æ‚å¤šæ ·ï¼Œç›´æ¥æå–æ–‡æœ¬å¸¸å‡ºç°æ ¼å¼æ··ä¹±ã€è¡¨æ ¼æ•°æ®ä¸¢å¤±ç­‰é—®é¢˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼šå¼€å‘äº†ä¸“ç”¨çš„PDFå¤„ç†æµç¨‹ï¼Œç»“åˆé¡µé¢å¸ƒå±€åˆ†æå’Œè¡¨æ ¼è¯†åˆ«ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;extract_text_from_pdf&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pdf_path&lt;&#x2F;span&gt;&lt;span&gt;: Path, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;save_text&lt;&#x2F;span&gt;&lt;span&gt;: bool = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;) -&amp;gt; Optional[str]:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä»PDFæå–æ–‡æœ¬å†…å®¹&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¼€å§‹ä»PDFæå–æ–‡æœ¬: &lt;&#x2F;span&gt;&lt;span&gt;{pdf_path}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        text_content = []
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span&gt;pdfplumber.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;open&lt;&#x2F;span&gt;&lt;span&gt;(pdf_path) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;pdf:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;page &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;pdf.pages:
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æå–è¡¨æ ¼
&lt;&#x2F;span&gt;&lt;span&gt;                tables = page.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;extract_tables&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;tables:
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;table &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;tables:
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å°†è¡¨æ ¼è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼
&lt;&#x2F;span&gt;&lt;span&gt;                        table_text = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_format_table&lt;&#x2F;span&gt;&lt;span&gt;(table)
&lt;&#x2F;span&gt;&lt;span&gt;                        text_content.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(table_text)
&lt;&#x2F;span&gt;&lt;span&gt;                
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æå–æ­£æ–‡æ–‡æœ¬
&lt;&#x2F;span&gt;&lt;span&gt;                text = page.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;extract_text&lt;&#x2F;span&gt;&lt;span&gt;() or &amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                text_content.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(text)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åå¤„ç†ï¼šæ¸…ç†å¤šä½™ç©ºç™½ã€åˆå¹¶æ®µè½ç­‰
&lt;&#x2F;span&gt;&lt;span&gt;        full_text = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;_post_process_text&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\n\n&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;(text_content))
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;save_text:
&lt;&#x2F;span&gt;&lt;span&gt;            text_path = pdf_path.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;with_suffix&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;.txt&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;open&lt;&#x2F;span&gt;&lt;span&gt;(text_path, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;w&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;encoding&lt;&#x2F;span&gt;&lt;span&gt;=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;utf-8&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;f:
&lt;&#x2F;span&gt;&lt;span&gt;                f.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;write&lt;&#x2F;span&gt;&lt;span&gt;(full_text)
&lt;&#x2F;span&gt;&lt;span&gt;            logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ–‡æœ¬å†…å®¹å·²ä¿å­˜è‡³: &lt;&#x2F;span&gt;&lt;span&gt;{text_path}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;full_text
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æå–PDFæ–‡æœ¬æ—¶å‡ºé”™: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;5-3-llmxiang-ying-jie-xi&quot;&gt;5.3 LLMå“åº”è§£æ&lt;&#x2F;h3&gt;
&lt;p&gt;LLMè¿”å›çš„åˆ†æç»“æœæ ¼å¼ä¸ç»Ÿä¸€ï¼Œéœ€è¦æ™ºèƒ½è§£æä»¥æå–ç»“æ„åŒ–æ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼šå®ç°äº†åŸºäºæ¨¡å¼è¯†åˆ«çš„å“åº”è§£æå™¨ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;_parse_llm_response&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response&lt;&#x2F;span&gt;&lt;span&gt;) -&amp;gt; Dict[str, Any]:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;è§£æLLMå“åº”&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä»litellmå“åº”ä¸­æå–å†…å®¹
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;hasattr&lt;&#x2F;span&gt;&lt;span&gt;(response, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;choices&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;) and response.choices:
&lt;&#x2F;span&gt;&lt;span&gt;            content = response.choices[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].message.content
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å…¼å®¹ä¸åŒçš„å“åº”æ ¼å¼
&lt;&#x2F;span&gt;&lt;span&gt;            content = response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;choices&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, [{}])[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;message&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, {}).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;content&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, &amp;#39;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å°è¯•æå–JSONéƒ¨åˆ†
&lt;&#x2F;span&gt;&lt;span&gt;        json_match = re.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;search&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;r&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;```json&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;\s&lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;[\s\S]&lt;&#x2F;span&gt;&lt;span&gt;*?&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;\s&lt;&#x2F;span&gt;&lt;span&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;```&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, content)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;json_match:
&lt;&#x2F;span&gt;&lt;span&gt;            json_str = json_match.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;group&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;json.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;loads&lt;&#x2F;span&gt;&lt;span&gt;(json_str)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;pass
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¦‚æœæ²¡æœ‰JSONæ ¼å¼ï¼Œå°è¯•è§£æç»“æ„åŒ–æ–‡æœ¬
&lt;&#x2F;span&gt;&lt;span&gt;        result = {
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;analysis&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {},
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;summary&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;recommendations&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: []
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æå–æ‘˜è¦éƒ¨åˆ†
&lt;&#x2F;span&gt;&lt;span&gt;        summary_match = re.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;search&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;r&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ‘˜è¦&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;[:ï¼š]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;[\s\S]&lt;&#x2F;span&gt;&lt;span&gt;*?&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;?=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;\n\n&lt;&#x2F;span&gt;&lt;span&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;)&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;, content)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;summary_match:
&lt;&#x2F;span&gt;&lt;span&gt;            result[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;summary&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = summary_match.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;group&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strip&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ... æå–æ›´å¤šç»“æ„åŒ–å†…å®¹ ...
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;result
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;è§£æLLMå“åº”æ—¶å‡ºé”™: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;message&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;è§£æå“åº”å¤±è´¥: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;liu-bu-shu-yu-yun-xing&quot;&gt;å…­ã€éƒ¨ç½²ä¸è¿è¡Œ&lt;&#x2F;h2&gt;
&lt;p&gt;åº”ç”¨æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼ŒåŒ…æ‹¬Dockerå®¹å™¨åŒ–éƒ¨ç½²å’Œä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;bin&#x2F;bash
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# run.sh - åº”ç”¨å¯åŠ¨è„šæœ¬
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¾ç½®ç¯å¢ƒå˜é‡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PORT&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;12001
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;export &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;OPENAI_API_KEY&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-api-key-here&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å®‰è£…ä¾èµ–
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -r&lt;&#x2F;span&gt;&lt;span&gt; requirements.txt
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¯åŠ¨åº”ç”¨
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uvicorn&lt;&#x2F;span&gt;&lt;span&gt; main:app&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --host&lt;&#x2F;span&gt;&lt;span&gt; 0.0.0.0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --port &lt;&#x2F;span&gt;&lt;span&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;PORT --reload
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Dockeréƒ¨ç½²æ›´åŠ ç®€ä¾¿ï¼Œåªéœ€ä¸€è¡Œå‘½ä»¤å³å¯å¯åŠ¨å®Œæ•´ç¯å¢ƒï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker&lt;&#x2F;span&gt;&lt;span&gt; build&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span&gt; financial-platform . &amp;amp;&amp;amp; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker&lt;&#x2F;span&gt;&lt;span&gt; run&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -p&lt;&#x2F;span&gt;&lt;span&gt; 12001:12001&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -e&lt;&#x2F;span&gt;&lt;span&gt; OPENAI_API_KEY=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;your-api-key&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; financial-platform
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;qi-xiang-mu-zong-jie-yu-zhan-wang&quot;&gt;ä¸ƒã€é¡¹ç›®æ€»ç»“ä¸å±•æœ›&lt;&#x2F;h2&gt;
&lt;p&gt;åŸºäºFastAPIçš„è´¢æŠ¥æ•°æ®çˆ¬å–ä¸åˆ†æå¹³å°çš„å¼€å‘æ˜¯ä¸€æ¬¡å°†å¤æ‚é‡‘èæ•°æ®å¤„ç†æµç¨‹ç®€åŒ–ä¸ºç”¨æˆ·å‹å¥½ç•Œé¢çš„å°è¯•ã€‚é€šè¿‡ç²¾å¿ƒçš„æ¶æ„è®¾è®¡å’ŒUIä¼˜åŒ–ï¼ŒæˆåŠŸé™ä½äº†è´¢æŠ¥è·å–å’Œåˆ†æçš„é—¨æ§›ï¼Œå®ç°äº†é¢„æœŸç›®æ ‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ï¼Œè®¡åˆ’è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰©å±•æ•°æ®æºï¼Œæ”¯æŒæ›´å¤šäº¤æ˜“æ‰€å’Œè´¢ç»ç½‘ç«™&lt;&#x2F;li&gt;
&lt;li&gt;å¢å¼ºæ•°æ®å¯è§†åŒ–èƒ½åŠ›ï¼Œæä¾›äº¤äº’å¼å›¾è¡¨&lt;&#x2F;li&gt;
&lt;li&gt;å®ç°è´¢æŠ¥æ•°æ®çš„å†å²å¯¹æ¯”å’Œè¡Œä¸šå¯¹æ ‡åˆ†æ&lt;&#x2F;li&gt;
&lt;li&gt;ä¼˜åŒ–LLMåˆ†æèƒ½åŠ›ï¼Œæä¾›æ›´ä¸“ä¸šçš„æŠ•èµ„å»ºè®®&lt;&#x2F;li&gt;
&lt;li&gt;æ·»åŠ ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿï¼Œæ”¯æŒä¸ªæ€§åŒ–è®¾ç½®å’Œæ”¶è—&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;&lt;strong&gt;æºç åœ°å€&lt;&#x2F;strong&gt;ï¼š&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Polly2014&#x2F;Financial_Platform&quot;&gt;GitHub - Financial Platform&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;ba-kai-fa-guo-cheng-zhong-de-dui-hua-ji-lu&quot;&gt;å…«ã€å¼€å‘è¿‡ç¨‹ä¸­çš„å¯¹è¯è®°å½•&lt;&#x2F;h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸AIåŠ©æ‰‹çš„éƒ¨åˆ†å…³é”®å¯¹è¯ï¼Œå±•ç¤ºäº†é¡¹ç›®çš„æ„æ€å’Œå®ç°è¿‡ç¨‹ï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;chu-shi-xu-qiu-miao-shu&quot;&gt;åˆå§‹éœ€æ±‚æè¿°&lt;&#x2F;h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·&lt;&#x2F;strong&gt;ï¼šä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è´¢æŠ¥æ•°æ®çˆ¬è™«åŠ©æ‰‹ï¼Œä¸“æ³¨äºä»å„ç§å…¬å¼€æ¸ é“è·å–ä¼ä¸šè´¢åŠ¡æŠ¥å‘ŠåŸå§‹æ–‡ä»¶ã€‚å¸®æˆ‘æ„å»ºä¸€ä¸ªåŸºäºfastapiçš„Webç«™ç‚¹ï¼Œå®ç°ä¸Šè¿°åŠŸèƒ½ï¼ˆç”¨æˆ·è¾“å…¥æˆ–é€‰æ‹©å…¬å¸åç§°ã€è‚¡ç¥¨ä»£ç ç­‰ä¿¡æ¯ï¼‰åå°è°ƒç”¨çˆ¬è™«è·å–æ•°æ®ï¼Œå‰ç«¯å¯ä»¥å±•ç¤ºå’Œä¸‹è½½ã€‚åŒæ—¶é¦–é¡µé¢„ç•™å‡º&amp;quot;è´¢æŠ¥åˆ†æ&amp;quot;çš„åŠŸèƒ½&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h3 id=&quot;pa-chong-fu-wu-shi-xian&quot;&gt;çˆ¬è™«æœåŠ¡å®ç°&lt;&#x2F;h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;AIåŠ©æ‰‹&lt;&#x2F;strong&gt;ï¼šæˆ‘å°†ä¸ºæ‚¨æ„å»ºä¸€ä¸ªåŸºäºFastAPIçš„è´¢æŠ¥æ•°æ®çˆ¬è™«Webåº”ç”¨ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¾è®¡é¡¹ç›®ç»“æ„ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;financial_crawler&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ app&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ models&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ routers&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ services&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ static&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ templates&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ main.py
&lt;&#x2F;span&gt;&lt;span&gt;â””â”€â”€ requirements.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®ç°çˆ¬è™«æœåŠ¡ï¼Œå®ƒå°†è´Ÿè´£ä»å·¨æ½®èµ„è®¯ç½‘ç­‰æ¸ é“è·å–è´¢æŠ¥æ•°æ®...&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h3 id=&quot;llmfen-xi-gong-neng-ji-cheng&quot;&gt;LLMåˆ†æåŠŸèƒ½é›†æˆ&lt;&#x2F;h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·&lt;&#x2F;strong&gt;ï¼šç°åœ¨æˆ‘æƒ³å¢åŠ ä¸€ä¸ªåŸºäºLLMçš„è´¢æŠ¥æ™ºèƒ½åˆ†æåŠŸèƒ½ï¼Œå¯ä»¥è‡ªåŠ¨è§£è¯»è´¢æŠ¥å¹¶ç»™å‡ºæŠ•èµ„å»ºè®®&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;AIåŠ©æ‰‹&lt;&#x2F;strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒ³æ³•ï¼æˆ‘ä»¬å¯ä»¥é›†æˆOpenAIçš„GPTæˆ–å…¶ä»–LLMæ¨¡å‹æ¥å®ç°è´¢æŠ¥æ™ºèƒ½åˆ†æã€‚æˆ‘å°†åˆ›å»ºä¸€ä¸ªæ–°çš„LLMAnalysisServiceç±»å’Œç›¸åº”çš„è·¯ç”±...&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;LLMAnalysisService&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;LLMè´¢æŠ¥åˆ†ææœåŠ¡&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;api_key&lt;&#x2F;span&gt;&lt;span&gt;: str = &amp;quot;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;model_name&lt;&#x2F;span&gt;&lt;span&gt;: str = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;gpt-3.5-turbo&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.api_key = api_key
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.model_name = model_name
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;analyze_financial_report&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;report_content&lt;&#x2F;span&gt;&lt;span&gt;: str, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;company_info&lt;&#x2F;span&gt;&lt;span&gt;: Dict[str, str]) -&amp;gt; Dict[str, Any]:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;ä½¿ç”¨LLMåˆ†æè´¢æŠ¥å†…å®¹&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å®ç°ä»£ç ...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;blockquote&gt;
&lt;h3 id=&quot;bu-shu-yu-you-hua&quot;&gt;éƒ¨ç½²ä¸ä¼˜åŒ–&lt;&#x2F;h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·&lt;&#x2F;strong&gt;ï¼šæˆ‘ä»¬éœ€è¦ç¡®ä¿åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œï¼Œæœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;AIåŠ©æ‰‹&lt;&#x2F;strong&gt;ï¼šä¸ºäº†ç¡®ä¿åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œï¼Œæˆ‘å»ºè®®ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§&lt;&#x2F;li&gt;
&lt;li&gt;å®ç°å¥å£®çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•&lt;&#x2F;li&gt;
&lt;li&gt;æ·»åŠ è¯·æ±‚é™æµå’Œç¼“å­˜æœºåˆ¶&lt;&#x2F;li&gt;
&lt;li&gt;ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿé…ç½®&lt;&#x2F;li&gt;
&lt;li&gt;å®ç°å®šæ—¶ä»»åŠ¡ï¼Œè‡ªåŠ¨æ›´æ–°è´¢æŠ¥æ•°æ®&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;æˆ‘å°†ä¸ºæ‚¨åˆ›å»ºDockerfileå’Œéƒ¨ç½²è„šæœ¬...&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;jiu-jie-yu&quot;&gt;ä¹ã€ç»“è¯­&lt;&#x2F;h2&gt;
&lt;p&gt;è´¢æŠ¥æ•°æ®çˆ¬å–ä¸åˆ†æå¹³å°çš„å¼€å‘è¿‡ç¨‹å±•ç¤ºäº†å¦‚ä½•å°†å¤æ‚çš„é‡‘èæ•°æ®å¤„ç†æµç¨‹è½¬åŒ–ä¸ºæ˜“ç”¨çš„Webåº”ç”¨ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡ã€å…ˆè¿›çš„æŠ€æœ¯é€‰å‹å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œæˆ‘ä»¬æˆåŠŸæ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„è´¢æŠ¥åˆ†æå·¥å…·ï¼Œä¸ºæŠ•èµ„è€…æä¾›äº†ä¾¿æ·çš„æ•°æ®è·å–å’Œæ™ºèƒ½åˆ†ææœåŠ¡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¸Œæœ›æœ¬æ–‡çš„å¼€å‘ç»éªŒèƒ½ä¸ºç±»ä¼¼é¡¹ç›®æä¾›æœ‰ä»·å€¼çš„å‚è€ƒï¼Œä¹Ÿæ¬¢è¿ç¤¾åŒºè´¡çŒ®ä»£ç ï¼Œå…±åŒå®Œå–„è¿™ä¸€å¹³å°ã€‚&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>OpenHands Starter Telemetry Dashboard å®è·µ</title>
        <published>2025-04-02T00:00:00+00:00</published>
        <updated>2025-04-02T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://polly.wang/openhands-telemetry-dashboard/" type="text/html"/>
        <id>https://polly.wang/openhands-telemetry-dashboard/</id>
        
        <content type="html">&lt;h2 id=&quot;yi-xiang-mu-bei-jing-yu-yi-yi&quot;&gt;ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸æ„ä¹‰&lt;&#x2F;h2&gt;
&lt;p&gt;OpenHands Starteræ˜¯ä¸€ä¸ªå¸®åŠ©ç”¨æˆ·å¿«é€Ÿéƒ¨ç½²AIå¼€å‘å¹³å°çš„å·¥å…·ï¼Œä¸ºäº†æ›´å¥½åœ°äº†è§£ç”¨æˆ·å®‰è£…ä½“éªŒå’Œæ½œåœ¨é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ”¶é›†å…³é”®é¥æµ‹æ•°æ®ã€‚ç„¶è€Œï¼ŒåŸå§‹æ•°æ®éš¾ä»¥ç›´è§‚ç†è§£ï¼Œå›¢é˜Ÿè¿«åˆ‡éœ€è¦ä¸€ä¸ªå¯è§†åŒ–ä»ªè¡¨æ¿ï¼Œå°†è¿™äº›æ•°æ®è½¬åŒ–ä¸ºæœ‰ä»·å€¼çš„è§è§£ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åŸºäºæ­¤éœ€æ±‚ï¼Œæˆ‘ä»¬è®¾è®¡å¹¶å®ç°äº†OpenHands Starteré¥æµ‹ä»ªè¡¨æ¿ï¼Œå®ƒèƒ½å¤Ÿå±•ç¤ºå…³é”®å®‰è£…æŒ‡æ ‡ã€æ“ä½œç³»ç»Ÿåˆ†å¸ƒã€å®‰è£…æ­¥éª¤æˆåŠŸç‡ï¼Œå¹¶æä¾›è¯¦ç»†çš„ä¼šè¯åˆ†æåŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘å›¢é˜Ÿä¸æ–­ä¼˜åŒ–äº§å“ä½“éªŒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;polly.wang&#x2F;openhands-telemetry-dashboard&#x2F;DashBoard_Preview.png&quot; alt=&quot;Dashboard Preview&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;er-ji-zhu-zhan-xuan-ze&quot;&gt;äºŒã€æŠ€æœ¯æ ˆé€‰æ‹©&lt;&#x2F;h2&gt;
&lt;p&gt;åœ¨æŠ€æœ¯é€‰å‹ä¸Šï¼Œæˆ‘ä»¬è€ƒè™‘äº†å¼€å‘æ•ˆç‡ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œæœ€ç»ˆé€‰å®šï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FastAPI&lt;&#x2F;strong&gt; - é«˜æ€§èƒ½Pythonåç«¯æ¡†æ¶ï¼Œç”¨äºæ„å»ºAPIæœåŠ¡&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;MongoDB&lt;&#x2F;strong&gt; - çµæ´»çš„æ–‡æ¡£æ•°æ®åº“ï¼Œé€‚åˆå­˜å‚¨ç»“æ„å¤šå˜çš„é¥æµ‹æ•°æ®&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Streamlit&lt;&#x2F;strong&gt; - è½»é‡çº§æ•°æ®å¯è§†åŒ–æ¡†æ¶ï¼Œå¿«é€Ÿæ„å»ºäº¤äº’å¼ä»ªè¡¨æ¿&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Plotly&lt;&#x2F;strong&gt; - å¼ºå¤§çš„äº¤äº’å¼å›¾è¡¨åº“ï¼Œå¢å¼ºæ•°æ®å¯è§†åŒ–ä½“éªŒ&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Docker&lt;&#x2F;strong&gt; - å®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§å’Œç®€åŒ–éƒ¨ç½²æµç¨‹&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;é€‰æ‹©FastAPIä¸Streamlitè¿™ä¸€ç»„åˆæ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„å†³å®šã€‚FastAPIæä¾›äº†é«˜æ€§èƒ½çš„æ•°æ®å¤„ç†èƒ½åŠ›å’Œç±»å‹æç¤ºä¼˜åŠ¿ï¼ŒStreamlitåˆ™æå¤§ç®€åŒ–äº†æ•°æ®å¯è§†åŒ–å‰ç«¯å¼€å‘ï¼ŒäºŒè€…ç»“åˆå®ç°äº†å¿«é€Ÿå¼€å‘å’Œå“è¶Šæ€§èƒ½çš„å¹³è¡¡ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;san-jia-gou-she-ji&quot;&gt;ä¸‰ã€æ¶æ„è®¾è®¡&lt;&#x2F;h2&gt;
&lt;p&gt;ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼ŒèŒè´£æ¸…æ™°ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;OpenHands Telemetry Dashboard
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ æ•°æ®å±‚ (MongoDB)
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ APIæœåŠ¡å±‚ (FastAPI)
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ æ•°æ®æ¥æ”¶æ¨¡å—
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ æ•°æ®å¤„ç†æ¨¡å—
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ æ•°æ®åˆ†ææ¨¡å—
&lt;&#x2F;span&gt;&lt;span&gt;â””â”€â”€ å¯è§†åŒ–å±‚ (Streamlit)
&lt;&#x2F;span&gt;&lt;span&gt;    â”œâ”€â”€ æ¦‚è§ˆä»ªè¡¨æ¿
&lt;&#x2F;span&gt;&lt;span&gt;    â”œâ”€â”€ è¯¦ç»†ä¼šè¯åˆ†æ
&lt;&#x2F;span&gt;&lt;span&gt;    â””â”€â”€ æ•°æ®å¯¼å‡ºåŠŸèƒ½
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ•´ä½“æ¶æ„å¦‚ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;details&gt;
&lt;summary&gt;OpenHands Telemetryæ¶æ„ (ç‚¹å‡»å±•å¼€)&lt;&#x2F;summary&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;polly.wang&#x2F;openhands-telemetry-dashboard&#x2F;OpenHands_Starter_Telemetry_Architecture.png&quot; alt=&quot;OpenHands_Starter_Telemetry_Architecture&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;details&gt;
&lt;h2 id=&quot;si-xi-tong-shi-xian-xiang-jie&quot;&gt;å››ã€ç³»ç»Ÿå®ç°è¯¦è§£&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;4-1-xiang-mu-jie-gou-she-zhi&quot;&gt;4.1 é¡¹ç›®ç»“æ„è®¾ç½®&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;text&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-text &quot;&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;openhands-telemetry&#x2F;           # é¡¹ç›®æ ¹ç›®å½•
&lt;&#x2F;span&gt;&lt;span&gt;â”‚
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ api&#x2F;                       # API åç«¯
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ venv&#x2F;                  # Python è™šæ‹Ÿç¯å¢ƒ
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ app&#x2F;                   # API æºä»£ç ç›®å½•
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”œâ”€â”€ main.py            # ä¸»å…¥å£æ–‡ä»¶
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”œâ”€â”€ .env               # ç¯å¢ƒå˜é‡é…ç½®
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”œâ”€â”€ routers&#x2F;           # API è·¯ç”±
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”‚   â””â”€â”€ telemetry.py
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”œâ”€â”€ models&#x2F;            # æ•°æ®æ¨¡å‹
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”‚   â””â”€â”€ telemetry.py
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”œâ”€â”€ config&#x2F;            # é…ç½®æ–‡ä»¶
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â”‚   â””â”€â”€ db.py
&lt;&#x2F;span&gt;&lt;span&gt;â”‚       â””â”€â”€ utils&#x2F;             # å·¥å…·å‡½æ•°
&lt;&#x2F;span&gt;&lt;span&gt;â”‚           â””â”€â”€ logger.py
&lt;&#x2F;span&gt;&lt;span&gt;â”‚
&lt;&#x2F;span&gt;&lt;span&gt;â”œâ”€â”€ dashboard&#x2F;                 # Streamlit å‰ç«¯
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ venv&#x2F;                  # Python è™šæ‹Ÿç¯å¢ƒ
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
&lt;&#x2F;span&gt;&lt;span&gt;â”‚   â””â”€â”€ app.py                 # Streamlit åº”ç”¨
&lt;&#x2F;span&gt;&lt;span&gt;â”‚
&lt;&#x2F;span&gt;&lt;span&gt;â””â”€â”€ docker&#x2F;                    # Docker é…ç½®
&lt;&#x2F;span&gt;&lt;span&gt;    â”œâ”€â”€ api.Dockerfile
&lt;&#x2F;span&gt;&lt;span&gt;    â””â”€â”€ dashboard.Dockerfile
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¸…æ™°çš„é¡¹ç›®ç»“æ„ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mkdir -p&lt;&#x2F;span&gt;&lt;span&gt; openhands-telemetry&#x2F;{api,dashboard,docker}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; openhands-telemetry
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;4-2-fastapihou-duan-shi-xian&quot;&gt;4.2 FastAPIåç«¯å®ç°&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;4-2-1-shu-ju-mo-xing-she-ji&quot;&gt;4.2.1 æ•°æ®æ¨¡å‹è®¾è®¡&lt;&#x2F;h4&gt;
&lt;p&gt;å®šä¹‰æ¸…æ™°çš„æ•°æ®æ¨¡å‹æ˜¯ç³»ç»Ÿçš„åŸºç¡€ã€‚æˆ‘ä»¬ä½¿ç”¨Pydanticæ„å»ºå¼ºç±»å‹æ¨¡å‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# api&#x2F;app&#x2F;models&#x2F;telemetry.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;datetime &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;datetime
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;typing &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;Dict, Any, Optional
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;pydantic &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;BaseModel, Field
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;TelemetryEvent&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;BaseModel&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    anonymousId: str
&lt;&#x2F;span&gt;&lt;span&gt;    sessionId: str
&lt;&#x2F;span&gt;&lt;span&gt;    step: str
&lt;&#x2F;span&gt;&lt;span&gt;    status: str
&lt;&#x2F;span&gt;&lt;span&gt;    timestamp: datetime = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;default_factory&lt;&#x2F;span&gt;&lt;span&gt;=datetime.utcnow)
&lt;&#x2F;span&gt;&lt;span&gt;    scriptVersion: Optional[str] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;span&gt;    osVersion: Optional[str] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None 
&lt;&#x2F;span&gt;&lt;span&gt;    osName: Optional[str] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;span&gt;    cpuArchitecture: Optional[str] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;span&gt;    memoryGB: Optional[float] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;span&gt;    metrics: Dict[str, Any] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Field&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;default_factory&lt;&#x2F;span&gt;&lt;span&gt;=dict)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;TelemetryStats&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;BaseModel&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    total_sessions: int
&lt;&#x2F;span&gt;&lt;span&gt;    successful_installs: int
&lt;&#x2F;span&gt;&lt;span&gt;    success_rate: float
&lt;&#x2F;span&gt;&lt;span&gt;    installation_by_os: Dict[str, int]
&lt;&#x2F;span&gt;&lt;span&gt;    steps_status: Dict[str, Dict[str, int]]
&lt;&#x2F;span&gt;&lt;span&gt;    avg_install_time: float
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-2-2-shu-ju-ku-lian-jie-pei-zhi&quot;&gt;4.2.2 æ•°æ®åº“è¿æ¥é…ç½®&lt;&#x2F;h4&gt;
&lt;p&gt;ä½¿ç”¨Motorä½œä¸ºMongoDBçš„å¼‚æ­¥å®¢æˆ·ç«¯ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# api&#x2F;app&#x2F;config&#x2F;db.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;os
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;motor.motor_asyncio &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;AsyncIOMotorClient
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;dotenv &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;load_dotenv
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;load_dotenv&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;mongodb_uri = os.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getenv&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;MONGODB_URI&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mongodb:&#x2F;&#x2F;localhost:27017&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;mongodb_db = os.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getenv&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;MONGODB_DB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;openhands_telemetry&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;client = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;AsyncIOMotorClient&lt;&#x2F;span&gt;&lt;span&gt;(mongodb_uri)
&lt;&#x2F;span&gt;&lt;span&gt;db = client[mongodb_db]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection = db.telemetry_events
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-2-3-he-xin-apilu-you-shi-xian&quot;&gt;4.2.3 æ ¸å¿ƒAPIè·¯ç”±å®ç°&lt;&#x2F;h4&gt;
&lt;p&gt;å®ç°æ•°æ®æ¥æ”¶ä¸åˆ†æAPIï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# api&#x2F;app&#x2F;routers&#x2F;telemetry.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;fastapi &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;APIRouter, HTTPException, status
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;datetime &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;datetime, timedelta
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;typing &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;Dict, Any, List
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from ..&lt;&#x2F;span&gt;&lt;span&gt;models.telemetry &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;TelemetryEvent, TelemetryStats
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from ..&lt;&#x2F;span&gt;&lt;span&gt;config.db &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from ..&lt;&#x2F;span&gt;&lt;span&gt;utils.logger &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;get_logger
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;router = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;APIRouter&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;prefix&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;api&#x2F;telemetry&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tags&lt;&#x2F;span&gt;&lt;span&gt;=[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;telemetry&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;])
&lt;&#x2F;span&gt;&lt;span&gt;logger = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_logger&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;telemetry_router&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;@router.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;post&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status_code&lt;&#x2F;span&gt;&lt;span&gt;=status.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTP_201_CREATED&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;receive_telemetry&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;event&lt;&#x2F;span&gt;&lt;span&gt;: Dict[str, Any]):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;æ¥æ”¶é¥æµ‹æ•°æ®&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æå–åŸºç¡€å­—æ®µ
&lt;&#x2F;span&gt;&lt;span&gt;        telemetry_data = {
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;anonymousId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;anonymousId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sessionId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sessionId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;scriptVersion&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;scriptVersion&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;osVersion&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;osVersion&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;osName&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;osName&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cpuArchitecture&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cpuArchitecture&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;memoryGB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;memoryGB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¤„ç†æ—¶é—´æˆ³
&lt;&#x2F;span&gt;&lt;span&gt;        timestamp = event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;timestamp:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;                telemetry_data[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = datetime.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;fromisoformat&lt;&#x2F;span&gt;&lt;span&gt;(timestamp.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;replace&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Z&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;+00:00&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;))
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;(ValueError, TypeError):
&lt;&#x2F;span&gt;&lt;span&gt;                telemetry_data[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = datetime.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;utcnow&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            telemetry_data[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = datetime.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;utcnow&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é¢å¤–çš„æŒ‡æ ‡æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;        metrics = {}
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;key, value &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;event.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;items&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;key not in telemetry_data:
&lt;&#x2F;span&gt;&lt;span&gt;                metrics[key] = value
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        telemetry_data[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = metrics
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å­˜å‚¨åˆ°æ•°æ®åº“
&lt;&#x2F;span&gt;&lt;span&gt;        result = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;insert_one&lt;&#x2F;span&gt;&lt;span&gt;(telemetry_data)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(result.inserted_id)}
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error processing telemetry: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTPException&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status_code&lt;&#x2F;span&gt;&lt;span&gt;=status.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTP_500_INTERNAL_SERVER_ERROR&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;detail&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to process telemetry data: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-2-4-tong-ji-shu-ju-api&quot;&gt;4.2.4 ç»Ÿè®¡æ•°æ®API&lt;&#x2F;h4&gt;
&lt;p&gt;å®ç°ç”¨äºä»ªè¡¨æ¿çš„æ•°æ®ç»Ÿè®¡APIï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;@router.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;stats&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response_model&lt;&#x2F;span&gt;&lt;span&gt;=TelemetryStats)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;get_telemetry_stats&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;è·å–é¥æµ‹æ•°æ®ç»Ÿè®¡æ‘˜è¦&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–ä¼šè¯æ€»æ•°
&lt;&#x2F;span&gt;&lt;span&gt;        total_sessions = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;len&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;distinct&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sessionId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;))
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–æˆåŠŸå®‰è£…æ•°
&lt;&#x2F;span&gt;&lt;span&gt;        completed_installs = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;count_documents&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;install&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;completed&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics.success&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True
&lt;&#x2F;span&gt;&lt;span&gt;        })
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¡ç®—æˆåŠŸç‡
&lt;&#x2F;span&gt;&lt;span&gt;        success_rate = (completed_installs &#x2F; total_sessions * &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;100&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;total_sessions &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–æŒ‰æ“ä½œç³»ç»Ÿåˆ’åˆ†çš„å®‰è£…æ•°
&lt;&#x2F;span&gt;&lt;span&gt;        os_pipeline = [
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$group&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$osName&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$sum&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;            }},
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$match&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$ne&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;}}}
&lt;&#x2F;span&gt;&lt;span&gt;        ]
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        os_result = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;aggregate&lt;&#x2F;span&gt;&lt;span&gt;(os_pipeline).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_list&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        installation_by_os = {item[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]: item[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;item &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;os_result}
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–æŒ‰æ­¥éª¤åˆ’åˆ†çš„çŠ¶æ€ç»Ÿè®¡
&lt;&#x2F;span&gt;&lt;span&gt;        steps_pipeline = [
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$group&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;},
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$sum&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;            }}
&lt;&#x2F;span&gt;&lt;span&gt;        ]
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        steps_result = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;aggregate&lt;&#x2F;span&gt;&lt;span&gt;(steps_pipeline).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_list&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        steps_status = {}
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;item &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;steps_result:
&lt;&#x2F;span&gt;&lt;span&gt;            step = item[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;][&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;            status = item[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;][&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;            count = item[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;count&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;step not in steps_status:
&lt;&#x2F;span&gt;&lt;span&gt;                steps_status[step] = {}
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            steps_status[step][status] = count
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¡ç®—å¹³å‡å®‰è£…æ—¶é—´
&lt;&#x2F;span&gt;&lt;span&gt;        time_pipeline = [
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$match&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;install&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;            }},
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$group&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$sessionId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;minTime&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$min&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;},
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;maxTime&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$max&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;}
&lt;&#x2F;span&gt;&lt;span&gt;            }},
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$project&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$subtract&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$maxTime&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$minTime&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]}
&lt;&#x2F;span&gt;&lt;span&gt;            }},
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$group&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;avgDuration&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$avg&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$duration&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;}
&lt;&#x2F;span&gt;&lt;span&gt;            }}
&lt;&#x2F;span&gt;&lt;span&gt;        ]
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        time_result = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;aggregate&lt;&#x2F;span&gt;&lt;span&gt;(time_pipeline).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_list&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        avg_install_time = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;time_result:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è½¬æ¢ä¸ºç§’
&lt;&#x2F;span&gt;&lt;span&gt;            avg_install_time = time_result[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;][&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;avgDuration&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] &#x2F; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1000 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;time_result &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;TelemetryStats&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;total_sessions&lt;&#x2F;span&gt;&lt;span&gt;=total_sessions,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;successful_installs&lt;&#x2F;span&gt;&lt;span&gt;=completed_installs,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;success_rate&lt;&#x2F;span&gt;&lt;span&gt;=success_rate,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;installation_by_os&lt;&#x2F;span&gt;&lt;span&gt;=installation_by_os,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;steps_status&lt;&#x2F;span&gt;&lt;span&gt;=steps_status,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;avg_install_time&lt;&#x2F;span&gt;&lt;span&gt;=avg_install_time
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error generating telemetry stats: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTPException&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status_code&lt;&#x2F;span&gt;&lt;span&gt;=status.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTP_500_INTERNAL_SERVER_ERROR&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;detail&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to generate telemetry statistics: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-2-5-hui-hua-xiang-qing-api&quot;&gt;4.2.5 ä¼šè¯è¯¦æƒ…API&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span&gt;@router.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;sessions&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;{session_id}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;events&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;get_session_events&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;session_id&lt;&#x2F;span&gt;&lt;span&gt;: str):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;è·å–æŒ‡å®šä¼šè¯çš„äº‹ä»¶åºåˆ—&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        events = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;find&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sessionId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: session_id}
&lt;&#x2F;span&gt;&lt;span&gt;        ).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sort&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_list&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è½¬æ¢ ObjectId ä¸ºå­—ç¬¦ä¸²
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;event &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;events:
&lt;&#x2F;span&gt;&lt;span&gt;            event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;])
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;not events:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTPException&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status_code&lt;&#x2F;span&gt;&lt;span&gt;=status.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTP_404_NOT_FOUND&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;detail&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Session with ID &lt;&#x2F;span&gt;&lt;span&gt;{session_id}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; not found&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;            )
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;session_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: session_id, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;events&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: events}
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;HTTPException:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        logger.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error retrieving session events: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;raise &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTPException&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status_code&lt;&#x2F;span&gt;&lt;span&gt;=status.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;HTTP_500_INTERNAL_SERVER_ERROR&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;detail&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Failed to retrieve session events: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-2-6-ying-yong-ru-kou-dian&quot;&gt;4.2.6 åº”ç”¨å…¥å£ç‚¹&lt;&#x2F;h4&gt;
&lt;p&gt;å°†æ‰€æœ‰ç»„ä»¶è¿æ¥åˆ°FastAPIåº”ç”¨ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# api&#x2F;app&#x2F;main.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;fastapi &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;FastAPI
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;fastapi.middleware.cors &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;CORSMiddleware
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;uvicorn
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;os
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;dotenv &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;load_dotenv
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from .&lt;&#x2F;span&gt;&lt;span&gt;routers &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;telemetry
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from .&lt;&#x2F;span&gt;&lt;span&gt;utils.logger &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;get_logger
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åŠ è½½ç¯å¢ƒå˜é‡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;load_dotenv&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆå§‹åŒ– FastAPI åº”ç”¨
&lt;&#x2F;span&gt;&lt;span&gt;app = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;FastAPI&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;OpenHands Telemetry API&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;description&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;API for receiving and analyzing OpenHands installation telemetry&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;version&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;1.0.0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ·»åŠ CORSä¸­é—´ä»¶
&lt;&#x2F;span&gt;&lt;span&gt;app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_middleware&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    CORSMiddleware,
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;allow_origins&lt;&#x2F;span&gt;&lt;span&gt;=[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;],  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”é™åˆ¶ä¸ºç‰¹å®šåŸŸå
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;allow_credentials&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;allow_methods&lt;&#x2F;span&gt;&lt;span&gt;=[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;],
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;allow_headers&lt;&#x2F;span&gt;&lt;span&gt;=[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;],
&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åŒ…å«è·¯ç”±
&lt;&#x2F;span&gt;&lt;span&gt;app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;include_router&lt;&#x2F;span&gt;&lt;span&gt;(telemetry.router)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ ¹è·¯ç”±
&lt;&#x2F;span&gt;&lt;span&gt;@app.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;root&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;message&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Welcome to OpenHands Telemetry API&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;documentation&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;docs&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;__name__ == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;__main__&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;    port = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;int&lt;&#x2F;span&gt;&lt;span&gt;(os.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getenv&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;API_PORT&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;9999&lt;&#x2F;span&gt;&lt;span&gt;))
&lt;&#x2F;span&gt;&lt;span&gt;    uvicorn.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;app.main:app&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;host&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;port&lt;&#x2F;span&gt;&lt;span&gt;=port, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;reload&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;4-3-streamlityi-biao-ban-shi-xian&quot;&gt;4.3 Streamlitä»ªè¡¨æ¿å®ç°&lt;&#x2F;h3&gt;
&lt;p&gt;Streamlitè®©æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºäº¤äº’å¼æ•°æ®å¯è§†åŒ–ç•Œé¢ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# dashboard&#x2F;app.py
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;streamlit &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;st
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;pandas &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;pd
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;plotly.express &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;px
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;plotly.graph_objects &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;go
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;requests
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;datetime &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;datetime, timedelta
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;os
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;dotenv &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;load_dotenv
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åŠ è½½ç¯å¢ƒå˜é‡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;load_dotenv&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¾ç½®é¡µé¢é…ç½®
&lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;set_page_config&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;page_title&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;OpenHands Telemetry Dashboard&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;page_icon&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ğŸ“Š&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;layout&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;wide&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é…ç½®
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;API_URL &lt;&#x2F;span&gt;&lt;span&gt;= os.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;getenv&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;API_URL&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;http:&#x2F;&#x2F;localhost:9999&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é¡µé¢æ ‡é¢˜
&lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;OpenHands Telemetry Dashboard&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;markdown&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;### Installation Telemetry Analytics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åœ¨ä»ªè¡¨æ¿ä¸­æ·»åŠ æ—¥æœŸé€‰æ‹©å™¨
&lt;&#x2F;span&gt;&lt;span&gt;st.sidebar.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;header&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ç­›é€‰å™¨&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;date_options = [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘7å¤©&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘30å¤©&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘90å¤©&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å…¨éƒ¨&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;date_filter = st.sidebar.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;selectbox&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ—¶é—´èŒƒå›´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, date_options)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ ¹æ®æ—¥æœŸç­›é€‰ä¿®æ”¹ API è¯·æ±‚
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;filter_by_date&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;date_filter&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    today = datetime.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;utcnow&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;date_filter == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘7å¤©&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;        start_date = today - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timedelta&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;days&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;7&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;elif &lt;&#x2F;span&gt;&lt;span&gt;date_filter == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘30å¤©&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;        start_date = today - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timedelta&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;days&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;30&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;elif &lt;&#x2F;span&gt;&lt;span&gt;date_filter == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘90å¤©&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;        start_date = today - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timedelta&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;days&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;90&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å…¨éƒ¨æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;start_date.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;isoformat&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–ç»Ÿè®¡æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;@st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cache_data&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ttl&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;300&lt;&#x2F;span&gt;&lt;span&gt;)  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç¼“å­˜5åˆ†é’Ÿ
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;get_telemetry_stats&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        response = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;API_URL&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;api&#x2F;telemetry&#x2F;stats&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;raise_for_status&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error fetching telemetry stats: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–æœ€è¿‘ä¼šè¯
&lt;&#x2F;span&gt;&lt;span&gt;@st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;cache_data&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ttl&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;300&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;get_recent_sessions&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;limit&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        response = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;API_URL&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;api&#x2F;telemetry&#x2F;recent?limit=&lt;&#x2F;span&gt;&lt;span&gt;{limit}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;raise_for_status&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error fetching recent sessions: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;[]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–ä¼šè¯è¯¦æƒ…
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;get_session_events&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;session_id&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        response = requests.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;API_URL&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;api&#x2F;telemetry&#x2F;sessions&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;{session_id}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;events&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;raise_for_status&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;response.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;json&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;Exception &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;as &lt;&#x2F;span&gt;&lt;span&gt;e:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;error&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Error fetching session events: &lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;str&lt;&#x2F;span&gt;&lt;span&gt;(e)}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;None
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¯¼å‡ºåŠŸèƒ½
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;export_to_csv&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;df&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;filename&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;df.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_csv&lt;&#x2F;span&gt;&lt;span&gt;().&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;encode&lt;&#x2F;span&gt;&lt;span&gt;(&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;utf-8&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ·æ–°æŒ‰é’®
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;åˆ·æ–°æ•°æ®&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;):
&lt;&#x2F;span&gt;&lt;span&gt;    st.cache_data.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;clear&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ•°æ®å·²åˆ·æ–°!&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;stats = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_telemetry_stats&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;recent_sessions = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_recent_sessions&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;20&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ˜¾ç¤ºKPIå¡ç‰‡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;stats:
&lt;&#x2F;span&gt;&lt;span&gt;    col1, col2, col3, col4 = st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;columns&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span&gt;col1:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metric&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ€»å®‰è£…æ¬¡æ•°&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, stats[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;total_sessions&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;])
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span&gt;col2:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metric&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æˆåŠŸå®‰è£…&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, stats[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;successful_installs&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;])
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span&gt;col3:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metric&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æˆåŠŸç‡&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{stats[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;success_rate&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;:.1f&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;%&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span&gt;col4:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metric&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¹³å‡å®‰è£…æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{stats[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;avg_install_time&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;:.1f&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; ç§’&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºæ“ä½œç³»ç»Ÿåˆ†å¸ƒå›¾è¡¨
&lt;&#x2F;span&gt;&lt;span&gt;    st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subheader&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æŒ‰æ“ä½œç³»ç»Ÿåˆ†ç±»çš„å®‰è£…æ•°&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    os_data = pd.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DataFrame&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ“ä½œç³»ç»Ÿ&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: stats[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;installation_by_os&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;keys&lt;&#x2F;span&gt;&lt;span&gt;(),
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å®‰è£…æ•°&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: stats[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;installation_by_os&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;not os_data.empty:
&lt;&#x2F;span&gt;&lt;span&gt;        fig = px.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pie&lt;&#x2F;span&gt;&lt;span&gt;(os_data, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;names&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ“ä½œç³»ç»Ÿ&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å®‰è£…æ•°&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hole&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0.4&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        fig.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;update_layout&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;height&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;400&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plotly_chart&lt;&#x2F;span&gt;&lt;span&gt;(fig, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;use_container_width&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æš‚æ— æ“ä½œç³»ç»Ÿæ•°æ®&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºæ­¥éª¤æˆåŠŸç‡å›¾è¡¨
&lt;&#x2F;span&gt;&lt;span&gt;    st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subheader&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å®‰è£…æ­¥éª¤çŠ¶æ€åˆ†å¸ƒ&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    steps_data = []
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;step, statuses &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;stats[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;steps_status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;items&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;        total = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;sum&lt;&#x2F;span&gt;&lt;span&gt;(statuses.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;values&lt;&#x2F;span&gt;&lt;span&gt;())
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;status, count &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;statuses.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;items&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;            steps_data.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ­¥éª¤&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: step,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;çŠ¶æ€&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: status,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ•°é‡&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: count,
&lt;&#x2F;span&gt;&lt;span&gt;                &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ç™¾åˆ†æ¯”&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: (count &#x2F; total * &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;100&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;total &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;            })
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    steps_df = pd.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DataFrame&lt;&#x2F;span&gt;&lt;span&gt;(steps_data)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;not steps_df.empty:
&lt;&#x2F;span&gt;&lt;span&gt;        fig = px.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;            steps_df,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ­¥éª¤&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;y&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ•°é‡&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;color&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;çŠ¶æ€&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;barmode&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;stack&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ç™¾åˆ†æ¯”&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;labels&lt;&#x2F;span&gt;&lt;span&gt;={&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ç™¾åˆ†æ¯”&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;%&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;}
&lt;&#x2F;span&gt;&lt;span&gt;        )
&lt;&#x2F;span&gt;&lt;span&gt;        fig.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;update_layout&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;height&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;500&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plotly_chart&lt;&#x2F;span&gt;&lt;span&gt;(fig, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;use_container_width&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æš‚æ— æ­¥éª¤æ•°æ®&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;warning&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ— æ³•è·å–ç»Ÿè®¡æ•°æ®ã€‚è¯·ç¡®ä¿åç«¯APIæ­£åœ¨è¿è¡Œã€‚&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ˜¾ç¤ºæœ€è¿‘ä¼šè¯
&lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subheader&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€è¿‘å®‰è£…ä¼šè¯&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;recent_sessions:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºä¼šè¯è¡¨æ ¼
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_df = pd.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DataFrame&lt;&#x2F;span&gt;&lt;span&gt;(recent_sessions)
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = pd.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_datetime&lt;&#x2F;span&gt;&lt;span&gt;(sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;])
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].dt.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;strftime&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%Y&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%m&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%d %H&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%M&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%S&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;çŠ¶æ€&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;apply&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;lambda &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æˆåŠŸ&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;x &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¤±è´¥&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æŒç»­æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;duration_seconds&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;apply&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;lambda &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{x&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;:.1f&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; ç§’&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä½¿ç”¨Streamlitçš„åˆ—æ ¼å¼åŒ–
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_display = sessions_df[[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;session_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;çŠ¶æ€&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æŒç»­æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;os&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]]
&lt;&#x2F;span&gt;&lt;span&gt;    sessions_display.columns = [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ä¼šè¯ID&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;çŠ¶æ€&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æŒç»­æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ“ä½œç³»ç»Ÿ&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ·»åŠ å¯¼å‡ºåŠŸèƒ½
&lt;&#x2F;span&gt;&lt;span&gt;    csv = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;export_to_csv&lt;&#x2F;span&gt;&lt;span&gt;(sessions_df, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sessions.csv&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;    st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;download_button&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;label&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å¯¼å‡ºä¼šè¯æ•°æ®ä¸ºCSV&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;data&lt;&#x2F;span&gt;&lt;span&gt;=csv,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;file_name&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;openhands_sessions.csv&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mime&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;text&#x2F;csv&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;    )
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¢åŠ ä¼šè¯è¯¦æƒ…å±•å¼€åŠŸèƒ½
&lt;&#x2F;span&gt;&lt;span&gt;    selected_session = st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;selectbox&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;é€‰æ‹©ä¼šè¯æŸ¥çœ‹è¯¦æƒ…:&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, sessions_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;session_id&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;tolist&lt;&#x2F;span&gt;&lt;span&gt;())
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;selected_session:
&lt;&#x2F;span&gt;&lt;span&gt;        session_data = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;get_session_events&lt;&#x2F;span&gt;&lt;span&gt;(selected_session)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;session_data and session_data[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;events&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]:
&lt;&#x2F;span&gt;&lt;span&gt;            st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subheader&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ä¼šè¯ &lt;&#x2F;span&gt;&lt;span&gt;{selected_session}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; è¯¦æƒ…&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            events = session_data[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;events&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;            events_df = pd.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DataFrame&lt;&#x2F;span&gt;&lt;span&gt;(events)
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä¸ºæ—¶é—´è½´åˆ›å»ºæ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;            events_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] = pd.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;to_datetime&lt;&#x2F;span&gt;&lt;span&gt;(events_df[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;])
&lt;&#x2F;span&gt;&lt;span&gt;            events_df = events_df.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sort_values&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºæ—¶é—´è½´å¯è§†åŒ–
&lt;&#x2F;span&gt;&lt;span&gt;            fig = go.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Figure&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;i, event &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;events_df.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;iterrows&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ ¹æ®äº‹ä»¶çŠ¶æ€è®¾ç½®é¢œè‰²
&lt;&#x2F;span&gt;&lt;span&gt;                color = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;green&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;failure&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;                    color = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;red&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;elif &lt;&#x2F;span&gt;&lt;span&gt;event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;warning&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; or event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;] == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;partial&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;:
&lt;&#x2F;span&gt;&lt;span&gt;                    color = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;orange&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ·»åŠ äº‹ä»¶ç‚¹
&lt;&#x2F;span&gt;&lt;span&gt;                fig.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_trace&lt;&#x2F;span&gt;&lt;span&gt;(go.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Scatter&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;=[event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]],
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;y&lt;&#x2F;span&gt;&lt;span&gt;=[event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]],
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mode&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;markers+text&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;marker&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;color&lt;&#x2F;span&gt;&lt;span&gt;=color, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;size&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;15&lt;&#x2F;span&gt;&lt;span&gt;),
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;=[event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]],
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;textposition&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;top center&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{event[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; - &lt;&#x2F;span&gt;&lt;span&gt;{event[&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;]}&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;                ))
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            fig.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;update_layout&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å®‰è£…æ­¥éª¤æ—¶é—´è½´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;xaxis_title&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æ—¶é—´&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;yaxis_title&lt;&#x2F;span&gt;&lt;span&gt;=&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å®‰è£…æ­¥éª¤&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;height&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;500
&lt;&#x2F;span&gt;&lt;span&gt;            )
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;plotly_chart&lt;&#x2F;span&gt;&lt;span&gt;(fig, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;use_container_width&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ˜¾ç¤ºäº‹ä»¶è¯¦æƒ…
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;with &lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;expander&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æŸ¥çœ‹ä¼šè¯äº‹ä»¶è¯¦æƒ…&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;):
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é€‰æ‹©è¦å±•ç¤ºçš„åˆ—
&lt;&#x2F;span&gt;&lt;span&gt;                display_cols = [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;span&gt;                st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dataframe&lt;&#x2F;span&gt;&lt;span&gt;(events_df[display_cols])
&lt;&#x2F;span&gt;&lt;span&gt;                
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ˜¾ç¤ºæœ€åä¸€ä¸ªäº‹ä»¶çš„è¯¦ç»†æŒ‡æ ‡
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; in events_df.columns:
&lt;&#x2F;span&gt;&lt;span&gt;                    last_event = events_df.iloc[-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;                    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;isinstance&lt;&#x2F;span&gt;&lt;span&gt;(last_event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;], dict) and last_event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]:
&lt;&#x2F;span&gt;&lt;span&gt;                        st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;subheader&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æœ€ç»ˆæŒ‡æ ‡&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;                        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;key, value &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in &lt;&#x2F;span&gt;&lt;span&gt;last_event[&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;items&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;                            st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;text&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;{key}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;: &lt;&#x2F;span&gt;&lt;span&gt;{value}&amp;quot;)
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;info&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;æš‚æ— æœ€è¿‘ä¼šè¯æ•°æ®&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# é¡µè„š
&lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;markdown&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;---&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;span&gt;st.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;markdown&lt;&#x2F;span&gt;&lt;span&gt;(&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;OpenHands Telemetry Dashboard | Â© 2025&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;4-4-rong-qi-hua-pei-zhi&quot;&gt;4.4 å®¹å™¨åŒ–é…ç½®&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;4-4-1-apifu-wu-rong-qi&quot;&gt;4.4.1 APIæœåŠ¡å®¹å™¨&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;dockerfile&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-dockerfile &quot;&gt;&lt;code class=&quot;language-dockerfile&quot; data-lang=&quot;dockerfile&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# docker&#x2F;api.Dockerfile
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM&lt;&#x2F;span&gt;&lt;span&gt; python:3.11-slim
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;WORKDIR &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;app
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;COPY&lt;&#x2F;span&gt;&lt;span&gt; api&#x2F;requirements.txt .
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;RUN &lt;&#x2F;span&gt;&lt;span&gt;pip install --no-cache-dir -r requirements.txt
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;COPY&lt;&#x2F;span&gt;&lt;span&gt; api&#x2F;app .&#x2F;app
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;CMD [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;uvicorn&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;app.main:app&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;--host&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;0.0.0.0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;--port&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;9999&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-4-2-streamlityi-biao-ban-rong-qi&quot;&gt;4.4.2 Streamlitä»ªè¡¨æ¿å®¹å™¨&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;dockerfile&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-dockerfile &quot;&gt;&lt;code class=&quot;language-dockerfile&quot; data-lang=&quot;dockerfile&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# docker&#x2F;dashboard.Dockerfile
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;FROM&lt;&#x2F;span&gt;&lt;span&gt; python:3.11-slim
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;WORKDIR &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;app
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;COPY&lt;&#x2F;span&gt;&lt;span&gt; dashboard&#x2F;requirements.txt .
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;RUN &lt;&#x2F;span&gt;&lt;span&gt;pip install --no-cache-dir -r requirements.txt
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;COPY&lt;&#x2F;span&gt;&lt;span&gt; dashboard&#x2F;app.py .
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;EXPOSE &lt;&#x2F;span&gt;&lt;span&gt;8501
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;CMD [&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;streamlit&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;app.py&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;4-4-3-docker-composepei-zhi&quot;&gt;4.4.3 Docker Composeé…ç½®&lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;yaml&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-yaml &quot;&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# docker-compose.yml
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;services&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mongodb&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;image&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mongo:6.0.5
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ports&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;27017:27017&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volumes&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mongo_data:&#x2F;data&#x2F;db
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;restart&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;always
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;api&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;build&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;context&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;.
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dockerfile&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;docker&#x2F;api.Dockerfile
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ports&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;9999:9999&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;mongodb
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;environment&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;MONGODB_URI=mongodb:&#x2F;&#x2F;mongodb:27017
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;MONGODB_DB=openhands_telemetry
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ENVIRONMENT=production
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;restart&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;always
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dashboard&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;build&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;context&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;.
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;dockerfile&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;docker&#x2F;dashboard.Dockerfile
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ports&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;8501:8501&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;depends_on&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;api
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;environment&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;      - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;API_URL=http:&#x2F;&#x2F;api:9999
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;restart&lt;&#x2F;span&gt;&lt;span&gt;: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;always
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;volumes&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mongo_data&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;wu-bu-shu-yu-pei-zhi&quot;&gt;äº”ã€éƒ¨ç½²ä¸é…ç½®&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;5-1-chuang-jian-yi-lai-wen-jian&quot;&gt;5.1 åˆ›å»ºä¾èµ–æ–‡ä»¶&lt;&#x2F;h3&gt;
&lt;p&gt;é¡¹ç›®ä¾èµ–ç®¡ç†æ˜¯ç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§çš„å…³é”®ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# APIä¾èµ–
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; api
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python -m&lt;&#x2F;span&gt;&lt;span&gt; venv venv
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;source&lt;&#x2F;span&gt;&lt;span&gt; venv&#x2F;bin&#x2F;activate  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Windows: venv\Scripts\activate
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install fastapi uvicorn motor pymongo pandas python-dotenv
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; freeze &amp;gt; requirements.txt
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Dashboardä¾èµ–
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; ..&#x2F;dashboard
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;python -m&lt;&#x2F;span&gt;&lt;span&gt; venv venv
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;source&lt;&#x2F;span&gt;&lt;span&gt; venv&#x2F;bin&#x2F;activate  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Windows: venv\Scripts\activate
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; install streamlit pandas matplotlib plotly requests python-dotenv
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pip&lt;&#x2F;span&gt;&lt;span&gt; freeze &amp;gt; requirements.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;5-2-gou-jian-yu-qi-dong-fu-wu&quot;&gt;5.2 æ„å»ºä¸å¯åŠ¨æœåŠ¡&lt;&#x2F;h3&gt;
&lt;p&gt;ä½¿ç”¨Docker Composeç®€åŒ–éƒ¨ç½²æµç¨‹ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ„å»ºé•œåƒ
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker-compose&lt;&#x2F;span&gt;&lt;span&gt; build
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¯åŠ¨æœåŠ¡
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;docker-compose&lt;&#x2F;span&gt;&lt;span&gt; up&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -d
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;5-3-chu-shi-hua-ce-shi-shu-ju&quot;&gt;5.3 åˆå§‹åŒ–æµ‹è¯•æ•°æ®&lt;&#x2F;h3&gt;
&lt;p&gt;ä¸ºéªŒè¯ä»ªè¡¨æ¿åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å‘é€ä¸€äº›æµ‹è¯•æ•°æ®ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æµ‹è¯•æ•°æ®å‘é€è„šæœ¬
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;import&lt;&#x2F;span&gt;&lt;span&gt; requests
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;import&lt;&#x2F;span&gt;&lt;span&gt; json
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;from&lt;&#x2F;span&gt;&lt;span&gt; datetime import datetime, timedelta
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;import&lt;&#x2F;span&gt;&lt;span&gt; random
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;import&lt;&#x2F;span&gt;&lt;span&gt; uuid
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;API_URL&lt;&#x2F;span&gt;&lt;span&gt; = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;http:&#x2F;&#x2F;localhost:9999&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç”Ÿæˆä¸€äº›ä¼šè¯ID
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;session_ids&lt;&#x2F;span&gt;&lt;span&gt; = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;str(uuid.uuid4()) for _ in range(5)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os_names&lt;&#x2F;span&gt;&lt;span&gt; = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Windows&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;MacOS&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Linux&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os_versions&lt;&#x2F;span&gt;&lt;span&gt; = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Windows 10&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Windows 11&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;MacOS 12.5&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Ubuntu 22.04&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;steps&lt;&#x2F;span&gt;&lt;span&gt; = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;check_prerequisites&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;download_docker&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;install_docker&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;configure_docker&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;install&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;statuses&lt;&#x2F;span&gt;&lt;span&gt; = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;started&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;in_progress&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;completed&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;warning&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;failure&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ç”Ÿæˆéšæœºäº‹ä»¶
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span&gt; session_id &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in&lt;&#x2F;span&gt;&lt;span&gt; session_ids:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;anonymous_id&lt;&#x2F;span&gt;&lt;span&gt; = str(uuid.uuid4())&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;[:16]
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os_name&lt;&#x2F;span&gt;&lt;span&gt; = random.choice(os_names)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;os_version&lt;&#x2F;span&gt;&lt;span&gt; = random.choice(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;v for v in os_versions if os_name in v&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸€ç³»åˆ—äº‹ä»¶
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;base_time&lt;&#x2F;span&gt;&lt;span&gt; = datetime.utcnow() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; timedelta(days=random.randint(0, 6))
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# éšæœºå†³å®šè¿™ä¸ªä¼šè¯æ˜¯å¦æˆåŠŸ
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt; = random.random() &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.3
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span&gt; i, step &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;in&lt;&#x2F;span&gt;&lt;span&gt; enumerate(steps)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# æ¯ä¸ªæ­¥éª¤çš„æ—¶é—´å¢åŠ ä¸€äº›éšæœºå€¼
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;event_time&lt;&#x2F;span&gt;&lt;span&gt; = base_time + timedelta(minutes=i*5 + random.randint(1, 3))
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¯¹äºå¤±è´¥çš„ä¼šè¯ï¼Œå¯èƒ½åœ¨æŸä¸ªæ­¥éª¤å¤±è´¥
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;not&lt;&#x2F;span&gt;&lt;span&gt; success and i &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt; and random.random() &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;.7:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt; = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;failure&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt; = {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;error_code&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: random.randint(100, 500), &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: False}
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt; = &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;completed&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot; if i &amp;lt; len(steps) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt; 1 or success else &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;failure&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt; = {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;success&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: status == &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;completed&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;}
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# åˆ›å»ºäº‹ä»¶æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;event&lt;&#x2F;span&gt;&lt;span&gt; = {
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;anonymousId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: anonymous_id,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;sessionId&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: session_id,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: step,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: status,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: event_time.isoformat(),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;scriptVersion&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;1.0.0&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;osName&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: os_name,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;osVersion&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: os_version,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;cpuArchitecture&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;x64&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;memoryGB&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: random.randint(8, 64),
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;metrics&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: metrics
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å‘é€äº‹ä»¶
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;response&lt;&#x2F;span&gt;&lt;span&gt; = requests.post(f&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;{API_URL}&#x2F;api&#x2F;telemetry&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;, json=event)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;print&lt;&#x2F;span&gt;&lt;span&gt;(f&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Session {session_id}, Step {step}: {response.status_code}&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;liu-xi-tong-gong-neng-zhan-shi&quot;&gt;å…­ã€ç³»ç»ŸåŠŸèƒ½å±•ç¤º&lt;&#x2F;h2&gt;
&lt;p&gt;OpenHands Telemetry Dashboardæä¾›å¤šä¸ªå…³é”®åŠŸèƒ½ï¼ŒåŠ©åŠ›å›¢é˜ŸæŒç»­ä¼˜åŒ–äº§å“ä½“éªŒï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;6-1-zong-lan-zhi-biao&quot;&gt;6.1 æ€»è§ˆæŒ‡æ ‡&lt;&#x2F;h3&gt;
&lt;p&gt;ä»ªè¡¨æ¿é¡¶éƒ¨æ˜¾ç¤ºå››ä¸ªæ ¸å¿ƒKPIï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;æ€»å®‰è£…æ¬¡æ•°&lt;&#x2F;li&gt;
&lt;li&gt;æˆåŠŸå®‰è£…æ•°&lt;&#x2F;li&gt;
&lt;li&gt;å®‰è£…æˆåŠŸç‡&lt;&#x2F;li&gt;
&lt;li&gt;å¹³å‡å®‰è£…æ—¶é—´&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;è¿™äº›æŒ‡æ ‡æä¾›äº†å®‰è£…è„šæœ¬æ•ˆæœçš„ç›´è§‚åé¦ˆï¼Œå¸®åŠ©å›¢é˜Ÿå¿«é€Ÿè¯„ä¼°æ•´ä½“è¡¨ç°ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;6-2-cao-zuo-xi-tong-fen-bu&quot;&gt;6.2 æ“ä½œç³»ç»Ÿåˆ†å¸ƒ&lt;&#x2F;h3&gt;
&lt;p&gt;é€šè¿‡ç¯å½¢é¥¼å›¾å±•ç¤ºä¸åŒæ“ä½œç³»ç»Ÿä¸Šçš„å®‰è£…åˆ†å¸ƒï¼Œå¸®åŠ©å›¢é˜Ÿäº†è§£ç”¨æˆ·ç¯å¢ƒæ„æˆã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;6-3-an-zhuang-bu-zou-fen-xi&quot;&gt;6.3 å®‰è£…æ­¥éª¤åˆ†æ&lt;&#x2F;h3&gt;
&lt;p&gt;å †å æŸ±çŠ¶å›¾æ¸…æ™°å±•ç¤ºäº†æ¯ä¸ªå®‰è£…æ­¥éª¤çš„æˆåŠŸ&#x2F;å¤±è´¥æƒ…å†µï¼Œå¸®åŠ©å¿«é€Ÿè¯†åˆ«é—®é¢˜ç¯èŠ‚ã€‚å›¾è¡¨æŒ‰æ­¥éª¤åˆ†ç»„ï¼Œé€šè¿‡é¢œè‰²åŒºåˆ†ä¸åŒçŠ¶æ€ï¼Œæ•´åˆäº†ç™¾åˆ†æ¯”æ ‡ç­¾ï¼Œæ•°æ®ç›´è§‚æ˜“è¯»ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;6-4-hui-hua-xiang-qing-yu-shi-jian-zhou&quot;&gt;6.4 ä¼šè¯è¯¦æƒ…ä¸æ—¶é—´è½´&lt;&#x2F;h3&gt;
&lt;p&gt;ç³»ç»Ÿæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯è¯¦ç»†çš„ä¼šè¯åˆ†æï¼šç”¨æˆ·å¯é€‰æ‹©ç‰¹å®šä¼šè¯ï¼ŒæŸ¥çœ‹å®Œæ•´çš„å®‰è£…æ—¶é—´è½´å’ŒçŠ¶æ€å˜åŒ–ã€‚æ—¶é—´è½´ä½¿ç”¨é¢œè‰²ç¼–ç ï¼ˆç»¿è‰²=æˆåŠŸï¼Œçº¢è‰²=å¤±è´¥ï¼Œæ©™è‰²=è­¦å‘Šï¼‰ç›´è§‚å±•ç¤ºå®‰è£…æµç¨‹ï¼Œæ¯ä¸ªäº‹ä»¶ç‚¹æ˜¾ç¤ºæ­¥éª¤åç§°å’ŒçŠ¶æ€ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;6-5-shu-ju-dao-chu-gong-neng&quot;&gt;6.5 æ•°æ®å¯¼å‡ºåŠŸèƒ½&lt;&#x2F;h3&gt;
&lt;p&gt;ä¸ºæ–¹ä¾¿è¿›ä¸€æ­¥åˆ†æï¼Œç³»ç»Ÿæ”¯æŒå°†ä¼šè¯æ•°æ®å¯¼å‡ºä¸ºCSVæ ¼å¼ï¼Œä¾¿äºåœ¨Excelç­‰å·¥å…·ä¸­æ·±å…¥ç ”ç©¶ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;qi-chang-jian-wen-ti-yu-jie-jue-fang-an&quot;&gt;ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ&lt;&#x2F;h2&gt;
&lt;p&gt;åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°å¹¶è§£å†³äº†å‡ ä¸ªå…¸å‹é—®é¢˜ï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;7-1-dockerjing-xiang-la-qu-wen-ti&quot;&gt;7.1 Dockeré•œåƒæ‹‰å–é—®é¢˜&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜&lt;&#x2F;strong&gt;ï¼šåœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸‹ï¼ŒMongoDBé•œåƒæ‹‰å–å¤±è´¥ï¼ŒæŠ¥é”™&amp;quot;unauthorized: incorrect username or password&amp;quot;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰‹åŠ¨ç™»å½•Docker Hub: &lt;code&gt;docker login&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;å¦‚æ— è´¦å·ï¼ŒæŒ‡å®šå…·ä½“MongoDBç‰ˆæœ¬: &lt;code&gt;mongo:6.0.5&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;æ¸…ç†Dockerç¼“å­˜: &lt;code&gt;docker system prune -a&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;7-2-apiyu-dashboardtong-xin-wen-ti&quot;&gt;7.2 APIä¸Dashboardé€šä¿¡é—®é¢˜&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜&lt;&#x2F;strong&gt;ï¼šDashboardæ— æ³•è¿æ¥åˆ°APIæœåŠ¡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;ç¡®ä¿Dockerç½‘ç»œé…ç½®æ­£ç¡®&lt;&#x2F;li&gt;
&lt;li&gt;åœ¨Docker Composeä¸­å°†API_URLè®¾ç½®ä¸ºæœåŠ¡åç§°: &lt;code&gt;API_URL=http:&#x2F;&#x2F;api:9999&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;å¢åŠ è°ƒè¯•è¾“å‡ºéªŒè¯è¿æ¥: &lt;code&gt;st.sidebar.text(f&amp;quot;API URL: {API_URL}&amp;quot;)&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h3 id=&quot;7-3-shu-ju-geng-xin-yan-chi&quot;&gt;7.3 æ•°æ®æ›´æ–°å»¶è¿Ÿ&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;é—®é¢˜&lt;&#x2F;strong&gt;ï¼šStreamlitç¼“å­˜å¯¼è‡´æ•°æ®æ›´æ–°ä¸åŠæ—¶ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;æ·»åŠ å¼ºåˆ¶åˆ·æ–°æŒ‰é’®: &lt;code&gt;st.cache_data.clear()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;è°ƒæ•´ç¼“å­˜TTL: &lt;code&gt;@st.cache_data(ttl=60)&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;ä½¿ç”¨å®éªŒæ€§é‡æ–°è¿è¡Œ: &lt;code&gt;st.experimental_rerun()&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;ba-wei-lai-you-hua-fang-xiang&quot;&gt;å…«ã€æœªæ¥ä¼˜åŒ–æ–¹å‘&lt;&#x2F;h2&gt;
&lt;p&gt;OpenHands Telemetry Dashboardä»æœ‰å¤šä¸ªå¯ä¼˜åŒ–æ–¹å‘ï¼š&lt;&#x2F;p&gt;
&lt;h3 id=&quot;8-1-yi-chang-jian-ce-yu-gao-jing&quot;&gt;8.1 å¼‚å¸¸æ£€æµ‹ä¸å‘Šè­¦&lt;&#x2F;h3&gt;
&lt;p&gt;å®ç°è‡ªåŠ¨å¼‚å¸¸æ£€æµ‹é€»è¾‘ï¼Œå½“å®‰è£…å¤±è´¥ç‡çªç„¶ä¸Šå‡æ—¶ï¼Œè‡ªåŠ¨å‘Šè­¦é€šçŸ¥å¼€å‘å›¢é˜Ÿã€‚&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;python&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-python &quot;&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;async def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;detect_failure_anomalies&lt;&#x2F;span&gt;&lt;span&gt;():
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&amp;quot;&amp;quot;&amp;quot;æ£€æµ‹å¼‚å¸¸å¤±è´¥æ¨¡å¼&amp;quot;&amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è·å–æœ€è¿‘24å°æ—¶å†…æ•°æ®
&lt;&#x2F;span&gt;&lt;span&gt;    one_day_ago = datetime.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;utcnow&lt;&#x2F;span&gt;&lt;span&gt;() - &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;timedelta&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;hours&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;24&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è®¡ç®—å¤±è´¥ç‡
&lt;&#x2F;span&gt;&lt;span&gt;    total_installs = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;count_documents&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;install&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$gte&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: one_day_ago}
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    failed_installs = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span&gt;telemetry_collection.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;count_documents&lt;&#x2F;span&gt;&lt;span&gt;({
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;step&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;install&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;status&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;failure&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;,
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;timestamp&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: {&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;$gte&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;: one_day_ago}
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    failure_rate = failed_installs &#x2F; total_installs &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;total_installs &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å¼‚å¸¸æ£€æµ‹é€»è¾‘
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;failure_rate &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0.3 &lt;&#x2F;span&gt;&lt;span&gt;and total_installs &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# è§¦å‘å‘Šè­¦
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;send_alert&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;f&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;å®‰è£…å¤±è´¥ç‡è¾¾åˆ°&lt;&#x2F;span&gt;&lt;span&gt;{failure_rate*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;100:.1f&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;%ï¼Œè¯·æ£€æŸ¥ç³»ç»Ÿ&lt;&#x2F;span&gt;&lt;span&gt;&amp;quot;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;8-2-qu-shi-fen-xi&quot;&gt;8.2 è¶‹åŠ¿åˆ†æ&lt;&#x2F;h3&gt;
&lt;p&gt;æ·»åŠ åŸºäºæ—¶é—´çš„è¶‹åŠ¿åˆ†æï¼Œå¸®åŠ©å›¢é˜Ÿç†è§£ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„æ€§èƒ½å˜åŒ–ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;8-3-yong-hu-ti-yan-ping-fen&quot;&gt;8.3 ç”¨æˆ·ä½“éªŒè¯„åˆ†&lt;&#x2F;h3&gt;
&lt;p&gt;é›†æˆç”¨æˆ·åé¦ˆæ•°æ®ï¼Œåˆ›å»ºç»¼åˆç”¨æˆ·ä½“éªŒè¯„åˆ†ï¼Œå…¨é¢è¯„ä¼°å®‰è£…ä½“éªŒã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;8-4-aiyu-ce-fen-xi&quot;&gt;8.4 AIé¢„æµ‹åˆ†æ&lt;&#x2F;h3&gt;
&lt;p&gt;å¼•å…¥æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œé¢„æµ‹å¯èƒ½å¤±è´¥çš„å®‰è£…ï¼Œå¹¶æä¾›é¢„é˜²æ€§å»ºè®®ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;jiu-zong-jie-yu-jing-yan-fen-xiang&quot;&gt;ä¹ã€æ€»ç»“ä¸ç»éªŒåˆ†äº«&lt;&#x2F;h2&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬æˆåŠŸæ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„é¥æµ‹æ•°æ®ä»ªè¡¨æ¿ï¼Œä¸ºOpenHands Starterçš„æŒç»­ä¼˜åŒ–æä¾›äº†æ•°æ®æ”¯æŒã€‚è¿™ä¸ªç³»ç»Ÿå…·æœ‰å‡ ä¸ªå…³é”®ä¼˜åŠ¿ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯æ ˆåˆç†&lt;&#x2F;strong&gt;ï¼šFastAPIä¸Streamlitçš„ç»„åˆæ—¢é«˜æ•ˆåˆå¼ºå¤§&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²ç®€å•&lt;&#x2F;strong&gt;ï¼šDockerå®¹å™¨åŒ–ä½¿å¾—éƒ¨ç½²è¿‡ç¨‹ä¸€è‡´ä¸”ç®€å•&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¯è§†åŒ–ç›´è§‚&lt;&#x2F;strong&gt;ï¼šäº¤äº’å¼å›¾è¡¨ä½¿å¤æ‚æ•°æ®æ˜“äºç†è§£&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ€§å¼º&lt;&#x2F;strong&gt;ï¼šæ¨¡å—åŒ–è®¾è®¡ä¾¿äºæœªæ¥åŠŸèƒ½æ‰©å±•&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;ä»è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å­¦åˆ°äº†å‡ ä¸ªå…³é”®ç»éªŒï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‰åç«¯èŒè´£åˆ†ç¦»&lt;&#x2F;strong&gt;ï¼šFastAPIä¸“æ³¨äºæ•°æ®å¤„ç†ï¼ŒStreamlitä¸“æ³¨äºå¯è§†åŒ–&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å»ºæ¨¡çš„é‡è¦æ€§&lt;&#x2F;strong&gt;ï¼šè‰¯å¥½çš„æ•°æ®æ¨¡å‹è®¾è®¡æ˜¯ç³»ç»Ÿç¨³å®šæ€§çš„åŸºç¡€&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨åŒ–å¸¦æ¥ä¾¿åˆ©&lt;&#x2F;strong&gt;ï¼šDockeræå¤§ç®€åŒ–äº†å¤šç»„ä»¶ç³»ç»Ÿçš„éƒ¨ç½²å’Œç®¡ç†&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ä¸ºä¸­å¿ƒçš„è®¾è®¡&lt;&#x2F;strong&gt;ï¼šä»ç”¨æˆ·éœ€æ±‚å‡ºå‘çš„è®¾è®¡æ‰èƒ½åˆ›é€ çœŸæ­£æœ‰ä»·å€¼çš„å·¥å…·&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªä»ªè¡¨æ¿ï¼ŒOpenHandså›¢é˜Ÿèƒ½å¤ŸæŒç»­ç›‘æ§å®‰è£…è¿‡ç¨‹ï¼Œå¿«é€Ÿè¯†åˆ«å¹¶è§£å†³é—®é¢˜ï¼Œä¸æ–­æå‡ç”¨æˆ·ä½“éªŒã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;æºç åœ°å€&lt;&#x2F;strong&gt;ï¼š&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Polly2014&#x2F;OpenHands-Starter-Dashboard&quot;&gt;GitHub - OpenHands Telemetry Dashboard&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;!--
**åœ¨çº¿æ¼”ç¤º**ï¼š[OpenHands Telemetry Demo](https:&#x2F;&#x2F;telemetry.openhands.dev)
--&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>OpenHands å¤šè´¦æˆ·æ–¹æ¡ˆï¼ˆä¸€ï¼‰: Backend Server Setup and Deployment with SSL</title>
        <published>2025-03-06T00:00:00+00:00</published>
        <updated>2025-03-06T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://polly.wang/openhands-backend-setup-deployment-ssl/" type="text/html"/>
        <id>https://polly.wang/openhands-backend-setup-deployment-ssl/</id>
        
        <content type="html">&lt;p&gt;OpenHands æ˜¯ä¸€ä¸ªåŸºäº Python çš„åç«¯æœåŠ¡ï¼Œä½¿ç”¨ FastAPI æ¡†æ¶æ„å»ºã€‚æœ¬æ–‡å°†è¯¦ç»†è®°å½•å¦‚ä½•ä»æºç ç‹¬ç«‹ç¼–è¯‘éƒ¨ç½² OpenHands çš„ Server ç«¯ï¼Œå¹¶ä¸ºå…¶é…ç½® SSL&#x2F;HTTPSï¼Œä»¥å®ç°å®‰å…¨çš„ç”Ÿäº§ç¯å¢ƒæœåŠ¡ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;fastapi-poetry-uvicorn-nginx-he-ssl-de-guan-xi&quot;&gt;FastAPIã€Poetryã€Uvicornã€Nginx å’Œ SSL çš„å…³ç³»&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;FastAPI&lt;&#x2F;strong&gt;ï¼š
FastAPI æ˜¯ä¸€ä¸ªç°ä»£çš„ Python Web æ¡†æ¶ï¼Œä¸“æ³¨äºå¿«é€Ÿå¼€å‘å’Œé«˜æ€§èƒ½ã€‚å®ƒæ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œèƒ½å¤Ÿå¤„ç†é«˜å¹¶å‘è¯·æ±‚ã€‚FastAPI æä¾›äº†è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼ API æ–‡æ¡£ï¼ˆå¦‚ Swagger UI å’Œ ReDocï¼‰ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿè½»æ¾æµ‹è¯•å’Œè°ƒè¯• APIã€‚å®ƒçš„ç±»å‹æç¤ºå’Œæ•°æ®éªŒè¯åŠŸèƒ½åŸºäº Python çš„ &lt;code&gt;pydantic&lt;&#x2F;code&gt;ï¼Œç¡®ä¿äº†æ•°æ®çš„å¯é æ€§å’Œå®‰å…¨æ€§ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Poetry&lt;&#x2F;strong&gt;ï¼š
Poetry æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Python é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†ä¾èµ–ã€è™šæ‹Ÿç¯å¢ƒå’Œé¡¹ç›®æ„å»ºã€‚å®ƒé€šè¿‡ &lt;code&gt;pyproject.toml&lt;&#x2F;code&gt; æ–‡ä»¶å®šä¹‰é¡¹ç›®çš„ä¾èµ–å…³ç³»å’Œå…ƒæ•°æ®ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚Poetry çš„è™šæ‹Ÿç¯å¢ƒéš”ç¦»åŠŸèƒ½ä½¿å¾—é¡¹ç›®ä¹‹é—´çš„ä¾èµ–ä¸ä¼šç›¸äº’å¹²æ‰°ï¼ŒåŒæ—¶ç®€åŒ–äº†ä¾èµ–å®‰è£…å’Œç‰ˆæœ¬ç®¡ç†ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Uvicorn&lt;&#x2F;strong&gt;ï¼š
Uvicorn æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ ASGI æœåŠ¡å™¨ï¼Œç”¨äºè¿è¡ŒåŸºäº FastAPI çš„åº”ç”¨ã€‚ASGIï¼ˆAsynchronous Server Gateway Interfaceï¼‰æ˜¯ WSGI çš„å¼‚æ­¥ç‰ˆæœ¬ï¼Œæ”¯æŒ WebSocket å’Œ HTTP&#x2F;2 ç­‰ç°ä»£åè®®ã€‚Uvicorn çš„è½»é‡åŒ–è®¾è®¡ä½¿å…¶èƒ½å¤Ÿå¿«é€Ÿå¯åŠ¨å¹¶å¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œæ˜¯è¿è¡Œ FastAPI åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Nginx&lt;&#x2F;strong&gt;ï¼š
Nginx æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Web æœåŠ¡å™¨å’Œåå‘ä»£ç†å·¥å…·ï¼Œå¹¿æ³›ç”¨äºå¤„ç†é™æ€èµ„æºã€è´Ÿè½½å‡è¡¡å’Œ SSL&#x2F;HTTPS é…ç½®ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒNginx å……å½“åå‘ä»£ç†ï¼Œå°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°è¿è¡Œåœ¨ Uvicorn ä¸Šçš„ FastAPI åº”ç”¨ï¼ŒåŒæ—¶è´Ÿè´£ç®¡ç† SSL è¯ä¹¦å’ŒåŠ å¯†é€šä¿¡ã€‚Nginx çš„é«˜æ€§èƒ½å’Œçµæ´»æ€§ä½¿å…¶æˆä¸ºç”Ÿäº§ç¯å¢ƒçš„é¦–é€‰ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SSL&lt;&#x2F;strong&gt;ï¼š
SSLï¼ˆSecure Sockets Layerï¼‰æ˜¯ä¸€ç§åŠ å¯†åè®®ï¼Œç”¨äºä¿æŠ¤å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å®‰å…¨ã€‚é€šè¿‡ HTTPSï¼ˆHTTP over SSLï¼‰ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šè¢«çªƒå–æˆ–ç¯¡æ”¹ã€‚SSL è¯ä¹¦ç”±å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾å‘ï¼ŒéªŒè¯æœåŠ¡å™¨çš„èº«ä»½ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒSSL é€šè¿‡ Nginx æˆ– Caddy è‡ªåŠ¨ç®¡ç†ï¼Œæä¾›å®‰å…¨çš„è®¿é—®é€šé“ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bu-shu-jia-gou&quot;&gt;éƒ¨ç½²æ¶æ„&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;markdown&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-markdown &quot;&gt;&lt;code class=&quot;language-markdown&quot; data-lang=&quot;markdown&quot;&gt;&lt;span&gt;                      +-------------+
&lt;&#x2F;span&gt;&lt;span&gt;                      |             |
&lt;&#x2F;span&gt;&lt;span&gt;                      |  Internet   |
&lt;&#x2F;span&gt;&lt;span&gt;                      |             |
&lt;&#x2F;span&gt;&lt;span&gt;                      +------+------+
&lt;&#x2F;span&gt;&lt;span&gt;                             |
&lt;&#x2F;span&gt;&lt;span&gt;                             | HTTPS (443)
&lt;&#x2F;span&gt;&lt;span&gt;                             |
&lt;&#x2F;span&gt;&lt;span&gt;                      +------+------+
&lt;&#x2F;span&gt;&lt;span&gt;                      |             |
&lt;&#x2F;span&gt;&lt;span&gt;                      |   Nginx     | SSL ç»ˆæ­¢
&lt;&#x2F;span&gt;&lt;span&gt;                      |             |
&lt;&#x2F;span&gt;&lt;span&gt;                      +------+------+
&lt;&#x2F;span&gt;&lt;span&gt;                             |
&lt;&#x2F;span&gt;&lt;span&gt;                             | HTTP (localhost:54013)
&lt;&#x2F;span&gt;&lt;span&gt;                             |
&lt;&#x2F;span&gt;&lt;span&gt;       +-----------------+---+---+-----------------+
&lt;&#x2F;span&gt;&lt;span&gt;       |                 |       |                 |
&lt;&#x2F;span&gt;&lt;span&gt;       |                 |       |                 |
&lt;&#x2F;span&gt;&lt;span&gt;+------+------+    +-----+------+     +------+-----+
&lt;&#x2F;span&gt;&lt;span&gt;|             |    |            |     |            |
&lt;&#x2F;span&gt;&lt;span&gt;|  Uvicorn    |    |  Uvicorn   | ... |  Uvicorn   | ASGI æœåŠ¡å™¨
&lt;&#x2F;span&gt;&lt;span&gt;|  Worker 1   |    |  Worker 2  |     |  Worker n  |
&lt;&#x2F;span&gt;&lt;span&gt;|             |    |            |     |            |
&lt;&#x2F;span&gt;&lt;span&gt;+------+------+    +------+-----+     +------+-----+
&lt;&#x2F;span&gt;&lt;span&gt;       |                 |                  |
&lt;&#x2F;span&gt;&lt;span&gt;       |                 |                  |
&lt;&#x2F;span&gt;&lt;span&gt;+------+------+    +-----+------+     +-----+------+
&lt;&#x2F;span&gt;&lt;span&gt;|             |    |            |     |            |
&lt;&#x2F;span&gt;&lt;span&gt;|  FastAPI    |    |  FastAPI   |     |  FastAPI   | Web æ¡†æ¶
&lt;&#x2F;span&gt;&lt;span&gt;|  App        |    |  App       |     |  App       |
&lt;&#x2F;span&gt;&lt;span&gt;|             |    |            |     |            |
&lt;&#x2F;span&gt;&lt;span&gt;+-------------+    +------------+     +------------+
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;shi-xian-bu-zou&quot;&gt;å®ç°æ­¥éª¤&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;1-cong-yuan-ma-bian-yi-openhands-server&quot;&gt;1. ä»æºç ç¼–è¯‘ OpenHands Server&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;an-zhuang-yi-lai&quot;&gt;å®‰è£…ä¾èµ–&lt;&#x2F;h4&gt;
&lt;p&gt;ç¡®ä¿æœåŠ¡å™¨ä¸Šå®‰è£…ä»¥ä¸‹å·¥å…·ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;&#x2F;li&gt;
&lt;li&gt;Poetry&lt;&#x2F;li&gt;
&lt;li&gt;Make&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;ke-long-yuan-ma&quot;&gt;å…‹éš†æºç &lt;&#x2F;h4&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# å…‹éš† OpenHands ä»“åº“
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; clone https:&#x2F;&#x2F;github.com&#x2F;Polly2014&#x2F;OpenHands.git
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; OpenHands
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;an-zhuang-yi-lai-1&quot;&gt;å®‰è£…ä¾èµ–&lt;&#x2F;h4&gt;
&lt;p&gt;è¿›å…¥åç«¯ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; openhands
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;poetry&lt;&#x2F;span&gt;&lt;span&gt; install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;qi-dong-fu-wu&quot;&gt;å¯åŠ¨æœåŠ¡&lt;&#x2F;h4&gt;
&lt;p&gt;ä½¿ç”¨ Uvicorn å¯åŠ¨ FastAPI åº”ç”¨ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;poetry&lt;&#x2F;span&gt;&lt;span&gt; run uvicorn openhands.server.app:app&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --host&lt;&#x2F;span&gt;&lt;span&gt; 0.0.0.0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --port&lt;&#x2F;span&gt;&lt;span&gt; 54013
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;æ­¤å‘½ä»¤ä¼šå¯åŠ¨ OpenHands çš„åç«¯æœåŠ¡ï¼Œç›‘å¬ç«¯å£ &lt;code&gt;54013&lt;&#x2F;code&gt;ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;2-pei-zhi-ssl-https&quot;&gt;2. é…ç½® SSL&#x2F;HTTPS&lt;&#x2F;h3&gt;
&lt;p&gt;ä¸ºäº†ä¸ºåç«¯æœåŠ¡æ·»åŠ  HTTPS æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨ Nginx æˆ– Caddy ä½œä¸ºåå‘ä»£ç†ã€‚&lt;&#x2F;p&gt;
&lt;h4 id=&quot;shi-yong-nginx-pei-zhi-https&quot;&gt;ä½¿ç”¨ Nginx é…ç½® HTTPS&lt;&#x2F;h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£… Nginx&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt update
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt install nginx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”³è¯· SSL è¯ä¹¦&lt;&#x2F;strong&gt;ï¼ˆä½¿ç”¨ Let&#x27;s Encrypt å’Œ Certbotï¼‰ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt install certbot python3-certbot-nginx
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; certbot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --nginx -d&lt;&#x2F;span&gt;&lt;span&gt; your-domain.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½® Nginx åå‘ä»£ç†&lt;&#x2F;strong&gt;ï¼š
ç¼–è¾‘ &lt;code&gt;&#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;openhands&lt;&#x2F;code&gt;ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;nginx&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-nginx &quot;&gt;&lt;code class=&quot;language-nginx&quot; data-lang=&quot;nginx&quot;&gt;&lt;span&gt;server {
&lt;&#x2F;span&gt;&lt;span&gt;    listen 80;
&lt;&#x2F;span&gt;&lt;span&gt;    server_name your-domain.com;
&lt;&#x2F;span&gt;&lt;span&gt;    return 301 https:&#x2F;&#x2F;$host$request_uri;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;server {
&lt;&#x2F;span&gt;&lt;span&gt;    listen 443 ssl;
&lt;&#x2F;span&gt;&lt;span&gt;    server_name your-domain.com;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    ssl_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;your-domain.com&#x2F;fullchain.pem;
&lt;&#x2F;span&gt;&lt;span&gt;    ssl_certificate_key &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;your-domain.com&#x2F;privkey.pem;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    location &#x2F; {
&lt;&#x2F;span&gt;&lt;span&gt;        proxy_pass http:&#x2F;&#x2F;127.0.0.1:54013; # åç«¯æœåŠ¡çš„åœ°å€
&lt;&#x2F;span&gt;&lt;span&gt;        proxy_set_header Host $host;
&lt;&#x2F;span&gt;&lt;span&gt;        proxy_set_header X-Real-IP $remote_addr;
&lt;&#x2F;span&gt;&lt;span&gt;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
&lt;&#x2F;span&gt;&lt;span&gt;        proxy_set_header X-Forwarded-Proto $scheme;
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨é…ç½®å¹¶é‡å¯ Nginx&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; ln&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;openhands &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nginx&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -t
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl restart nginx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h4 id=&quot;shi-yong-caddy-pei-zhi-https&quot;&gt;ä½¿ç”¨ Caddy é…ç½® HTTPS&lt;&#x2F;h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£… Caddy&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt install&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -y&lt;&#x2F;span&gt;&lt;span&gt; debian-keyring debian-archive-keyring apt-transport-https
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curl -1sLf &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;caddy&#x2F;stable&#x2F;gpg.key&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; tee &#x2F;usr&#x2F;share&#x2F;keyrings&#x2F;caddy-archive-keyring.asc
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curl -1sLf &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;https:&#x2F;&#x2F;dl.cloudsmith.io&#x2F;public&#x2F;caddy&#x2F;stable&#x2F;deb.deb.txt&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;caddy-stable.list
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt update
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt install caddy
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½® Caddyfile&lt;&#x2F;strong&gt;ï¼š
ç¼–è¾‘ &lt;code&gt;&#x2F;etc&#x2F;caddy&#x2F;Caddyfile&lt;&#x2F;code&gt;ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;caddy&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-caddy &quot;&gt;&lt;code class=&quot;language-caddy&quot; data-lang=&quot;caddy&quot;&gt;&lt;span&gt;your-domain.com {
&lt;&#x2F;span&gt;&lt;span&gt;   reverse_proxy 127.0.0.1:54013
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯åŠ¨ Caddy&lt;&#x2F;strong&gt;ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl restart caddy
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Caddy ä¼šè‡ªåŠ¨ç”³è¯·å’Œç®¡ç† SSL è¯ä¹¦ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;3-optional-sheng-chan-huan-jing-you-hua&quot;&gt;3. [Optional] ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–&lt;&#x2F;h3&gt;
&lt;h3 id=&quot;4-optional-jin-cheng-guan-li-yu-zi-qi-dong&quot;&gt;4. [Optional] è¿›ç¨‹ç®¡ç†ä¸è‡ªå¯åŠ¨&lt;&#x2F;h3&gt;
&lt;p&gt;ä½¿ç”¨ Systemd ç®¡ç†æœåŠ¡è¿›ç¨‹ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºæœåŠ¡é…ç½®ï¼š&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nano &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;openhands.service
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;int&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-int &quot;&gt;&lt;code class=&quot;language-int&quot; data-lang=&quot;int&quot;&gt;&lt;span&gt;[Unit]
&lt;&#x2F;span&gt;&lt;span&gt;Description=OpenHands FastAPI Server
&lt;&#x2F;span&gt;&lt;span&gt;After=network.target
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;[Service]
&lt;&#x2F;span&gt;&lt;span&gt;User=ubuntu
&lt;&#x2F;span&gt;&lt;span&gt;WorkingDirectory=&#x2F;path&#x2F;to&#x2F;OpenHands&#x2F;openhands
&lt;&#x2F;span&gt;&lt;span&gt;ExecStart=&#x2F;path&#x2F;to&#x2F;poetry&#x2F;bin&#x2F;poetry run uvicorn openhands.server.app:app --host 0.0.0.0 --port 54013
&lt;&#x2F;span&gt;&lt;span&gt;Restart=always
&lt;&#x2F;span&gt;&lt;span&gt;RestartSec=10
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;[Install]
&lt;&#x2F;span&gt;&lt;span&gt;WantedBy=multi-user.target
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl daemon-reload
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl enable openhands
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl start openhands
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;5-yan-zheng-bu-shu&quot;&gt;5. éªŒè¯éƒ¨ç½²&lt;&#x2F;h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;curl&lt;&#x2F;span&gt;&lt;span&gt; http:&#x2F;&#x2F;127.0.0.1:54013
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡æµè§ˆå™¨è®¿é—® &lt;code&gt;https:&#x2F;&#x2F;your-domain.com&lt;&#x2F;code&gt;ï¼ŒéªŒè¯ HTTPS æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;nginxxing-neng-you-hua&quot;&gt;Nginxæ€§èƒ½ä¼˜åŒ–&lt;&#x2F;h2&gt;
&lt;p&gt;ä¿®æ”¹ &#x2F;etc&#x2F;nginx&#x2F;nginx.confï¼Œæ·»åŠ ä»¥ä¸‹ä¼˜åŒ–ï¼š&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;nginx&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-nginx &quot;&gt;&lt;code class=&quot;language-nginx&quot; data-lang=&quot;nginx&quot;&gt;&lt;span&gt;worker_processes auto;
&lt;&#x2F;span&gt;&lt;span&gt;worker_connections 1024;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;http {
&lt;&#x2F;span&gt;&lt;span&gt;    # å¯ç”¨ gzip å‹ç¼©
&lt;&#x2F;span&gt;&lt;span&gt;    gzip on;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_comp_level 5;
&lt;&#x2F;span&gt;&lt;span&gt;    gzip_types text&#x2F;plain text&#x2F;css application&#x2F;json application&#x2F;javascript;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    # è°ƒæ•´ç¼“å†²åŒºå¤§å°
&lt;&#x2F;span&gt;&lt;span&gt;    client_body_buffer_size 10K;
&lt;&#x2F;span&gt;&lt;span&gt;    client_header_buffer_size 1k;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    # å¯ç”¨ HTTP&#x2F;2
&lt;&#x2F;span&gt;&lt;span&gt;    http2 on;
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    # SSL ä¼˜åŒ–
&lt;&#x2F;span&gt;&lt;span&gt;    ssl_session_cache shared:SSL:10m;
&lt;&#x2F;span&gt;&lt;span&gt;    ssl_session_timeout 10m;
&lt;&#x2F;span&gt;&lt;span&gt;    ssl_protocols TLSv1.2 TLSv1.3;
&lt;&#x2F;span&gt;&lt;span&gt;    ssl_prefer_server_ciphers off;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;chang-jian-wen-ti-pai-cha&quot;&gt;å¸¸è§é—®é¢˜æ’æŸ¥&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;fu-wu-wu-fa-qi-dong&quot;&gt;æœåŠ¡æ— æ³•å¯åŠ¨&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š&lt;code&gt;sudo lsof -i:54013&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;æ£€æŸ¥ Python ç¯å¢ƒï¼š&lt;code&gt;python --version&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;æŸ¥çœ‹æ—¥å¿—ï¼š&lt;code&gt;poetry run uvicorn openhands.server.app:app --log-level debug&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;ssl-pei-zhi-wen-ti&quot;&gt;SSL é…ç½®é—®é¢˜&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;è¯ä¹¦è·¯å¾„é”™è¯¯ï¼šç¡®è®¤è¯ä¹¦æ–‡ä»¶è·¯å¾„æ­£ç¡® &lt;&#x2F;li&gt;
&lt;li&gt;Nginx é…ç½®æµ‹è¯•ï¼šè¿è¡Œ &lt;code&gt;sudo nginx -t&lt;&#x2F;code&gt; æ£€æŸ¥é…ç½®&lt;&#x2F;li&gt;
&lt;li&gt;é˜²ç«å¢™è®¾ç½®ï¼šç¡®ä¿ 80&#x2F;443 ç«¯å£å·²å¼€æ”¾ &lt;code&gt;sudo ufw status&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;yu-ming-jie-xi-wen-ti&quot;&gt;åŸŸåè§£æé—®é¢˜&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®è®¤ DNS è®°å½•å·²æ­£ç¡®è®¾ç½®ï¼š&lt;code&gt;dig your-domain.com&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;ç­‰å¾… DNS ç¼“å­˜æ›´æ–°ï¼ˆå¯èƒ½éœ€è¦ 24-48 å°æ—¶ï¼‰&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;zong-jie&quot;&gt;æ€»ç»“&lt;&#x2F;h2&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº† OpenHands Server ç«¯çš„ç‹¬ç«‹ç¼–è¯‘éƒ¨ç½²ï¼Œå¹¶ä¸ºå…¶é…ç½®äº† SSL&#x2F;HTTPSã€‚FastAPIã€Poetryã€Uvicornã€Nginx å’Œ SSL çš„åä½œç¡®ä¿äº†æœåŠ¡çš„é«˜æ•ˆæ€§å’Œå®‰å…¨æ€§ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¿™ç§éƒ¨ç½²æ¶æ„å…·æœ‰æ˜¾è‘—çš„å¯æ‰©å±•æ€§ä¼˜åŠ¿ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ°´å¹³æ‰©å±•&lt;&#x2F;strong&gt;ï¼šå½“è´Ÿè½½å¢åŠ æ—¶ï¼Œå¯ä»¥è½»æ¾æ·»åŠ æ›´å¤š Uvicorn å·¥ä½œè¿›ç¨‹æˆ–éƒ¨ç½²å¤šä¸ªæœåŠ¡å®ä¾‹ï¼Œç”± Nginx è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå®ç°æ— ç¼æ‰©å®¹ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŠ€æœ¯æ ˆçµæ´»æ€§&lt;&#x2F;strong&gt;ï¼šæ¶æ„çš„å„ç»„ä»¶å¯ä»¥å•ç‹¬å‡çº§æˆ–æ›¿æ¢ï¼ˆå¦‚ Caddy æ›¿ä»£ Nginxï¼‰ï¼Œæ— éœ€é‡æ–°è®¾è®¡æ•´ä¸ªç³»ç»Ÿã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºéš”ç¦»&lt;&#x2F;strong&gt;ï¼šä½¿ç”¨ Poetry åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒç¡®ä¿åº”ç”¨ä¾èµ–ç‹¬ç«‹ï¼Œä¾¿äºå¤šä¸ªé¡¹ç›®åœ¨åŒä¸€æœåŠ¡å™¨ä¸Šå…±å­˜ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¹å™¨åŒ–æ½œåŠ›&lt;&#x2F;strong&gt;ï¼šæ­¤æ¶æ„å¯è½»æ¾è¿ç§»è‡³ Docker å®¹å™¨æˆ– Kubernetes é›†ç¾¤ï¼Œè¿›ä¸€æ­¥æå‡éƒ¨ç½²çš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼éƒ¨ç½²çš„ OpenHands åç«¯æœåŠ¡æ—¢å®‰å…¨å¯é ï¼Œåˆå…·å¤‡äº†åº”å¯¹æœªæ¥ä¸šåŠ¡å¢é•¿çš„æŠ€æœ¯åŸºç¡€ã€‚å¦‚æœæœ‰å…¶ä»–é—®é¢˜æˆ–éœ€æ±‚ï¼Œè¯·éšæ—¶è”ç³»ï¼&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
