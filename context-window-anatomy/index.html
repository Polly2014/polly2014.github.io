<!doctype html><html><head><title>ä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹åœ¨æƒ³ä»€ä¹ˆï¼ŸContext Window é€é¡¹æ‹†è§£</title><meta content="ç”¨ GitHub Copilot æ—¶ï¼Œä½ çš„æ¯ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨è·Ÿç³»ç»Ÿæç¤ºã€å·¥å…·å®šä¹‰ã€Skills æè¿°åˆ—è¡¨ã€æ–‡ä»¶å†…å®¹ã€å¯¹è¯å†å²ç«äº‰ 128K çš„ä¸Šä¸‹æ–‡çª—å£ã€‚æˆ‘æˆªå–äº†ä¸€æ¬¡çœŸå®ä¼šè¯çš„ Context Window ä½¿ç”¨é¢æ¿ï¼Œé€é¡¹è¿½æº¯åˆ°ç£ç›˜ä¸Šçš„å…·ä½“æ–‡ä»¶è·¯å¾„â€”â€”å‘ç° 20% çš„ token è¿˜æ²¡å¼€å§‹èŠå¤©å°±å·²ç»è¢«ã€Œå…¥åœºåˆ¸ã€åƒæ‰äº†ã€‚" name=description><meta content="Polly, Blog, AI Blog, AI Assistant, Tutorials, Technology Blog, Baoli Wang" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content=#333 name=theme-color><meta content=article property=og:type><meta content=https://polly.wang/context-window-anatomy/ property=og:url><meta content="ä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹åœ¨æƒ³ä»€ä¹ˆï¼ŸContext Window é€é¡¹æ‹†è§£" property=og:title><meta content="ç”¨ GitHub Copilot æ—¶ï¼Œä½ çš„æ¯ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨è·Ÿç³»ç»Ÿæç¤ºã€å·¥å…·å®šä¹‰ã€Skills æè¿°åˆ—è¡¨ã€æ–‡ä»¶å†…å®¹ã€å¯¹è¯å†å²ç«äº‰ 128K çš„ä¸Šä¸‹æ–‡çª—å£ã€‚æˆ‘æˆªå–äº†ä¸€æ¬¡çœŸå®ä¼šè¯çš„ Context Window ä½¿ç”¨é¢æ¿ï¼Œé€é¡¹è¿½æº¯åˆ°ç£ç›˜ä¸Šçš„å…·ä½“æ–‡ä»¶è·¯å¾„â€”â€”å‘ç° 20% çš„ token è¿˜æ²¡å¼€å§‹èŠå¤©å°±å·²ç»è¢«ã€Œå…¥åœºåˆ¸ã€åƒæ‰äº†ã€‚" property=og:description><meta content=https://polly.wang/context-window-anatomy/cover.jpg property=og:image><meta content="Polly Blog" property=og:site_name><meta content=zh_CN property=og:locale><meta content=summary_large_image name=twitter:card><meta content=https://polly.wang/context-window-anatomy/ name=twitter:url><meta content="ä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹åœ¨æƒ³ä»€ä¹ˆï¼ŸContext Window é€é¡¹æ‹†è§£" name=twitter:title><meta content="ç”¨ GitHub Copilot æ—¶ï¼Œä½ çš„æ¯ä¸€æ¡æ¶ˆæ¯éƒ½åœ¨è·Ÿç³»ç»Ÿæç¤ºã€å·¥å…·å®šä¹‰ã€Skills æè¿°åˆ—è¡¨ã€æ–‡ä»¶å†…å®¹ã€å¯¹è¯å†å²ç«äº‰ 128K çš„ä¸Šä¸‹æ–‡çª—å£ã€‚æˆ‘æˆªå–äº†ä¸€æ¬¡çœŸå®ä¼šè¯çš„ Context Window ä½¿ç”¨é¢æ¿ï¼Œé€é¡¹è¿½æº¯åˆ°ç£ç›˜ä¸Šçš„å…·ä½“æ–‡ä»¶è·¯å¾„â€”â€”å‘ç° 20% çš„ token è¿˜æ²¡å¼€å§‹èŠå¤©å°±å·²ç»è¢«ã€Œå…¥åœºåˆ¸ã€åƒæ‰äº†ã€‚" name=twitter:description><meta content=https://polly.wang/context-window-anatomy/cover.jpg name=twitter:image><meta content=2026-02-22T00:00:00 property=article:published_time><meta content=Polly property=article:author><meta content="Context Window" property=article:tag><meta content="VS Code Copilot" property=article:tag><meta content=LLM property=article:tag><meta content="Agent Skills" property=article:tag><meta content=Token property=article:tag><meta content=é€†å‘å·¥ç¨‹ property=article:tag><meta content="Claude Code" property=article:tag><link rel="shortcut icon" href=https://polly.wang/images/polly.ico type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=icon type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=apple-touch-icon><link href=https://polly.wang/vendor/purecss/pure-min.css rel=stylesheet><link href=https://polly.wang/vendor/purecss/grids-responsive-min.css rel=stylesheet><link href=https://polly.wang/vendor/font-awesome/css/all.min.css rel=stylesheet><link href=https://polly.wang/css/style_new.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-1N289C8N8W" async></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-1N289C8N8W')</script><body><div class=menu-toggle><img alt=Menu src=https://polly.wang/images/polly.png></div><div class=overlay></div><div class="pure-g container"><div class="sidebar pure-u-1 pure-u-md-1-5"><div class=title><a class=pure-menu-heading href=https://polly.wang> <img class="avatar pure-img-responsive" src=https://polly.wang/images/polly.png> </a><div class=introduction><p>Polly's Blog</div><div class=nav><ul class=nav-links><li><a href=https://polly.wang><i class="fas fa-home"></i>Home</a><li><a href=https://polly.wang/archive><i class="fas fa-archive"></i>Archive</a><li><a href=https://polly.wang/category><i class="fas fa-folder"></i>Category</a><li><a href=https://polly.wang/blog><i class="fas fa-file-alt"></i>Posts</a><li><a href=https://polly.wang/cfp><i class="fas fa-calendar-alt"></i>CFP</a><li><a href=https://polly.wang/publication><i class="fas fa-file-pdf"></i>Research</a><li><a href=https://polly.wang/changelog><i class="fas fa-history"></i>Change Log</a><li><a href=https://polly.wang/about><i class="fas fa-info-circle"></i>About Me</a></ul></div><div class=social><ul class=social-links><li><a href=mailto:26716201@qq.com><i class="fas fa-envelope"></i></a><li><a href=https://twitter.com/Polly__007><i class="fab fa-twitter"></i></a><li><a href=https://www.linkedin.com/in/baoliwang><i class="fab fa-linkedin-in"></i></a><li><a href=https://github.com/Polly2014><i class="fab fa-github"></i></a></ul></div></div></div><div class="content pure-u-1 pure-u-md-4-5"><div class=blog-post><h1>ä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹åœ¨æƒ³ä»€ä¹ˆï¼ŸContext Window é€é¡¹æ‹†è§£</h1><div class=cover-image><img alt="ä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹åœ¨æƒ³ä»€ä¹ˆï¼ŸContext Window é€é¡¹æ‹†è§£" loading=lazy src=cover.jpg></div><div class=content><style>.insight-box{background:linear-gradient(135deg,#e8f4f8 0%,#d4eaf7 100%);border-left:4px solid #3d92c9;border-radius:0 12px 12px 0;padding:20px 24px;margin:24px 0;position:relative}.insight-box:before {content:"ğŸ’¡";position:absolute;left:-14px;top:50%;transform:translateY(-50%);background:#3d92c9;width:28px;height:28px;border-radius:50%;line-height:28px;text-align:center;font-size:14px}.insight-box strong{color:#2c3e50}.stat-card{display:inline-block;background:#f8f9fa;border:1px solid #e9ecef;border-radius:12px;padding:16px 24px;margin:8px;text-align:center;min-width:140px}.stat-card .number{font-size:2em;font-weight:700;color:#3d92c9;display:block}.stat-card .label{font-size:.85em;color:#666;margin-top:4px}.stat-row{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin:20px 0}.file-tree{background:#1e1e1e;color:#d4d4d4;border-radius:12px;padding:20px 24px;margin:20px 0;overflow-x:auto;font:.88em/1.8 'SF Mono','Fira Code',monospace}.file-tree .comment{color:#6a9955}.file-tree .path{color:#9cdcfe}.file-tree .highlight{color:#ce9178;font-weight:700}.file-tree .arrow{color:#569cd6}.bar-chart{margin:20px 0}.bar-item{display:flex;align-items:center;margin:8px 0}.bar-label{width:180px;font-size:.9em;color:#555;flex-shrink:0}.bar-track{flex:1;height:28px;background:#f0f0f0;border-radius:14px;overflow:hidden;position:relative}.bar-fill{height:100%;border-radius:14px;display:flex;align-items:center;padding-left:12px;font-size:.8em;color:white;font-weight:600;transition:width .5s ease;min-width:48px}.bar-fill.sys{background:linear-gradient(90deg,#3d92c9,#5ba3d4)}.bar-fill.tools{background:linear-gradient(90deg,#e67e22,#f39c12)}.bar-fill.msgs{background:linear-gradient(90deg,#27ae60,#2ecc71)}.bar-fill.files{background:linear-gradient(90deg,#8e44ad,#9b59b6)}.bar-fill.results{background:linear-gradient(90deg,#c0392b,#e74c3c)}.bar-fill.other{background:linear-gradient(90deg,#95a5a6,#bdc3c7)}.layer-table{width:100%;border-collapse:collapse;margin:20px 0;font-size:.92em}.layer-table th{background:#2c3e50;color:white;padding:12px 16px;text-align:left}.layer-table td{padding:12px 16px;border-bottom:1px solid #eee;vertical-align:top}.layer-table tr:hover {background:#f8f9fa}.layer-table code{background:#f0f0f0;padding:2px 6px;border-radius:4px;font-size:.9em}.screenshot-placeholder{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border:2px dashed #bbb;border-radius:12px;padding:40px;text-align:center;margin:24px 0;color:#888;font-style:italic}@media (max-width:768px){.layer-table{font-size:.82em;display:block;overflow-x:auto;-webkit-overflow-scrolling:touch}.layer-table td,.layer-table th{padding:8px 10px}.stat-card{min-width:100px;padding:12px 16px}.stat-card .number{font-size:1.5em}.stat-row{gap:4px}.bar-label{width:120px;font-size:.82em}.bar-fill{font-size:.7em;padding-left:6px}.file-tree{font-size:.78em;padding:14px 16px;line-height:1.6}.insight-box{padding:16px 18px;margin:16px 0}}</style><h2 id=yuan-qi>ç¼˜èµ·</h2><p>ç”¨ GitHub Copilot (Agent Mode) å†™äº†ä¸€æ•´å¤©ä»£ç åï¼Œæˆ‘çªç„¶å¥½å¥‡ï¼š<strong>è¿™ä¸ª 128K çš„ Context Windowï¼Œåˆ°åº•è¢«è°ç“œåˆ†äº†ï¼Ÿ</strong><p>VS Code æä¾›äº†ä¸€ä¸ªéšè—çš„ Context Window ä½¿ç”¨é¢æ¿ï¼Œå±•ç¤ºäº†å½“å‰ä¼šè¯ä¸­æ¯ä¸€ç±»å†…å®¹çš„ token å æ¯”ã€‚æˆ‘æˆªå–äº†ä¸€å¼ ï¼Œçœ‹å®Œä¹‹åè§‰å¾—è¿™ä¸ªè¯é¢˜å€¼å¾—æ·±å…¥æ‹†è§£â€”â€”å› ä¸ºè¿™ç›´æ¥å…³ç³»åˆ°ä½ çš„ AI ç¼–ç¨‹åŠ©æ‰‹<strong>åˆ°åº•åœ¨å¤šå¤§ç¨‹åº¦ä¸Šç†è§£ä½ çš„ä»£ç </strong>ã€‚</p><img alt="GitHub Copilot Context Window ä½¿ç”¨é¢æ¿æˆªå›¾" style="max-width:380px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,0.15);margin:0 auto;display:block" src=Screenshot_Context_Window.png><p style=text-align:center;color:#888;font-size:.9em;margin-top:8px>VS Code ä¸­çš„ Context Window ä½¿ç”¨é¢æ¿ï¼ˆSettings â†’ "context window"ï¼‰<p>ä¸‹é¢æˆ‘ä»¬é€é¡¹æ‹†è§£æˆªå›¾ä¸­çš„æ¯ä¸€è¡Œï¼Œè¿½æº¯åˆ°ç£ç›˜ä¸Šçš„å…·ä½“æ–‡ä»¶ã€‚<h2 id=quan-jing-shu-ju>å…¨æ™¯æ•°æ®</h2><p>æˆ‘çš„è¿™æ¬¡ä¼šè¯å¿«ç…§ï¼š<div class=stat-row><div class=stat-card><span class=number>60.8K</span><span class=label>å·²ç”¨ tokens</span></div><div class=stat-card><span class=number>128K</span><span class=label>æ€»çª—å£</span></div><div class=stat-card><span class=number>48%</span><span class=label>å·²ä½¿ç”¨</span></div></div><p>è¿˜æ²¡èŠå‡ è½®å°±ç”¨æ‰äº†å°†è¿‘ä¸€åŠã€‚æ¯ä¸€é¡¹å æ¯”å¦‚ä¸‹ï¼š<div class=bar-chart><div class=bar-item><span class=bar-label>Messages</span><div class=bar-track><div class="bar-fill msgs" style=width:13.8%>13.8%</div></div></div><div class=bar-item><span class=bar-label>Tool Definitions</span><div class=bar-track><div class="bar-fill tools" style=width:10.9%>10.9%</div></div></div><div class=bar-item><span class=bar-label>System Instructions</span><div class=bar-track><div class="bar-fill sys" style=width:9.0%>9.0%</div></div></div><div class=bar-item><span class=bar-label>Tool Results</span><div class=bar-track><div class="bar-fill results" style=width:7.6%>7.6%</div></div></div><div class=bar-item><span class=bar-label>Files</span><div class=bar-track><div class="bar-fill files" style=width:5.7%>5.7%</div></div></div><div class=bar-item><span class=bar-label>Other</span><div class=bar-track><div class="bar-fill other" style=width:.5%>0.5%</div></div></div></div><p>ä¸‹é¢é€é¡¹æ‹†è§£ï¼Œè¿½æº¯åˆ°ç£ç›˜ä¸Šçš„<strong>å…·ä½“æ–‡ä»¶è·¯å¾„</strong>ã€‚<hr><h2 id=1-system-instructions-9-0-11-520-tokens>1. System Instructionsï¼ˆ9.0% â‰ˆ 11,520 tokensï¼‰</h2><p>ç³»ç»ŸæŒ‡ä»¤æ˜¯æ¯æ¬¡ API è°ƒç”¨éƒ½ä¼šæºå¸¦çš„"åº•è‰²"â€”â€”ä½ è¿˜æ²¡è¯´è¯ï¼Œå®ƒå·²ç»åœ¨äº†ã€‚<p>å®ƒç”± <strong>ä¸‰å±‚</strong> å åŠ è€Œæˆï¼š<table class=layer-table><tr><th>å±‚çº§<th>æ¥æºæ–‡ä»¶<th>å†…å®¹<th>â‰ˆ tokens<tr><td><strong>â‘  Copilot å†…ç½®</strong><td><code>~/.vscode/extensions/github.copilot-chat-0.37.8/dist/extension.js</code><td>èº«ä»½æç¤º "You are a highly sophisticated automated coding agent..."ã€è¾“å‡ºæ ¼å¼è§„åˆ™ã€KaTeX æŒ‡ä»¤ã€Markdown Linkification è§„åˆ™ã€Notebook æŒ‡ä»¤<td>~4,000<tr><td><strong>â‘¡ é¡¹ç›®æŒ‡ä»¤</strong><td><code>.github/copilot-instructions.md</code> â†’ <strong>ç¬¦å·é“¾æ¥</strong> â†’ <code>CLAUDE.md</code><td>é¡¹ç›®å¯¼èˆªåœ°å›¾ã€å‘½ä»¤æ‰‹å†Œã€æ¶æ„å›¾ã€Content Conventionsã€Communication Style<td>~3,000<tr><td><strong>â‘¢ Skills æè¿°åˆ—è¡¨</strong><td><code>.claude/skills/*/SKILL.md</code> (30 ä¸ª)<br><code>~/.claude/skills/*/SKILL.md</code> (20 ä¸ª)<td>æ¯ä¸ª Skill çš„ name + description + file è·¯å¾„ï¼Œæ‰“åŒ…æˆåˆ—è¡¨æ³¨å…¥ system prompt<td>~4,000</table><h3 id=ceng-ji-copilot-ying-bian-ma-ti-shi>å±‚çº§ â‘ ï¼šCopilot ç¡¬ç¼–ç æç¤º</h3><p>è—åœ¨ä¸€ä¸ª 17MB çš„å‹ç¼© JS æ–‡ä»¶é‡Œï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>~/.vscode/extensions/github.copilot-chat-0.37.8/dist/extension.js
</span></code></pre><p>ç”¨ <code>grep</code> èƒ½æŒ–å‡ºå¤šæ¡ç³»ç»Ÿæç¤ºæ¨¡æ¿ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒåœºæ™¯ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> grep</span><span style=color:#bf616a> -oE </span><span>'</span><span style=color:#a3be8c>"You are [^"]{20,80}"</span><span>' extension.js | </span><span style=color:#bf616a>head -4
</span><span>
</span><span>"</span><span style=color:#a3be8c>You are a helpful code reviewer who...</span><span>"
</span><span>"</span><span style=color:#a3be8c>You are a highly sophisticated automated coding agent with expert-level knowledge.</span><span>"
</span><span>"</span><span style=color:#a3be8c>You are a strictly grounded assistant limited to the</span><span>"
</span><span>"</span><span style=color:#a3be8c>You are a coding agent running in VS Code. You are expected to be precise, safe, and helpful.</span><span>"
</span></code></pre><p>ä¸åŒçš„ Chat Participantï¼ˆ<code>github.copilot.default</code>ã€<code>github.copilot.editsAgent</code>ã€<code>github.copilot.notebook</code>...ï¼‰ä¼šé€‰ç”¨ä¸åŒçš„ç³»ç»Ÿæç¤ºæ¨¡æ¿ã€‚åœ¨ Agent Mode ä¸‹ï¼Œç”¨çš„æ˜¯é‚£æ¡æœ€é•¿çš„ "highly sophisticated automated coding agent"ã€‚<h3 id=ceng-ji-xiang-mu-zhi-ling-ni-zi-ji-xie-de>å±‚çº§ â‘¡ï¼šé¡¹ç›®æŒ‡ä»¤ï¼ˆä½ è‡ªå·±å†™çš„ï¼‰</h3><p>è¿™æ˜¯æœ€æœ‰æ„æ€çš„å‘ç°â€”â€”æˆ‘çš„ä»“åº“é‡Œæœ‰ä¸ªç¬¦å·é“¾æ¥ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> ls</span><span style=color:#bf616a> -la</span><span> .github/copilot-instructions.md
</span><span style=color:#bf616a>lrwxr-xr-x</span><span>  1 polly  staff  12  1æœˆ 30 23:49
</span><span>    </span><span style=color:#bf616a>.github/copilot-instructions.md</span><span> -> ../CLAUDE.md
</span></code></pre><p><strong>ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸¤ä¸ªå…¥å£</strong>ï¼šClaude Code è¯» <code>CLAUDE.md</code>ï¼ŒVS Code Copilot è¯» <code>.github/copilot-instructions.md</code>ï¼Œå®é™…æ˜¯åŒä¸€ä¸ª 293 è¡Œçš„é¡¹ç›®æŒ‡ä»¤æ–‡ä»¶ã€‚è¿™æ˜¯æˆ‘å½“åˆæœ‰æ„ä¸ºä¹‹çš„è®¾è®¡â€”â€”ç»´æŠ¤ä¸€ä»½æ–‡æ¡£ï¼Œä¸¤ä¸ª AI ç¼–ç¨‹åŠ©æ‰‹éƒ½èƒ½è¯»åˆ°ã€‚<h3 id=ceng-ji-skills-miao-shu-lie-biao>å±‚çº§ â‘¢ï¼šSkills æè¿°åˆ—è¡¨</h3><p>è¿™éƒ¨åˆ†è·Ÿæˆ‘åœ¨ <a href=/skill-pipeline-deep-dive>Skill Pipeline æ·±åº¦æ‹†è§£</a> ä¸­åˆ†æçš„å®Œå…¨å¯¹åº”ã€‚Copilot ä¼šæ‰«æä¸¤ä¸ªå±‚çº§çš„ Skillsï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>Workspace çº§ï¼ˆ30 ä¸ªï¼‰ï¼š    .claude/skills/*/SKILL.md
</span><span>User çº§ï¼ˆ20 ä¸ªï¼‰ï¼š         ~/.claude/skills/*/SKILL.md
</span></code></pre><p>æ¯ä¸ª Skill åªæŠ½å– <code>name</code> å’Œ <code>description</code> å­—æ®µï¼ˆçº¦ 100-150 tokensï¼‰ï¼Œæ‰“åŒ…æˆä¸€ä¸ªåˆ—è¡¨æ³¨å…¥ system promptã€‚30 + 20 = 50 ä¸ª Skill æè¿° Ã— ~80 tokens â‰ˆ <strong>4,000 tokens</strong>ã€‚<div class=insight-box><strong>Skills æ˜¯ System Instructions ä¸­æœ€å¤§çš„å•é¡¹å¼€æ”¯</strong>ã€‚50 ä¸ª Skills çš„æè¿°åˆ—è¡¨å°±åƒæ‰äº†ç³»ç»ŸæŒ‡ä»¤çš„ ~35%ã€‚å¦‚æœä½ è§‰å¾— Context Window ä¸å¤Ÿç”¨ï¼Œç¬¬ä¸€ä¸ªä¼˜åŒ–ç‚¹å°±æ˜¯æ¸…ç†ä¸å¸¸ç”¨çš„ Skillsã€‚</div><hr><h2 id=2-tool-definitions-10-9-13-952-tokens>2. Tool Definitionsï¼ˆ10.9% â‰ˆ 13,952 tokensï¼‰</h2><p>å·¥å…·å®šä¹‰æ¯”ç³»ç»Ÿæç¤ºè¿˜å¤§â€”â€”å®ƒæ˜¯æœ€æ²‰é»˜çš„ token å¤§æˆ·ã€‚<table class=layer-table><tr><th>ç±»å‹<th>æ¥æº<th>å†…å®¹<th>â‰ˆ tokens<tr><td><strong>å†…ç½®å·¥å…· (Active)</strong><td><code>extension.js</code> ç¡¬ç¼–ç <td><code>read_file</code>ã€<code>grep_search</code>ã€<code>replace_string_in_file</code>ã€<code>run_in_terminal</code>ã€<code>semantic_search</code>ã€<code>create_file</code>ã€<code>list_dir</code>ã€<code>manage_todo_list</code> ç­‰ ~15 ä¸ªå·¥å…·çš„å®Œæ•´ JSON Schema<td>~8,000<tr><td><strong>Deferred å·¥å…·åˆ—è¡¨</strong><td><code>extension.js</code> ç¡¬ç¼–ç <td><code>fetch_webpage</code>ã€<code>run_notebook_cell</code>ã€<code>get_changed_files</code> ç­‰ ~50 ä¸ªå·¥å…·çš„åç§° + ç®€è¿°<td>~3,000<tr><td><strong>MCP å¤–éƒ¨å·¥å…·</strong><td><code>.claude/settings.json</code> + MCP æœåŠ¡å™¨åŠ¨æ€æ³¨å†Œ<td><code>mcp_master-transl_*</code>ã€<code>mcp_tavily-remote_*</code>ã€<code>mcp_pylance_*</code> ç­‰<td>~3,000</table><p>æ¯ä¸ªå·¥å…·å®šä¹‰é•¿ä»€ä¹ˆæ ·ï¼Ÿå¤§æ¦‚æ˜¯è¿™æ ·çš„ JSON Schemaï¼š<pre class=language-json data-lang=json style=background:#2b303b;color:#c0c5ce><code class=language-json data-lang=json><span>{
</span><span>  "</span><span style=color:#a3be8c>name</span><span>": "</span><span style=color:#a3be8c>read_file</span><span>",
</span><span>  "</span><span style=color:#a3be8c>description</span><span>": "</span><span style=color:#a3be8c>Read the contents of a file.</span><span style=color:#96b5b4>\n\n</span><span style=color:#a3be8c>You must specify the line range...</span><span>",
</span><span>  "</span><span style=color:#a3be8c>parameters</span><span>": {
</span><span>    "</span><span style=color:#a3be8c>properties</span><span>": {
</span><span>      "</span><span style=color:#a3be8c>filePath</span><span>": { "</span><span style=color:#a3be8c>description</span><span>": "</span><span style=color:#a3be8c>The absolute path of the file to read.</span><span>", "</span><span style=color:#a3be8c>type</span><span>": "</span><span style=color:#a3be8c>string</span><span>" },
</span><span>      "</span><span style=color:#a3be8c>startLine</span><span>": { "</span><span style=color:#a3be8c>description</span><span>": "</span><span style=color:#a3be8c>The line number to start reading from, 1-based.</span><span>", "</span><span style=color:#a3be8c>type</span><span>": "</span><span style=color:#a3be8c>number</span><span>" },
</span><span>      "</span><span style=color:#a3be8c>endLine</span><span>": { "</span><span style=color:#a3be8c>description</span><span>": "</span><span style=color:#a3be8c>The inclusive line number to end reading at, 1-based.</span><span>", "</span><span style=color:#a3be8c>type</span><span>": "</span><span style=color:#a3be8c>number</span><span>" }
</span><span>    },
</span><span>    "</span><span style=color:#a3be8c>required</span><span>": ["</span><span style=color:#a3be8c>filePath</span><span>", "</span><span style=color:#a3be8c>startLine</span><span>", "</span><span style=color:#a3be8c>endLine</span><span>"]
</span><span>  }
</span><span>}
</span></code></pre><p><code>read_file</code> ç®—ç®€å•çš„ï¼Œå¤§çº¦ 300 tokensã€‚è€Œ <code>run_in_terminal</code> å¸¦äº†ä¸€å †ä½¿ç”¨æŒ‡å—ï¼ˆDirectory Managementã€Background Processesã€Output Management...ï¼‰ï¼Œè½»æ¾åˆ° 800 tokensã€‚<p>ç”¨ grep ç»Ÿè®¡å„å·¥å…·åœ¨ <code>extension.js</code> ä¸­çš„å¼•ç”¨æ¬¡æ•°ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> grep</span><span style=color:#bf616a> -oE </span><span>'</span><span style=color:#a3be8c>replace_string_in_file|semantic_search|read_file|run_in_terminal</span><span>' extension.js \
</span><span>  | </span><span style=color:#bf616a>sort </span><span>| </span><span style=color:#bf616a>uniq -c </span><span>| </span><span style=color:#bf616a>sort -rn
</span><span>
</span><span> </span><span style=color:#bf616a>195</span><span> replace_string_in_file    </span><span style=color:#65737e># å¼•ç”¨æœ€å¤šâ€”â€”å› ä¸ºä½¿ç”¨æŒ‡å—é•¿
</span><span>  </span><span style=color:#bf616a>84</span><span> semantic_search
</span><span>  </span><span style=color:#bf616a>74</span><span> read_file
</span><span>  </span><span style=color:#bf616a>67</span><span> run_in_terminal
</span><span>  </span><span style=color:#bf616a>39</span><span> manage_todo_list
</span><span>  </span><span style=color:#bf616a>36</span><span> grep_search
</span><span>  </span><span style=color:#bf616a>12</span><span> create_file
</span><span>   </span><span style=color:#bf616a>6</span><span> list_dir
</span></code></pre><h3 id=deferred-tools-an-xu-jia-zai-de-you-hua>Deferred Toolsï¼šæŒ‰éœ€åŠ è½½çš„ä¼˜åŒ–</h3><p>Copilot å¹¶ä¸æ˜¯æŠŠæ‰€æœ‰ ~60 ä¸ªå·¥å…·çš„å®Œæ•´ Schema éƒ½å¡è¿›å»ï¼ˆé‚£è¦ 30,000+ tokensï¼‰ã€‚å®ƒç”¨äº†ä¸€ä¸ªèªæ˜çš„åˆ†å±‚ç­–ç•¥ï¼š<ul><li><strong>Active Toolsï¼ˆ~15 ä¸ªï¼‰</strong>ï¼šå®Œæ•´ JSON Schema ç›´æ¥æ³¨å…¥ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½å¸¦<li><strong>Deferred Toolsï¼ˆ~50 ä¸ªï¼‰</strong>ï¼šåªæ”¾åç§° + ä¸€å¥è¯æè¿°ï¼Œéœ€è¦æ—¶é€šè¿‡ <code>tool_search_tool_regex</code> åŠ¨æ€åŠ è½½å®Œæ•´å®šä¹‰</ul><pre style=background:#2b303b;color:#c0c5ce><code><span>Active:  read_file, grep_search, run_in_terminal, create_file...     â†’ å®Œæ•´ Schema
</span><span>Deferred: fetch_webpage, run_notebook_cell, install_extension...     â†’ åç§° + ç®€è¿°
</span></code></pre><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ æœ‰æ—¶åœ¨å¯¹è¯ä¸­çœ‹åˆ° Copilot å…ˆè°ƒ <code>tool_search_tool_regex</code> å†è°ƒç›®æ ‡å·¥å…·â€”â€”å®ƒåœ¨"æŒ‰éœ€å±•å¼€"ä¸€ä¸ª Deferred Tool çš„å®Œæ•´ Schemaã€‚<hr><h2 id=3-messages-13-8-17-664-tokens>3. Messagesï¼ˆ13.8% â‰ˆ 17,664 tokensï¼‰</h2><p>è¿™æ˜¯å”¯ä¸€<strong>æ²¡æœ‰ç‹¬ç«‹ç£ç›˜æ–‡ä»¶æºå¤´</strong>çš„éƒ¨åˆ†â€”â€”å®ƒå°±æ˜¯ä½ å’Œ AI èŠçš„å†…å®¹æœ¬èº«ã€‚<table class=layer-table><tr><th>ç»„æˆ<th>æ¥æº<th>è¯´æ˜<tr><td><strong>å¯¹è¯å†å²</strong><td>VS Code å†…å­˜ + <code>workspaceStorage/state.vscdb</code><td>ä½ çš„æ¯æ¡æ¶ˆæ¯ + AI çš„æ¯æ¡å›å¤ï¼ŒæŒ‰æ—¶é—´é¡ºåºç´¯ç§¯<tr><td><strong>Conversation Summary</strong><td>Copilot åŠ¨æ€ç”Ÿæˆ<td>å¯¹è¯å˜é•¿æ—¶ï¼Œæ—©æœŸå†…å®¹è¢«å‹ç¼©ä¸º <code>&LTconversation-summary></code> XML å—</table><p>æŒä¹…åŒ–ä½ç½®ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>~/Library/Application Support/Code/User/workspaceStorage/&LThash>/
</span><span>  â””â”€â”€ state.vscdb        â† SQLite æ•°æ®åº“ï¼Œå­˜å‚¨ chat ä¼šè¯å†å²
</span></code></pre><p>Messages æ˜¯ Context Window ä¸­<strong>å¢é•¿æœ€å¿«çš„éƒ¨åˆ†</strong>ã€‚æ¯å¤šä¸€è½®å¯¹è¯ï¼Œä½ çš„å¯ç”¨ç©ºé—´å°±å°‘ä¸€äº›ã€‚å½“æ¥è¿‘çª—å£ä¸Šé™æ—¶ï¼ŒCopilot ä¼šå¼€å§‹å‹ç¼©æ—©æœŸå¯¹è¯â€”â€”è¿™å°±æ˜¯é•¿ä¼šè¯åæœŸ"å¤±å¿†"çš„æ ¹æœ¬åŸå› ã€‚<hr><h2 id=4-files-5-7-7-296-tokens>4. Filesï¼ˆ5.7% â‰ˆ 7,296 tokensï¼‰</h2><p>è¿™éƒ¨åˆ†æ¥è‡ªä½ <strong>ä¸»åŠ¨æä¾›æˆ–ç¼–è¾‘å™¨è‡ªåŠ¨æºå¸¦</strong>çš„æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼š<table class=layer-table><tr><th>ç±»å‹<th>æ¥æº<th>æ³¨å…¥æ–¹å¼<tr><td><strong>ç”¨æˆ·é™„åŠ æ–‡ä»¶</strong><td>ä½ åœ¨ç¼–è¾‘å™¨ä¸­é€‰ä¸­çš„å†…å®¹ï¼ˆå¦‚ <code>CLAUDE.md</code> 293 è¡Œï¼‰<td><code>&LTattachment></code> XML æ ‡ç­¾åŒ…è£¹ï¼Œå®Œæ•´å†…å®¹æ³¨å…¥<tr><td><strong>ç¼–è¾‘å™¨ä¸Šä¸‹æ–‡</strong><td>å½“å‰æ‰“å¼€çš„æ–‡ä»¶è·¯å¾„ + å…‰æ ‡ä½ç½®<td><code>&LTeditorContext></code> æ ‡ç­¾ï¼Œè·¯å¾„ + é€‰åŒºä¿¡æ¯<tr><td><strong>Workspace ç»“æ„</strong><td>å·¥ä½œç›®å½•çš„ç›®å½•æ ‘æ‘˜è¦<td><code>&LTworkspace_info></code> æ ‡ç­¾ï¼Œè‡ªåŠ¨ç”Ÿæˆ</table><p>è¿™é‡Œçš„å…³é”®ä¼˜åŒ–ç‚¹ï¼š<strong>ä¸è¦æ— è„‘é™„åŠ å¤§æ–‡ä»¶</strong>ã€‚æŠŠä¸€ä¸ª 500 è¡Œæ–‡ä»¶é€‰ä¸­æ‹–è¿›èŠå¤© = ç™½ç™½åƒæ‰ ~3000 tokensã€‚åªåœ¨éœ€è¦æ—¶é€‰ä¸­ç›¸å…³ä»£ç æ®µã€‚<hr><h2 id=5-tool-results-7-6-9-728-tokens>5. Tool Resultsï¼ˆ7.6% â‰ˆ 9,728 tokensï¼‰</h2><p>æ¯æ¬¡ AI è°ƒç”¨å·¥å…·åï¼Œå·¥å…·çš„<strong>è¿”å›ç»“æœä¹Ÿè¦æ”¾å› Context Window</strong>â€”â€”å› ä¸º LLM éœ€è¦çœ‹åˆ°ç»“æœæ‰èƒ½ç»§ç»­æ¨ç†ã€‚<table><thead><tr><th>å·¥å…·<th>è¿”å›å†…å®¹<th>Token æ¶ˆè€—<tbody><tr><td><code>read_file</code><td>æ–‡ä»¶å†…å®¹<td>~2000/300è¡Œ<tr><td><code>grep_search</code><td>æœç´¢ç»“æœåˆ—è¡¨<td>~500/æ¬¡<tr><td><code>run_in_terminal</code><td>å‘½ä»¤è¾“å‡º<td>å˜åŒ–å¤§<tr><td><code>get_errors</code><td>ç¼–è¯‘/lint é”™è¯¯<td>~100/æ¬¡<tr><td><code>runSubagent</code><td>å­ä»£ç†æŠ¥å‘Š<td>~2000/æ¬¡</table><p>Tool Results æ˜¯"éšå½¢æ¶ˆè´¹"å¤§æˆ·ã€‚ä½ è®© AI è¯»ä¸€ä¸ªæ–‡ä»¶ â†’ ~2000 tokensï¼Œå†è¯»ä¸€ä¸ª â†’ +2000ï¼Œè·‘ä¸ª git push â†’ +500...ä¸çŸ¥ä¸è§‰å°±ç´¯ç§¯äº†å°†è¿‘ 10,000 tokensã€‚<hr><h2 id=6-other-0-5-640-tokens>6. Otherï¼ˆ0.5% â‰ˆ 640 tokensï¼‰</h2><p>æœ€å°çš„ä¸€å—ï¼Œä½†ä¹Ÿå€¼å¾—çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>&LTenvironment_info>macOS&LT/environment_info>
</span><span>&LTcontext>
</span><span>  Terminals: zola, node, zsh...
</span><span>  Last Command: git push
</span><span>  Cwd: /Users/polly/.../www.polly.com
</span><span>  Exit Code: 0
</span><span>&LT/context>
</span></code></pre><p>æ¥è‡ª VS Code è¿è¡Œæ—¶ç¯å¢ƒé‡‡é›†ï¼šæ“ä½œç³»ç»Ÿç±»å‹ã€å·²å¼€çš„ç»ˆç«¯ã€æœ€è¿‘æ‰§è¡Œçš„å‘½ä»¤ã€å½“å‰å·¥ä½œç›®å½•ã€‚è¿™äº›å¸®åŠ© AI ç†è§£ä½ çš„å¼€å‘ç¯å¢ƒä¸Šä¸‹æ–‡ã€‚<hr><h2 id=quan-jing-ci-pan-di-tu>å…¨æ™¯ç£ç›˜åœ°å›¾</h2><p>æŠŠæ‰€æœ‰æ¥æºæ±‡æ€»åˆ°ä¸€å¼ æ–‡ä»¶æ ‘ä¸Šï¼š<div class=file-tree><span class=comment># ä½ çš„ Context Window = 60.8K tokensï¼Œæ¥è‡ªè¿™äº›æ–‡ä»¶ï¼š</span><br><br><span class=path>~/.vscode/extensions/github.copilot-chat-0.37.8/</span><br> â”œâ”€â”€ <span class=highlight>dist/extension.js</span> Â Â Â Â Â Â Â Â <span class=comment># 17MBï¼ŒåŒ…å«ï¼š</span><br> â”‚ Â Â â”œâ”€â”€ System Prompt æ¨¡æ¿ Â Â Â Â <span class=comment># "You are a highly sophisticated..."</span><br> â”‚ Â Â â”œâ”€â”€ Tool JSON Schemas Â Â Â Â <span class=comment># read_file, grep_search, ...</span><br> â”‚ Â Â â”œâ”€â”€ Deferred Tools åˆ—è¡¨ Â Â <span class=comment># ~50 ä¸ªå·¥å…·åç§°+ç®€è¿°</span><br> â”‚ Â Â â”œâ”€â”€ Skill åŠ è½½é€»è¾‘ Â Â Â Â Â Â Â <span class=comment># .claude/skills ç›®å½•æ‰«æ</span><br> â”‚ Â Â â””â”€â”€ Context ç»„è£…å™¨ Â Â Â Â Â Â Â <span class=comment># æ‹¼æ¥æ‰€æœ‰æ¥æº</span><br> â””â”€â”€ <span class=path>package.json</span> Â Â Â Â Â Â Â Â Â Â Â Â <span class=comment># 12 ä¸ª chatParticipant æ³¨å†Œ</span><br><br><span class=path>&LTworkspace>/</span><br> â”œâ”€â”€ <span class=highlight>CLAUDE.md</span> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=comment># é¡¹ç›®æŒ‡ä»¤ (293 è¡Œ)</span><br> â”œâ”€â”€ <span class=path>.github/</span><br> â”‚ Â Â â”œâ”€â”€ <span class=highlight>copilot-instructions.md</span><span class=arrow>â†’</span><span class=highlight>../CLAUDE.md</span> Â <span class=comment># ç¬¦å·é“¾æ¥ï¼</span><br> â”‚ Â Â â””â”€â”€ <span class=path>prompts/</span> Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=comment># 16 ä¸ª prompt æ¨¡æ¿ (æŒ‰éœ€)</span><br> â”œâ”€â”€ <span class=path>.claude/</span><br> â”‚ Â Â â”œâ”€â”€ <span class=path>settings.json</span> Â Â Â Â Â Â Â <span class=comment># MCP æœåŠ¡å™¨é…ç½®</span><br> â”‚ Â Â â””â”€â”€ <span class=path>skills/</span> Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=comment># 30 ä¸ª workspace skills</span><br> â”‚ Â Â Â Â Â Â â”œâ”€â”€ blog-writer/SKILL.md<br> â”‚ Â Â Â Â Â Â â”œâ”€â”€ paper-writer/SKILL.md<br> â”‚ Â Â Â Â Â Â â”œâ”€â”€ memory-keeper/SKILL.md<br> â”‚ Â Â Â Â Â Â â””â”€â”€ ... (27 more)<br><br><span class=path>~/.claude/</span><br> â””â”€â”€ <span class=path>skills/</span> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=comment># 20 ä¸ª user-level skills</span><br> Â Â Â Â â”œâ”€â”€ academic-paper-writer/SKILL.md<br> Â Â Â Â â”œâ”€â”€ frontend-design/SKILL.md<br> Â Â Â Â â””â”€â”€ ... (18 more)<br><br><span class=path>~/Library/Application Support/Code/</span><br> â””â”€â”€ <span class=path>User/workspaceStorage/&LThash>/</span><br> Â Â Â Â â””â”€â”€ <span class=highlight>state.vscdb</span> Â Â Â Â Â Â Â Â Â Â <span class=comment># å¯¹è¯å†å² (SQLite)</span></div><p>æœ€æ ¸å¿ƒçš„ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯é‚£ä¸ª <strong>17MB çš„ <code>extension.js</code></strong>â€”â€”System Promptã€Tool Definitionsã€Skill åŠ è½½å™¨ã€Context ç»„è£…å™¨å…¨åœ¨é‡Œé¢ã€‚å…¶ä½™éƒ½æ˜¯é…ç½®æ–‡ä»¶å’Œå†…å®¹æ–‡ä»¶ï¼Œè¢«å®ƒåœ¨è¿è¡Œæ—¶è¯»å–å¹¶æ‹¼è£…ã€‚<hr><h2 id=cheng-ben-jie-gou-gu-ding-vs-lei-ji>æˆæœ¬ç»“æ„ï¼šå›ºå®š vs ç´¯ç§¯</h2><p>è¿™å¼ å›¾æ˜¯æˆ‘æœ€æƒ³è¡¨è¾¾çš„æ ¸å¿ƒè§‚ç‚¹ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span>â”‚         æ¯æ¬¡ API è°ƒç”¨çš„ token æ„æˆ                â”‚
</span><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
</span><span>â”‚                                                  â”‚
</span><span>â”‚  ğŸ”’ å›ºå®šæˆæœ¬ï¼ˆæ¯æ¬¡éƒ½ä»˜ï¼‰              â‰ˆ 20%      â”‚
</span><span>â”‚     System Instructions     9.0%                â”‚
</span><span>â”‚     Tool Definitions       10.9%                â”‚
</span><span>â”‚                                                  â”‚
</span><span>â”‚  ğŸ“ˆ ç´¯ç§¯æˆæœ¬ï¼ˆè¶ŠèŠè¶Šå¤šï¼‰              â‰ˆ 27%      â”‚
</span><span>â”‚     Messages              13.8%                 â”‚
</span><span>â”‚     Files                  5.7%                 â”‚
</span><span>â”‚     Tool Results           7.6%                 â”‚
</span><span>â”‚                                                  â”‚
</span><span>â”‚  ğŸ“¦ æ‚é¡¹                              â‰ˆ  1%      â”‚
</span><span>â”‚     Other                  0.5%                 â”‚
</span><span>â”‚                                                  â”‚
</span><span>â”‚  ğŸ’¨ å‰©ä½™ç©ºé—´                          â‰ˆ 52%      â”‚
</span><span>â”‚     å¯ç”¨äºç»§ç»­å¯¹è¯                               â”‚
</span><span>â”‚                                                  â”‚
</span><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre><div class=insight-box><strong>128K çª—å£ä½ å®é™…èƒ½ç”¨çš„åªæœ‰ ~102K</strong>ã€‚System Instructions + Tool Definitions è¿™ 20% æ˜¯"å…¥åœºåˆ¸"â€”â€”ä½ è¿˜æ²¡å¼€å£è¯´è¯å°±è¢«æ‰£äº†ã€‚å¯¹è¯è¶Šé•¿ï¼ŒMessages + Tool Results åƒæ»šé›ªçƒä¸€æ ·è†¨èƒ€ã€‚åˆ° 80-90% æ—¶ Copilot ä¼šå¼€å§‹å‹ç¼©æ—©æœŸå¯¹è¯ï¼Œè¿™å°±æ˜¯é•¿ä¼šè¯åæœŸ"å¤±å¿†"çš„æ ¹æœ¬åŸå› ã€‚</div><hr><h2 id=you-hua-zhi-nan>ä¼˜åŒ–æŒ‡å—</h2><p>çŸ¥é“äº†æ¯ä¸€å¯¸ token çš„å‡ºå¤„ï¼Œä¼˜åŒ–å°±æœ‰æ–¹å‘äº†ï¼š<table><thead><tr><th>ä¼˜åŒ–ç­–ç•¥<th>é’ˆå¯¹éƒ¨åˆ†<th>æ•ˆæœ<tbody><tr><td><strong>æ¸…ç†ä¸å¸¸ç”¨çš„ Skills</strong><td>System Instructions<td>50 ä¸ªå‡åˆ° 20 ä¸ª â†’ çœ ~2,400 tokens<tr><td><strong>å‡å°‘ MCP å·¥å…·æ•°é‡</strong><td>Tool Definitions<td>æ¯å°‘ä¸€ä¸ª MCP å·¥å…· â†’ çœ ~300 tokens<tr><td><strong>åŠæ—¶å¼€æ–°ä¼šè¯</strong><td>Messages<td>å½’é›¶ï¼Œå›æ”¶ ~15-20%<tr><td><strong>ç²¾ç¡®é€‰ä¸­ä»£ç æ®µï¼Œåˆ«å…¨æ–‡æ‹–å…¥</strong><td>Files<td>300 è¡Œâ†’50 è¡Œ â†’ çœ ~1,600 tokens<tr><td><strong>å°‘è®© AI è¯»å¤§æ–‡ä»¶</strong><td>Tool Results<td>æ¯æ¬¡ <code>read_file</code> æ§åˆ¶è¡Œæ•°<tr><td><strong>ç²¾ç®€ CLAUDE.md</strong><td>System Instructions<td>293 è¡Œâ†’150 è¡Œ â†’ çœ ~1,500 tokens</table><hr><h2 id=gen-skill-pipeline-de-guan-xi>è·Ÿ Skill Pipeline çš„å…³ç³»</h2><p>å¦‚æœä½ è¯»è¿‡æˆ‘çš„ <a href=/skill-pipeline-deep-dive>Skill Pipeline æ·±åº¦æ‹†è§£</a>ï¼Œç°åœ¨å¯ä»¥æŠŠä¸¤ç¯‡æ–‡ç« ä¸²èµ·æ¥ï¼š<ol><li><strong>Skill æè¿°åˆ—è¡¨å¸¸é©» System Instructions</strong>ï¼ˆ~4,000 tokensï¼‰â€”â€”è¿™å°±æ˜¯ Skill Pipeline çš„"å”¯ä¸€å›ºå®šä»£ä»·"<li><strong>è§¦å‘ Skill åï¼ŒSKILL.md å…¨æ–‡ä½œä¸º Tool Result æ³¨å…¥</strong>â€”â€”ä» Tool Results çš„ 7.6% é‚£å—æ‰£<li><strong>å·¥å…·è°ƒç”¨ï¼ˆread_file ç­‰ï¼‰çš„ç»“æœä¹Ÿè¿› Tool Results</strong>â€”â€”Skill è§¦å‘åç»­çš„å·¥å…·è°ƒç”¨é“¾ï¼Œæ¯ä¸€æ­¥éƒ½åœ¨ç´¯åŠ </ol><p>æ•´ä¸ª Skill Pipeline çš„ token è¶³è¿¹ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>æè¿°åˆ—è¡¨ (å¸¸é©»)  â†’  ~80 tokens/skill  â†’  System Instructions
</span><span>SKILL.md (æŒ‰éœ€)  â†’  ~500-2000 tokens  â†’  Tool Results
</span><span>åç»­å·¥å…·è°ƒç”¨     â†’  æ¯æ¬¡ ~500-2000     â†’  Tool Results (ç´¯ç§¯)
</span></code></pre><hr><h2 id=jie-yu>ç»“è¯­</h2><p>Context Window å°±æ˜¯ AI Agent çš„"å·¥ä½œå†…å­˜"ã€‚è·Ÿä½ ç”¨ <code>htop</code> çœ‹è¿›ç¨‹å†…å­˜ä¸€æ ·ï¼Œè¿™ä¸ªé¢æ¿å‘Šè¯‰ä½ æ¯ä¸€å¯¸ token è¢«è°å äº†ã€ä»å“ªæ¥çš„ã€‚<p>ä¸‹æ¬¡ä½ è§‰å¾— AI "ä¸å¤Ÿèªæ˜"æˆ–"å¿˜äº†ä¹‹å‰è¯´çš„"æ—¶ï¼Œå…ˆçœ‹çœ‹ Context Window ä½¿ç”¨ç‡â€”â€”å¾ˆå¯èƒ½ä¸æ˜¯æ¨¡å‹çš„é—®é¢˜ï¼Œè€Œæ˜¯å®ƒçš„"å†…å­˜"å¿«æ»¡äº†ã€‚<p>è¿™ç¯‡æ‹†çš„æ˜¯ VS Code Copilot çš„ Context Windowã€‚Claude Code å‘¢ï¼Ÿå®ƒçš„ä¸Šä¸‹æ–‡ç»„è£…ç­–ç•¥å®Œå…¨ä¸åŒâ€”â€”æ²¡æœ‰ Deferred Toolsï¼Œæœ‰ System Prompt Cachingï¼Œè¿˜æœ‰ä¸€å¥—ç‹¬ç‰¹çš„ conversation compaction æœºåˆ¶ã€‚é‚£æ˜¯å¦ä¸€ä¸ªæ•…äº‹äº†ã€‚<hr><p><em>æœ¬æ–‡ä¸ <a href=/skill-pipeline-deep-dive>æ‹†è§£ Skill Pipeline</a> ä¸ºåŒæ—¥å§Šå¦¹ç¯‡ï¼Œå»ºè®®å¯¹ç…§é˜…è¯»ã€‚</em></div><div class=navigation></div></div><div id=giscus-container><h2>Comments</h2><div class=giscus></div></div><script data-category="Blog Comments" async crossorigin data-category-id=DIC_kwDOL45duM4CnjlZ data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=Polly2014/polly2014.github.io data-repo-id=R_kgDOL45duA data-strict=0 data-theme=noborder_light src=https://giscus.app/client.js></script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                // ç°ç™½é»‘è‰²è°ƒ + è“è‰²ç‚¹ç¼€
                primaryColor: '#e8e8e8',
                primaryTextColor: '#333',
                primaryBorderColor: '#999',
                lineColor: 'rgb(61, 146, 201)',
                secondaryColor: '#f5f5f5',
                tertiaryColor: '#fafafa',
                background: '#f2f2f2',
                mainBkg: '#f5f5f5',
                nodeBorder: '#999',
                clusterBkg: '#eee',
                clusterBorder: '#ccc',
                titleColor: '#333',
                edgeLabelBackground: '#f2f2f2',
                // æ–‡æœ¬é¢œè‰²
                textColor: '#333',
                nodeTextColor: '#333',
                // å…¶ä»–
                fontFamily: "'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace"
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // æŸ¥æ‰¾æ‰€æœ‰ mermaid ä»£ç å—å¹¶æ¸²æŸ“
        document.querySelectorAll('pre code.language-mermaid').forEach((block, index) => {
            const container = document.createElement('div');
            container.className = 'mermaid';
            container.textContent = block.textContent;
            block.parentNode.replaceWith(container);
        });

        // æ¸²æŸ“æ‰€æœ‰ mermaid å›¾è¡¨
        await mermaid.run();
    </script><style>.cover-image{text-align:center;margin:1.5em 0 2em 0}.cover-image img{width:60%;height:auto;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15)}.mermaid{background:#fafafa;border:1px solid #ddd;padding:20px;margin:20px 0;overflow-x:auto}.mermaid svg{max-width:100%;height:auto}@media (max-width:768px){.cover-image img{width:100%}}</style></div></div><script>document.addEventListener('DOMContentLoaded',function(){const c=document.querySelector('.menu-toggle');const d=document.querySelector('.sidebar');const e=document.querySelector('.overlay');function a(){d.classList.toggle('active');e.classList.toggle('active')}c.addEventListener('click',a);e.addEventListener('click',a);let f=0;let g=0;document.addEventListener('touchstart',h=>{f=h.changedTouches[0].screenX},false);document.addEventListener('touchend',h=>{g=h.changedTouches[0].screenX;b()},false);function b(){const h=g- f;if(h>50&&f<30){d.classList.add('active');e.classList.add('active')}else if(h<-50&&d.classList.contains('active')){d.classList.remove('active');e.classList.remove('active')}}})</script>