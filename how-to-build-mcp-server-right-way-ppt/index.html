<!doctype html><html><head><title>Polly Blog - AI Assistant, Tutorials, and Insights</title><meta content="Explore Polly Blog for AI tutorials, insights, and updates on cutting-edge technology." name=description><meta content="Polly, Blog, AI Blog, AI Assistant, Tutorials, Technology Blog, Baoli Wang" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta content="text/html; charset=utf-8" http-equiv=content-type><link rel="shortcut icon" href=https://polly.wang/images/polly.ico type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=icon type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=apple-touch-icon><link href=https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css rel=stylesheet><link href=https://polly.wang/css/style_new.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-8JD13N7PHS" async></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-8JD13N7PHS')</script><body><div class=menu-toggle><img alt=Menu src=https://polly.wang/images/polly.png></div><div class=overlay></div><div class="pure-g container"><div class="sidebar pure-u-1 pure-u-md-1-5"><div class=title><a class=pure-menu-heading href=https://polly.wang> <img class="avatar pure-img-responsive" src=https://polly.wang/images/polly.png> </a><div class=introduction><p>Polly's Blog</div><div class=nav><ul class=nav-links><li><a href=https://polly.wang><i class="fas fa-home"></i>Home</a><li><a href=https://polly.wang/archive><i class="fas fa-archive"></i>Archive</a><li><a href=https://polly.wang/category><i class="fas fa-folder"></i>Category</a><li><a href=https://polly.wang/blog><i class="fas fa-file-alt"></i>Posts</a><li><a href=https://polly.wang/publication><i class="fas fa-file-pdf"></i>Research</a><li><a href=https://polly.wang/changelog><i class="fas fa-history"></i>Change log</a><li><a href=https://polly.wang/about><i class="fas fa-info-circle"></i>About Me</a></ul></div><div class=social><ul class=social-links><li><a href=mailto:26716201@qq.com><i class="fas fa-envelope"></i></a><li><a href=https://twitter.com/Polly__007><i class="fab fa-twitter"></i></a><li><a href=https://www.linkedin.com/in/baoliwang><i class="fab fa-linkedin-in"></i></a><li><a href=https://github.com/Polly2014><i class="fab fa-github"></i></a></ul></div></div></div><div class="content pure-u-1 pure-u-md-4-5"><div class=blog-post><h1>How to Build MCP Server in the Right Way: ä»å…¥é—¨åˆ°å®æˆ˜çš„å®Œæ•´æŒ‡å—</h1><div class=content><h1 id=how-to-build-mcp-server-in-the-right-way>How to Build MCP Server in the Right Way</h1><h2 id=cong-ru-men-dao-shi-zhan-de-wan-zheng-zhi-nan>ä»å…¥é—¨åˆ°å®æˆ˜çš„å®Œæ•´æŒ‡å—</h2><h3 id=clipboard-pptwan-zheng-da-gang-60fen-zhong-yan-jiang>ğŸ“‹ PPTå®Œæ•´å¤§çº² (60åˆ†é’Ÿæ¼”è®²)</h3><hr><h2 id=di-yi-bu-fen-mcpji-chu-gai-nian-yu-he-xin-jie-zhi-15fen-zhong>ç¬¬ä¸€éƒ¨åˆ†ï¼šMCPåŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒä»·å€¼ (15åˆ†é’Ÿ)</h2><h3 id=dart-slide-1-what-is-mcp-zhong-xin-ding-yi-aiyu-gong-ju-de-jiao-hu-fang-shi>ğŸ¯ Slide 1: What is MCP? - é‡æ–°å®šä¹‰AIä¸å·¥å…·çš„äº¤äº’æ–¹å¼</h3><p><strong>æ ¸å¿ƒå†…å®¹</strong>ï¼š<ul><li><strong>å®šä¹‰</strong>ï¼šModel Context Protocol - AIåŠ©æ‰‹ä¸å¤–éƒ¨å·¥å…·äº¤äº’çš„æ ‡å‡†åŒ–åè®®<li><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šåˆ†ç¦»å†…å®¹æä¾›ä¸LLMäº¤äº’çš„å…³æ³¨ç‚¹<li><strong>ä¸‰å¤§æ”¯æŸ±</strong>ï¼š <ul><li><strong>Resources</strong>: æ•°æ®æš´éœ² (ç±»ä¼¼REST APIçš„GET)<li><strong>Tools</strong>: åŠŸèƒ½æ‰§è¡Œ (ç±»ä¼¼REST APIçš„POST)<li><strong>Prompts</strong>: äº¤äº’æ¨¡æ¿ (å¯å¤ç”¨çš„LLMäº¤äº’æ¨¡å¼)</ul></ul><p><strong>å›¾ç¤ºå»ºè®®</strong>ï¼šMCPåè®®æ¶æ„å›¾ï¼Œå±•ç¤ºClient-Serveré€šä¿¡æ¨¡å¼<p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>MCPä¸ä»…ä»…æ˜¯ä¸€ä¸ªåè®®ï¼Œå®ƒæ˜¯AIå·¥å…·ç”Ÿæ€ç³»ç»Ÿæ ‡å‡†åŒ–çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚
</span><span>ä¼ ç»Ÿçš„AIå·¥å…·é›†æˆé¢ä¸´ç€æ¥å£ä¸ç»Ÿä¸€ã€ç»´æŠ¤æˆæœ¬é«˜çš„é—®é¢˜ã€‚
</span><span>MCPæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ï¼Œè®©AIåº”ç”¨èƒ½å¤Ÿä»¥æ ‡å‡†åŒ–çš„æ–¹å¼è®¿é—®å¤–éƒ¨èƒ½åŠ›ã€‚
</span></code></pre><hr><h3 id=dart-slide-2-why-mcp-matters-jie-jue-aigong-ju-ji-cheng-de-tong-dian>ğŸ¯ Slide 2: Why MCP Matters? - è§£å†³AIå·¥å…·é›†æˆçš„ç—›ç‚¹</h3><p><strong>æ ¸å¿ƒå¯¹æ¯”</strong>ï¼š<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼<th>MCPæ–¹å¼<tbody><tr><td>å„è‡ªä¸ºæ”¿çš„APIæ¥å£<td>æ ‡å‡†åŒ–åè®®è§„èŒƒ<tr><td>å¤æ‚çš„å·¥å…·é›†æˆ<td>æ’ä»¶åŒ–çƒ­æ’æ‹”<tr><td>ä¸Šä¸‹æ–‡ç®¡ç†æ··ä¹±<td>ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡ç®¡ç†<tr><td>å®‰å…¨æ€§å„å¼‚<td>æ ‡å‡†åŒ–å®‰å…¨æ¨¡å‹</table><p><strong>å®é™…ä»·å€¼</strong>ï¼š<ul><li>âš¡ <strong>å¼€å‘æ•ˆç‡æå‡</strong>: ä»æ‰‹å·¥é›†æˆåˆ°æ ‡å‡†åŒ–é›†æˆ<li>ğŸ”’ <strong>å®‰å…¨æ€§ä¿éšœ</strong>: ç»Ÿä¸€çš„æƒé™æ§åˆ¶å’Œæ²™ç®±æ‰§è¡Œ<li>ğŸ”„ <strong>äº’æ“ä½œæ€§</strong>: ä¸€æ¬¡å¼€å‘ï¼Œå¤šå¹³å°ä½¿ç”¨<li>ğŸ“ˆ <strong>å¯æ‰©å±•æ€§</strong>: åŠ¨æ€å·¥å…·å‘ç°å’ŒåŠ è½½</ul><p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>åœ¨æˆ‘çš„å®é™…é¡¹ç›®ä¸­ï¼Œä½¿ç”¨MCPå°†åšå®¢ç®¡ç†ç³»ç»Ÿçš„å¼€å‘æ—¶é—´ä»2å‘¨ç¼©çŸ­åˆ°3å¤©ã€‚
</span><span>æ ‡å‡†åŒ–çš„æ¥å£è®©æˆ‘èƒ½å¤Ÿå¿«é€Ÿé›†æˆå¤šä¸ªAIæœåŠ¡æä¾›å•†ã€‚
</span></code></pre><hr><h3 id=dart-slide-3-mcpsheng-tai-xi-tong-xian-zhuang-xing-ye-cai-yong-qing-kuang>ğŸ¯ Slide 3: MCPç”Ÿæ€ç³»ç»Ÿç°çŠ¶ - è¡Œä¸šé‡‡ç”¨æƒ…å†µ</h3><p><strong>ä¸»æµæ”¯æŒæƒ…å†µ</strong>ï¼š<ul><li>âœ… <strong>Claude Desktop</strong>: åŸç”ŸMCPæ”¯æŒ<li>âœ… <strong>GitHub Copilot</strong>: é€šè¿‡æ‰©å±•æ”¯æŒMCP<li>âœ… <strong>OpenHands</strong>: æ·±åº¦é›†æˆMCPå·¥å…·ç³»ç»Ÿ<li>ğŸ”„ <strong>VS Code</strong>: é€šè¿‡Claudeæ’ä»¶æ”¯æŒ<li>ğŸ“ˆ <strong>ç¤¾åŒºç”Ÿæ€</strong>: 100+ MCPæœåŠ¡å™¨é¡¹ç›®</ul><p><strong>æŠ€æœ¯è¶‹åŠ¿</strong>ï¼š<ul><li><strong>æ ‡å‡†åŒ–è¿›ç¨‹</strong>: MCPæ­£åœ¨æˆä¸ºè¡Œä¸šæ ‡å‡†<li><strong>ç”Ÿæ€ç¹è£</strong>: ç¤¾åŒºé©±åŠ¨çš„å·¥å…·åº“å¿«é€Ÿå¢é•¿<li><strong>ä¼ä¸šé‡‡ç”¨</strong>: å¤§å‹ç§‘æŠ€å…¬å¸ç§¯ææ‹¥æŠ±</ul><p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>MCPçš„å¿«é€Ÿé‡‡ç”¨è¯æ˜äº†å¸‚åœºå¯¹æ ‡å‡†åŒ–AIå·¥å…·åè®®çš„è¿«åˆ‡éœ€æ±‚ã€‚
</span><span>ä»æˆ‘çš„è§‚å¯Ÿæ¥çœ‹ï¼Œ2025å¹´å°†æ˜¯MCPç”Ÿæ€çˆ†å‘çš„å…³é”®å¹´ä»½ã€‚
</span></code></pre><hr><h2 id=di-er-bu-fen-ji-zhu-jia-gou-shen-du-jie-xi-20fen-zhong>ç¬¬äºŒéƒ¨åˆ†ï¼šæŠ€æœ¯æ¶æ„æ·±åº¦è§£æ (20åˆ†é’Ÿ)</h2><h3 id=dart-slide-4-mcpxie-yi-jia-gou-ji-zhu-zhan-quan-jing-tu>ğŸ¯ Slide 4: MCPåè®®æ¶æ„ - æŠ€æœ¯æ ˆå…¨æ™¯å›¾</h3><p><strong>æ¶æ„å±‚æ¬¡</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span>â”‚           AIåº”ç”¨å±‚                   â”‚
</span><span>â”‚     (Claude Desktop, VS Code)      â”‚
</span><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
</span><span>â”‚           MCPå®¢æˆ·ç«¯                  â”‚
</span><span>â”‚        (åè®®å®ç°å±‚)                  â”‚
</span><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
</span><span>â”‚           ä¼ è¾“å±‚                     â”‚
</span><span>â”‚   (STDIO, SSE, SHTTP)              â”‚
</span><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
</span><span>â”‚           MCPæœåŠ¡å™¨                  â”‚
</span><span>â”‚    (ä¸šåŠ¡é€»è¾‘å®ç°å±‚)                  â”‚
</span><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
</span><span>â”‚         å¤–éƒ¨ç³»ç»Ÿé›†æˆ                 â”‚
</span><span>â”‚  (æ•°æ®åº“, API, æ–‡ä»¶ç³»ç»Ÿ)            â”‚
</span><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre><p><strong>é€šä¿¡åè®®å¯¹æ¯”</strong>ï¼š<ul><li><strong>STDIO</strong>: å‘½ä»¤è¡Œå·¥å…·é›†æˆï¼Œé€‚åˆå¼€å‘è°ƒè¯•<li><strong>SSE</strong>: å®æ—¶äº‹ä»¶æµï¼Œé€‚åˆWebåº”ç”¨<li><strong>SHTTP</strong>: å®‰å…¨HTTPï¼Œé€‚åˆåˆ†å¸ƒå¼éƒ¨ç½²</ul><p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>è¿™ä¸ªåˆ†å±‚æ¶æ„çš„è®¾è®¡éå¸¸ä¼˜é›…ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£ã€‚
</span><span>æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­é‡‡ç”¨äº†å¤šåè®®æ”¯æŒï¼Œå¤§å¤§æå‡äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚
</span></code></pre><hr><h3 id=dart-slide-5-fastmcp-vs-chuan-tong-mcp-xian-dai-hua-kai-fa-ti-yan>ğŸ¯ Slide 5: FastMCP vs ä¼ ç»ŸMCP - ç°ä»£åŒ–å¼€å‘ä½“éªŒ</h3><p><strong>æŠ€æœ¯å¯¹æ¯”</strong>ï¼š<table><thead><tr><th>ç»´åº¦<th>ä¼ ç»ŸMCP<th>FastMCP<tbody><tr><td><strong>å¼€å‘ä½“éªŒ</strong><td>æ‰‹åŠ¨åè®®å®ç°<td>è£…é¥°å™¨é£æ ¼API<tr><td><strong>ç±»å‹å®‰å…¨</strong><td>æ‰‹åŠ¨éªŒè¯<td>Pydanticè‡ªåŠ¨éªŒè¯<tr><td><strong>å¼‚æ­¥æ”¯æŒ</strong><td>å›è°ƒåœ°ç‹±<td>åŸç”Ÿasync/await<tr><td><strong>é”™è¯¯å¤„ç†</strong><td>æ‰‹åŠ¨æ•è·<td>è‡ªåŠ¨å¼‚å¸¸å¤„ç†<tr><td><strong>éƒ¨ç½²æ–¹å¼</strong><td>å¤æ‚é…ç½®<td>ä¸€é”®éƒ¨ç½²</table><p><strong>ä»£ç ç¤ºä¾‹å¯¹æ¯”</strong>ï¼š<p><strong>ä¼ ç»ŸMCPæ–¹å¼</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># ç¹ççš„æ‰‹åŠ¨å®ç°
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>MyMCPServer</span><span style=color:#eff1f5>:
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#96b5b4>__init__</span><span>(</span><span style=color:#bf616a>self</span><span>):
</span><span>        </span><span style=color:#bf616a>self</span><span>.</span><span style=color:#bf616a>setup_protocol</span><span>()
</span><span>        </span><span style=color:#bf616a>self</span><span>.</span><span style=color:#bf616a>register_handlers</span><span>()
</span><span>        
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>handle_tool_call</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>request</span><span>):
</span><span>        </span><span style=color:#65737e># æ‰‹åŠ¨éªŒè¯å‚æ•°
</span><span>        </span><span style=color:#65737e># æ‰‹åŠ¨é”™è¯¯å¤„ç†
</span><span>        </span><span style=color:#65737e># æ‰‹åŠ¨å“åº”æ ¼å¼åŒ–
</span></code></pre><p><strong>FastMCPæ–¹å¼</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># ç®€æ´çš„è£…é¥°å™¨é£æ ¼
</span><span style=color:#b48ead>from </span><span>mcp.server.fastmcp </span><span style=color:#b48ead>import </span><span>FastMCP
</span><span>
</span><span>mcp = </span><span style=color:#bf616a>FastMCP</span><span>("</span><span style=color:#a3be8c>My Server</span><span>")
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>calculate</span><span>(</span><span style=color:#bf616a>a</span><span>: int, </span><span style=color:#bf616a>b</span><span>: int) -> int:
</span><span>    </span><span style=color:#65737e>"""Calculate sum of two numbers"""
</span><span>    </span><span style=color:#b48ead>return </span><span>a + b
</span></code></pre><p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>FastMCPå°†MCPæœåŠ¡å™¨å¼€å‘çš„å¤æ‚åº¦é™ä½äº†70%ä»¥ä¸Šã€‚
</span><span>åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œä½¿ç”¨FastMCPè®©å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹MCPå¼€å‘ã€‚
</span></code></pre><hr><h3 id=dart-slide-6-san-da-he-xin-zu-jian-shen-du-jie-xi>ğŸ¯ Slide 6: ä¸‰å¤§æ ¸å¿ƒç»„ä»¶æ·±åº¦è§£æ</h3><p><strong>Resources - æ•°æ®æš´éœ²æœºåˆ¶</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span>@mcp.</span><span style=color:#bf616a>resource</span><span>("</span><span style=color:#a3be8c>user://profile/</span><span style=color:#d08770>{user_id}</span><span>")
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>get_user_profile</span><span>(</span><span style=color:#bf616a>user_id</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""è·å–ç”¨æˆ·æ¡£æ¡ˆä¿¡æ¯"""
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>fetch_user_data</span><span>(user_id)
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>resource</span><span>("</span><span style=color:#a3be8c>system://logs</span><span>")
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>get_system_logs</span><span>() -> str:
</span><span>    </span><span style=color:#65737e>"""è·å–ç³»ç»Ÿæ—¥å¿—"""
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>read_log_files</span><span>()
</span></code></pre><p><strong>Tools - åŠŸèƒ½æ‰§è¡Œæœºåˆ¶</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>send_email</span><span>(</span><span style=color:#bf616a>to</span><span>: str, </span><span style=color:#bf616a>subject</span><span>: str, </span><span style=color:#bf616a>body</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""å‘é€é‚®ä»¶"""
</span><span>    email_service.</span><span style=color:#bf616a>send</span><span>(to, subject, body)
</span><span>    </span><span style=color:#b48ead>return f</span><span>"</span><span style=color:#a3be8c>Email sent to </span><span>{to}"
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>create_file</span><span>(</span><span style=color:#bf616a>path</span><span>: str, </span><span style=color:#bf616a>content</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""åˆ›å»ºæ–‡ä»¶"""
</span><span>    </span><span style=color:#b48ead>with </span><span style=color:#96b5b4>open</span><span>(path, '</span><span style=color:#a3be8c>w</span><span>') </span><span style=color:#b48ead>as </span><span>f:
</span><span>        f.</span><span style=color:#bf616a>write</span><span>(content)
</span><span>    </span><span style=color:#b48ead>return f</span><span>"</span><span style=color:#a3be8c>File created: </span><span>{path}"
</span></code></pre><p><strong>Prompts - äº¤äº’æ¨¡æ¿</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span>@mcp.</span><span style=color:#bf616a>prompt</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>code_review_prompt</span><span>(</span><span style=color:#bf616a>code</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""ä»£ç å®¡æŸ¥æç¤ºæ¨¡æ¿"""
</span><span>    </span><span style=color:#b48ead>return f</span><span>"""
</span><span style=color:#a3be8c>Please review this code and provide feedback:
</span><span style=color:#a3be8c>
</span></code></pre><p>{code}<pre style=background:#2b303b;color:#c0c5ce><code><span>
</span><span>Focus on:
</span><span>- Code quality and best practices
</span><span>- Security considerations
</span><span>- Performance optimization opportunities
</span><span>"""
</span></code></pre><p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š<ul><li><strong>Resources</strong>: æ— å‰¯ä½œç”¨ï¼Œå¿«é€Ÿå“åº”<li><strong>Tools</strong>: å¯ä»¥æœ‰å‰¯ä½œç”¨ï¼Œæ‰§è¡Œæ“ä½œ<li><strong>Prompts</strong>: æ¨¡æ¿åŒ–ï¼Œå¯å¤ç”¨</ul><hr><h2 id=di-san-bu-fen-shi-zhan-kai-fa-zhi-nan-15fen-zhong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®æˆ˜å¼€å‘æŒ‡å— (15åˆ†é’Ÿ)</h2><h3 id=dart-slide-7-xiang-mu-chu-shi-hua-cong-ling-kai-shi-gou-jian-mcpfu-wu-qi>ğŸ¯ Slide 7: é¡¹ç›®åˆå§‹åŒ– - ä»é›¶å¼€å§‹æ„å»ºMCPæœåŠ¡å™¨</h3><p><strong>ç¯å¢ƒå‡†å¤‡</strong>ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#65737e># 1. åˆ›å»ºé¡¹ç›®
</span><span style=color:#bf616a>uv</span><span> init my-mcp-server
</span><span style=color:#96b5b4>cd</span><span> my-mcp-server
</span><span>
</span><span style=color:#65737e># 2. å®‰è£…ä¾èµ–
</span><span style=color:#bf616a>uv</span><span> add "</span><span style=color:#a3be8c>mcp[cli]</span><span>"
</span><span style=color:#bf616a>uv</span><span> add "</span><span style=color:#a3be8c>fastmcp</span><span>"
</span><span>
</span><span style=color:#65737e># 3. é¡¹ç›®ç»“æ„
</span><span style=color:#bf616a>my-mcp-server/
</span><span style=color:#bf616a>â”œâ”€â”€</span><span> src/
</span><span style=color:#bf616a>â”‚</span><span>   â”œâ”€â”€ __init__.py
</span><span style=color:#bf616a>â”‚</span><span>   â”œâ”€â”€ server.py          </span><span style=color:#65737e># ä¸»æœåŠ¡å™¨æ–‡ä»¶
</span><span style=color:#bf616a>â”‚</span><span>   â”œâ”€â”€ resources/         </span><span style=color:#65737e># èµ„æºæ¨¡å—
</span><span style=color:#bf616a>â”‚</span><span>   â”œâ”€â”€ tools/            </span><span style=color:#65737e># å·¥å…·æ¨¡å—
</span><span style=color:#bf616a>â”‚</span><span>   â””â”€â”€ prompts/          </span><span style=color:#65737e># æç¤ºæ¨¡æ¿
</span><span style=color:#bf616a>â”œâ”€â”€</span><span> tests/
</span><span style=color:#bf616a>â”œâ”€â”€</span><span> pyproject.toml
</span><span style=color:#bf616a>â””â”€â”€</span><span> README.md
</span></code></pre><p><strong>åŸºç¡€æœåŠ¡å™¨æ¨¡æ¿</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># src/server.py
</span><span style=color:#b48ead>from </span><span>mcp.server.fastmcp </span><span style=color:#b48ead>import </span><span>FastMCP
</span><span style=color:#b48ead>import </span><span>asyncio
</span><span>
</span><span style=color:#65737e># åˆ›å»ºæœåŠ¡å™¨å®ä¾‹
</span><span>mcp = </span><span style=color:#bf616a>FastMCP</span><span>("</span><span style=color:#a3be8c>My MCP Server</span><span>")
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>hello_world</span><span>(</span><span style=color:#bf616a>name</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""Say hello to someone"""
</span><span>    </span><span style=color:#b48ead>return f</span><span>"</span><span style=color:#a3be8c>Hello, </span><span>{name}</span><span style=color:#a3be8c>!</span><span>"
</span><span>
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>main</span><span>():
</span><span>    </span><span style=color:#65737e># å¯åŠ¨æœåŠ¡å™¨
</span><span>    </span><span style=color:#b48ead>await </span><span>mcp.</span><span style=color:#bf616a>run</span><span>()
</span><span>
</span><span style=color:#b48ead>if </span><span>__name__ == "</span><span style=color:#a3be8c>__main__</span><span>":
</span><span>    asyncio.</span><span style=color:#bf616a>run</span><span>(</span><span style=color:#bf616a>main</span><span>())
</span></code></pre><p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>é¡¹ç›®ç»“æ„çš„è®¾è®¡å†³å®šäº†åæœŸçš„å¯ç»´æŠ¤æ€§ã€‚
</span><span>æˆ‘å»ºè®®ä»ä¸€ä¸ªç®€å•çš„Hello Worldå¼€å§‹ï¼Œé€æ­¥æ·»åŠ å¤æ‚åŠŸèƒ½ã€‚
</span></code></pre><hr><h3 id=dart-slide-8-zui-jia-shi-jian-sheng-chan-ji-mcpfu-wu-qi-she-ji>ğŸ¯ Slide 8: æœ€ä½³å®è·µ - ç”Ÿäº§çº§MCPæœåŠ¡å™¨è®¾è®¡</h3><p><strong>1. æ¨¡å—åŒ–æ¶æ„è®¾è®¡</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># æŒ‰åŠŸèƒ½é¢†åŸŸåˆ†ç¦»
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>DatabaseMCPServer</span><span style=color:#eff1f5>(</span><span style=color:#a3be8c>FastMCP</span><span style=color:#eff1f5>):
</span><span>    </span><span style=color:#65737e>"""æ•°æ®åº“æ“ä½œç›¸å…³åŠŸèƒ½"""
</span><span>    </span><span style=color:#b48ead>pass
</span><span>
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>FileMCPServer</span><span style=color:#eff1f5>(</span><span style=color:#a3be8c>FastMCP</span><span style=color:#eff1f5>):
</span><span>    </span><span style=color:#65737e>"""æ–‡ä»¶ç³»ç»Ÿæ“ä½œåŠŸèƒ½"""
</span><span>    </span><span style=color:#b48ead>pass
</span><span>
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>APIMCPServer</span><span style=color:#eff1f5>(</span><span style=color:#a3be8c>FastMCP</span><span style=color:#eff1f5>):
</span><span>    </span><span style=color:#65737e>"""ç¬¬ä¸‰æ–¹APIé›†æˆåŠŸèƒ½"""
</span><span>    </span><span style=color:#b48ead>pass
</span></code></pre><p><strong>2. é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>safe_file_operation</span><span>(</span><span style=color:#bf616a>path</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""å®‰å…¨çš„æ–‡ä»¶æ“ä½œ"""
</span><span>    </span><span style=color:#b48ead>try</span><span>:
</span><span>        </span><span style=color:#65737e># éªŒè¯è·¯å¾„å®‰å…¨æ€§
</span><span>        </span><span style=color:#b48ead>if </span><span>not </span><span style=color:#bf616a>is_safe_path</span><span>(path):
</span><span>            </span><span style=color:#b48ead>raise </span><span style=color:#bf616a>ValueError</span><span>("</span><span style=color:#a3be8c>Unsafe file path</span><span>")
</span><span>            
</span><span>        </span><span style=color:#65737e># æ‰§è¡Œæ“ä½œ
</span><span>        result = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>process_file</span><span>(path)
</span><span>        </span><span style=color:#b48ead>return f</span><span>"</span><span style=color:#a3be8c>Success: </span><span>{result}"
</span><span>        
</span><span>    </span><span style=color:#b48ead>except </span><span>FileNotFoundError:
</span><span>        </span><span style=color:#b48ead>return </span><span>"</span><span style=color:#a3be8c>Error: File not found</span><span>"
</span><span>    </span><span style=color:#b48ead>except </span><span>PermissionError:
</span><span>        </span><span style=color:#b48ead>return </span><span>"</span><span style=color:#a3be8c>Error: Permission denied</span><span>"
</span><span>    </span><span style=color:#b48ead>except </span><span>Exception </span><span style=color:#b48ead>as </span><span>e:
</span><span>        logger.</span><span style=color:#bf616a>error</span><span>(</span><span style=color:#b48ead>f</span><span>"</span><span style=color:#a3be8c>Unexpected error: </span><span>{e}")
</span><span>        </span><span style=color:#b48ead>return </span><span>"</span><span style=color:#a3be8c>Error: Operation failed</span><span>"
</span></code></pre><p><strong>3. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>from </span><span>functools </span><span style=color:#b48ead>import </span><span>lru_cache
</span><span style=color:#b48ead>import </span><span>asyncio
</span><span>
</span><span style=color:#65737e># ç¼“å­˜æœºåˆ¶
</span><span>@</span><span style=color:#bf616a>lru_cache</span><span>(</span><span style=color:#bf616a>maxsize</span><span>=</span><span style=color:#d08770>100</span><span>)
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>expensive_computation</span><span>(</span><span style=color:#bf616a>data</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""ç¼“å­˜è®¡ç®—ç»“æœ"""
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>process_data</span><span>(data)
</span><span>
</span><span style=color:#65737e># æ‰¹å¤„ç†ä¼˜åŒ–
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>batch_process</span><span>(</span><span style=color:#bf616a>items</span><span>: list[str]) -> str:
</span><span>    </span><span style=color:#65737e>"""æ‰¹é‡å¤„ç†ä¼˜åŒ–"""
</span><span>    tasks = [</span><span style=color:#bf616a>process_item</span><span>(item) </span><span style=color:#b48ead>for </span><span>item </span><span style=color:#b48ead>in </span><span>items]
</span><span>    results = </span><span style=color:#b48ead>await </span><span>asyncio.</span><span style=color:#bf616a>gather</span><span>(*tasks)
</span><span>    </span><span style=color:#b48ead>return f</span><span>"</span><span style=color:#a3be8c>Processed </span><span>{</span><span style=color:#96b5b4>len</span><span>(results)}</span><span style=color:#a3be8c> items</span><span>"
</span></code></pre><p><strong>4. å®‰å…¨æ€§è€ƒè™‘</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>from </span><span>typing </span><span style=color:#b48ead>import </span><span>List
</span><span>
</span><span style=color:#65737e># æƒé™æ§åˆ¶
</span><span style=color:#bf616a>ALLOWED_OPERATIONS </span><span>= ["</span><span style=color:#a3be8c>read</span><span>", "</span><span style=color:#a3be8c>write</span><span>", "</span><span style=color:#a3be8c>execute</span><span>"]
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>secure_operation</span><span>(</span><span style=color:#bf616a>operation</span><span>: str, </span><span style=color:#bf616a>target</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""å®‰å…¨çš„æ“ä½œæ‰§è¡Œ"""
</span><span>    </span><span style=color:#b48ead>if </span><span>operation not in </span><span style=color:#bf616a>ALLOWED_OPERATIONS</span><span>:
</span><span>        </span><span style=color:#b48ead>raise </span><span style=color:#bf616a>ValueError</span><span>(</span><span style=color:#b48ead>f</span><span>"</span><span style=color:#a3be8c>Operation </span><span>{operation}</span><span style=color:#a3be8c> not allowed</span><span>")
</span><span>    
</span><span>    </span><span style=color:#65737e># è·¯å¾„éªŒè¯
</span><span>    </span><span style=color:#b48ead>if </span><span>not </span><span style=color:#bf616a>is_within_sandbox</span><span>(target):
</span><span>        </span><span style=color:#b48ead>raise </span><span style=color:#bf616a>ValueError</span><span>("</span><span style=color:#a3be8c>Target outside sandbox</span><span>")
</span><span>    
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>execute_secure</span><span>(operation, target)
</span></code></pre><hr><h3 id=dart-slide-9-bu-shu-yu-ji-cheng-duo-ping-tai-bu-shu-ce-lue>ğŸ¯ Slide 9: éƒ¨ç½²ä¸é›†æˆ - å¤šå¹³å°éƒ¨ç½²ç­–ç•¥</h3><p><strong>å¼€å‘ç¯å¢ƒæµ‹è¯•</strong>ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#65737e># MCP Inspector - æœ€ä½³è°ƒè¯•å·¥å…·
</span><span style=color:#bf616a>mcp</span><span> dev server.py
</span><span>
</span><span style=color:#65737e># å¸¦ä¾èµ–çš„å¼€å‘æ¨¡å¼
</span><span style=color:#bf616a>mcp</span><span> dev server.py</span><span style=color:#bf616a> --with</span><span> pandas</span><span style=color:#bf616a> --with</span><span> numpy
</span><span>
</span><span style=color:#65737e># æœ¬åœ°ä»£ç æŒ‚è½½
</span><span style=color:#bf616a>mcp</span><span> dev server.py</span><span style=color:#bf616a> --with-editable</span><span> .
</span></code></pre><p><strong>Claude Desktopé›†æˆ</strong>ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#65737e># ä¸€é”®å®‰è£…åˆ°Claude Desktop
</span><span style=color:#bf616a>mcp</span><span> install server.py
</span><span>
</span><span style=color:#65737e># è‡ªå®šä¹‰æœåŠ¡å™¨åç§°
</span><span style=color:#bf616a>mcp</span><span> install server.py</span><span style=color:#bf616a> --name </span><span>"</span><span style=color:#a3be8c>My Analytics Server</span><span>"
</span><span>
</span><span style=color:#65737e># ç¯å¢ƒå˜é‡é…ç½®
</span><span style=color:#bf616a>mcp</span><span> install server.py</span><span style=color:#bf616a> -v</span><span> API_KEY=abc123</span><span style=color:#bf616a> -v</span><span> DB_URL=postgres://...
</span></code></pre><p><strong>æ‰‹åŠ¨é…ç½®æ–¹å¼</strong>ï¼š<pre class=language-json data-lang=json style=background:#2b303b;color:#c0c5ce><code class=language-json data-lang=json><span style=color:#65737e>// Claude Desktopé…ç½®æ–‡ä»¶
</span><span>{
</span><span>  "</span><span style=color:#a3be8c>mcp</span><span>": {
</span><span>    "</span><span style=color:#a3be8c>mcpServers</span><span>": {
</span><span>      "</span><span style=color:#a3be8c>my-server</span><span>": {
</span><span>        "</span><span style=color:#a3be8c>command</span><span>": "</span><span style=color:#a3be8c>uv</span><span>",
</span><span>        "</span><span style=color:#a3be8c>args</span><span>": ["</span><span style=color:#a3be8c>run</span><span>", "</span><span style=color:#a3be8c>python</span><span>", "</span><span style=color:#a3be8c>src/server.py</span><span>"],
</span><span>        "</span><span style=color:#a3be8c>env</span><span>": {
</span><span>          "</span><span style=color:#a3be8c>API_KEY</span><span>": "</span><span style=color:#a3be8c>your-api-key</span><span>"
</span><span>        }
</span><span>      }
</span><span>    }
</span><span>  }
</span><span>}
</span></code></pre><p><strong>Dockeréƒ¨ç½²</strong>ï¼š<pre class=language-dockerfile data-lang=dockerfile style=background:#2b303b;color:#c0c5ce><code class=language-dockerfile data-lang=dockerfile><span style=color:#b48ead>FROM</span><span> python:3.11-slim
</span><span>
</span><span style=color:#b48ead>WORKDIR </span><span>/app
</span><span style=color:#b48ead>COPY</span><span> . .
</span><span>
</span><span style=color:#b48ead>RUN </span><span>pip install uv
</span><span style=color:#b48ead>RUN </span><span>uv pip install -r requirements.txt
</span><span>
</span><span style=color:#b48ead>EXPOSE </span><span>8000
</span><span>CMD ["</span><span style=color:#a3be8c>uv</span><span>", "</span><span style=color:#a3be8c>run</span><span>", "</span><span style=color:#a3be8c>python</span><span>", "</span><span style=color:#a3be8c>src/server.py</span><span>"]
</span></code></pre><p><strong>æ¼”è®²è¦ç‚¹</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>æˆ‘å¼ºçƒˆæ¨èå…ˆç”¨MCP Inspectoræµ‹è¯•ï¼Œå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚
</span><span>Dockeréƒ¨ç½²ä¸ºä¼ä¸šçº§åº”ç”¨æä¾›äº†æ ‡å‡†åŒ–çš„éƒ¨ç½²æ–¹æ¡ˆã€‚
</span></code></pre><hr><h2 id=di-si-bu-fen-shi-ji-an-li-fen-xi-10fen-zhong>ç¬¬å››éƒ¨åˆ†ï¼šå®é™…æ¡ˆä¾‹åˆ†æ (10åˆ†é’Ÿ)</h2><h3 id=dart-slide-10-an-li-yan-jiu-wo-de-bo-ke-guan-li-mcpfu-wu-qi>ğŸ¯ Slide 10: æ¡ˆä¾‹ç ”ç©¶ - æˆ‘çš„åšå®¢ç®¡ç†MCPæœåŠ¡å™¨</h3><p><strong>é¡¹ç›®èƒŒæ™¯</strong>ï¼š<ul><li><strong>éœ€æ±‚</strong>ï¼šæŠ€æœ¯åšå®¢ + ä¸½æ±Ÿå®¢æ ˆè¿è¥çš„åŒé‡å†…å®¹éœ€æ±‚<li><strong>æŒ‘æˆ˜</strong>ï¼šå¤šAIæä¾›å•†æ•´åˆã€æ–‡åŒ–å…ƒç´ å¤„ç†ã€è‡ªåŠ¨åŒ–å‘å¸ƒ<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå››ä¸ªä¸“ä¸šåŒ–MCPæœåŠ¡å™¨çš„åˆ†å¸ƒå¼æ¶æ„</ul><p><strong>æ¶æ„è®¾è®¡</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># å››ä¸ªä¸“ä¸šåŒ–æœåŠ¡å™¨
</span><span>blog_mcp_servers/
</span><span>â”œâ”€â”€ content_server.py      </span><span style=color:#65737e># åšå®¢å†…å®¹åˆ›ä½œ
</span><span>â”œâ”€â”€ guesthouse_server.py   </span><span style=color:#65737e># å®¢æ ˆç®¡ç†
</span><span>â”œâ”€â”€ media_server.py        </span><span style=color:#65737e># åª’ä½“ç”Ÿæˆ
</span><span>â””â”€â”€ management_server.py   </span><span style=color:#65737e># åšå®¢ç®¡ç†
</span></code></pre><p><strong>æ ¸å¿ƒåŠŸèƒ½å±•ç¤º</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># æ™ºèƒ½åšæ–‡ç”Ÿæˆ
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>generate_blog_post</span><span>(</span><span style=color:#bf616a>topic</span><span>: str, </span><span style=color:#bf616a>style</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""ç”Ÿæˆé«˜è´¨é‡æŠ€æœ¯åšæ–‡"""
</span><span>    </span><span style=color:#65737e># DeepSeekè´Ÿè´£ä¸­æ–‡å†…å®¹
</span><span>    chinese_content = </span><span style=color:#b48ead>await </span><span>deepseek_api.</span><span style=color:#bf616a>generate</span><span>(topic, style)
</span><span>    
</span><span>    </span><span style=color:#65737e># GPT-4è´Ÿè´£æŠ€æœ¯æ·±åº¦
</span><span>    technical_content = </span><span style=color:#b48ead>await </span><span>openai_api.</span><span style=color:#bf616a>enhance</span><span>(chinese_content)
</span><span>    
</span><span>    </span><span style=color:#65737e># è‡ªåŠ¨ç”ŸæˆZola frontmatter
</span><span>    frontmatter = </span><span style=color:#bf616a>generate_zola_metadata</span><span>(topic, technical_content)
</span><span>    
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>combine_content</span><span>(frontmatter, technical_content)
</span><span>
</span><span style=color:#65737e># æ–‡åŒ–å…ƒç´ å¤„ç†
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>design_cultural_space</span><span>(</span><span style=color:#bf616a>space_type</span><span>: str, </span><span style=color:#bf616a>elements</span><span>: List[str]) -> str:
</span><span>    </span><span style=color:#65737e>"""èåˆçº³è¥¿æ—æ–‡åŒ–çš„ç©ºé—´è®¾è®¡"""
</span><span>    </span><span style=color:#65737e># æ–‡åŒ–çœŸå®æ€§éªŒè¯
</span><span>    validated_elements = </span><span style=color:#bf616a>validate_cultural_authenticity</span><span>(elements)
</span><span>    
</span><span>    </span><span style=color:#65737e># ç©ºé—´è®¾è®¡ç”Ÿæˆ
</span><span>    design = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>generate_space_design</span><span>(space_type, validated_elements)
</span><span>    
</span><span>    </span><span style=color:#b48ead>return </span><span>design
</span></code></pre><p><strong>æŠ€æœ¯äº®ç‚¹</strong>ï¼š<ul><li><strong>å¤šAIæ™ºèƒ½è·¯ç”±</strong>: æ ¹æ®ä»»åŠ¡ç±»å‹é€‰æ‹©æœ€é€‚åˆçš„AIæ¨¡å‹<li><strong>æ–‡åŒ–ç®—æ³•åŒ–å¤„ç†</strong>: å°†çº³è¥¿æ—æ–‡åŒ–å…ƒç´ æ ‡å‡†åŒ–ä¸ºç®—æ³•å¯å¤„ç†çš„æ•°æ®<li><strong>ä¸€é”®éƒ¨ç½²</strong>: Claude Desktopæ— ç¼é›†æˆ</ul><p><strong>æ€§èƒ½æ•°æ®</strong>ï¼š<ul><li>ğŸ“ˆ <strong>æ•ˆç‡æå‡</strong>: åšå®¢åˆ›ä½œæ—¶é—´ä»4å°æ—¶é™è‡³30åˆ†é’Ÿ<li>ğŸ¯ <strong>è´¨é‡æå‡</strong>: SEOä¼˜åŒ–å’ŒæŠ€æœ¯æ·±åº¦æ˜¾è‘—æ”¹å–„<li>ğŸ”„ <strong>è¿ç»´ç®€åŒ–</strong>: è‡ªåŠ¨åŒ–å‘å¸ƒå’Œç®¡ç†æµç¨‹</ul><hr><h3 id=dart-slide-11-jia-gou-mo-shi-dui-bi-dan-ti-vs-wei-fu-wu-mcp>ğŸ¯ Slide 11: æ¶æ„æ¨¡å¼å¯¹æ¯” - å•ä½“ vs å¾®æœåŠ¡MCP</h3><p><strong>å•ä½“MCPæœåŠ¡å™¨</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªæœåŠ¡å™¨
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>MonolithMCPServer</span><span style=color:#eff1f5>(</span><span style=color:#a3be8c>FastMCP</span><span style=color:#eff1f5>):
</span><span>    @mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>blog_function</span><span>(</span><span style=color:#bf616a>self</span><span>): </span><span style=color:#b48ead>pass
</span><span>    
</span><span>    @mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>media_function</span><span>(</span><span style=color:#bf616a>self</span><span>): </span><span style=color:#b48ead>pass
</span><span>    
</span><span>    @mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>management_function</span><span>(</span><span style=color:#bf616a>self</span><span>): </span><span style=color:#b48ead>pass
</span></code></pre><p><strong>ä¼˜åŠ¿</strong>ï¼šç®€å•éƒ¨ç½²ã€å•ä¸€é…ç½® <strong>åŠ£åŠ¿</strong>ï¼šåŠŸèƒ½è€¦åˆã€éš¾ä»¥æ‰©å±•ã€æ•…éšœå½±å“é¢å¤§<p><strong>å¾®æœåŠ¡MCPæ¶æ„</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># æŒ‰é¢†åŸŸæ‹†åˆ†ä¸ºå¤šä¸ªä¸“ä¸šåŒ–æœåŠ¡å™¨
</span><span>blog_content_server = </span><span style=color:#bf616a>FastMCP</span><span>("</span><span style=color:#a3be8c>Blog Content</span><span>")
</span><span>media_generation_server = </span><span style=color:#bf616a>FastMCP</span><span>("</span><span style=color:#a3be8c>Media Generation</span><span>") 
</span><span>management_server = </span><span style=color:#bf616a>FastMCP</span><span>("</span><span style=color:#a3be8c>Management</span><span>")
</span></code></pre><p><strong>ä¼˜åŠ¿</strong>ï¼š<ul><li>âœ… <strong>èŒè´£æ¸…æ™°</strong>: æ¯ä¸ªæœåŠ¡å™¨ä¸“æ³¨ç‰¹å®šé¢†åŸŸ<li>âœ… <strong>ç‹¬ç«‹éƒ¨ç½²</strong>: å¯å•ç‹¬å‡çº§å’Œç»´æŠ¤<li>âœ… <strong>æ•…éšœéš”ç¦»</strong>: å•ä¸ªæœåŠ¡å™¨æ•…éšœä¸å½±å“å…¶ä»–åŠŸèƒ½<li>âœ… <strong>æŠ€æœ¯æ ˆçµæ´»</strong>: ä¸åŒæœåŠ¡å™¨å¯é‡‡ç”¨æœ€é€‚åˆçš„æŠ€æœ¯</ul><p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š<ul><li><strong>ç®€å•é¡¹ç›®</strong>: å•ä½“æ¶æ„ï¼Œå¿«é€Ÿå¼€å‘<li><strong>å¤æ‚ç³»ç»Ÿ</strong>: å¾®æœåŠ¡æ¶æ„ï¼Œé•¿æœŸç»´æŠ¤<li><strong>å›¢é˜Ÿåä½œ</strong>: å¾®æœåŠ¡æ¶æ„ï¼Œå¹¶è¡Œå¼€å‘</ul><hr><h2 id=di-wu-bu-fen-gao-ji-te-xing-yu-wei-lai-zhan-wang-10fen-zhong>ç¬¬äº”éƒ¨åˆ†ï¼šé«˜çº§ç‰¹æ€§ä¸æœªæ¥å±•æœ› (10åˆ†é’Ÿ)</h2><h3 id=dart-slide-12-gao-ji-te-xing-shen-fen-yan-zheng-yu-quan-xian-kong-zhi>ğŸ¯ Slide 12: é«˜çº§ç‰¹æ€§ - èº«ä»½éªŒè¯ä¸æƒé™æ§åˆ¶</h3><p><strong>OAuth2é›†æˆ</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>from </span><span>mcp.server.fastmcp </span><span style=color:#b48ead>import </span><span>FastMCP
</span><span style=color:#b48ead>from </span><span>mcp.server.security </span><span style=color:#b48ead>import </span><span>OAuthSettings
</span><span>
</span><span style=color:#65737e># OAuthé…ç½®
</span><span>oauth_settings = </span><span style=color:#bf616a>OAuthSettings</span><span>(
</span><span>    </span><span style=color:#bf616a>provider</span><span>="</span><span style=color:#a3be8c>custom</span><span>",
</span><span>    </span><span style=color:#bf616a>client_id</span><span>="</span><span style=color:#a3be8c>your-client-id</span><span>",
</span><span>    </span><span style=color:#bf616a>client_secret</span><span>="</span><span style=color:#a3be8c>your-client-secret</span><span>",
</span><span>    </span><span style=color:#bf616a>auth_url</span><span>="</span><span style=color:#a3be8c>https://auth.example.com/oauth/authorize</span><span>",
</span><span>    </span><span style=color:#bf616a>token_url</span><span>="</span><span style=color:#a3be8c>https://auth.example.com/oauth/token</span><span>",
</span><span>    </span><span style=color:#bf616a>valid_scopes</span><span>=["</span><span style=color:#a3be8c>read</span><span>", "</span><span style=color:#a3be8c>write</span><span>", "</span><span style=color:#a3be8c>admin</span><span>"]
</span><span>)
</span><span>
</span><span>mcp = </span><span style=color:#bf616a>FastMCP</span><span>("</span><span style=color:#a3be8c>Secure Server</span><span>", </span><span style=color:#bf616a>oauth_settings</span><span>=oauth_settings)
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>(</span><span style=color:#bf616a>required_scopes</span><span>=["</span><span style=color:#a3be8c>write</span><span>"])
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>secure_operation</span><span>(</span><span style=color:#bf616a>data</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""éœ€è¦å†™æƒé™çš„å®‰å…¨æ“ä½œ"""
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>process_secure_data</span><span>(data)
</span></code></pre><p><strong>æƒé™åˆ†çº§ç®¡ç†</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
</span><span style=color:#bf616a>ROLE_PERMISSIONS </span><span>= {
</span><span>    "</span><span style=color:#a3be8c>admin</span><span>": ["</span><span style=color:#a3be8c>read</span><span>", "</span><span style=color:#a3be8c>write</span><span>", "</span><span style=color:#a3be8c>delete</span><span>", "</span><span style=color:#a3be8c>manage</span><span>"],
</span><span>    "</span><span style=color:#a3be8c>editor</span><span>": ["</span><span style=color:#a3be8c>read</span><span>", "</span><span style=color:#a3be8c>write</span><span>"],
</span><span>    "</span><span style=color:#a3be8c>viewer</span><span>": ["</span><span style=color:#a3be8c>read</span><span>"]
</span><span>}
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>role_based_operation</span><span>(</span><span style=color:#bf616a>operation</span><span>: str, </span><span style=color:#bf616a>user_role</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""åŸºäºè§’è‰²çš„æ“ä½œæ§åˆ¶"""
</span><span>    </span><span style=color:#b48ead>if </span><span>operation not in ROLE_PERMISSIONS.</span><span style=color:#bf616a>get</span><span>(user_role, []):
</span><span>        </span><span style=color:#b48ead>raise </span><span style=color:#bf616a>PermissionError</span><span>(</span><span style=color:#b48ead>f</span><span>"</span><span style=color:#a3be8c>Role </span><span>{user_role}</span><span style=color:#a3be8c> cannot perform </span><span>{operation}")
</span><span>    
</span><span>    </span><span style=color:#b48ead>return </span><span style=color:#bf616a>execute_operation</span><span>(operation)
</span></code></pre><p><strong>APIå¯†é’¥ç®¡ç†</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>import </span><span>os
</span><span style=color:#b48ead>from </span><span>functools </span><span style=color:#b48ead>import </span><span>wraps
</span><span>
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>api_key_required</span><span>(</span><span style=color:#bf616a>func</span><span>):
</span><span>    </span><span style=color:#65737e>"""APIå¯†é’¥éªŒè¯è£…é¥°å™¨"""
</span><span>    @</span><span style=color:#bf616a>wraps</span><span>(func)
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>wrapper</span><span>(*</span><span style=color:#bf616a>args</span><span>, **</span><span style=color:#bf616a>kwargs</span><span>):
</span><span>        api_key = os.</span><span style=color:#bf616a>getenv</span><span>("</span><span style=color:#a3be8c>MCP_API_KEY</span><span>")
</span><span>        </span><span style=color:#b48ead>if </span><span>not </span><span style=color:#bf616a>validate_api_key</span><span>(api_key):
</span><span>            </span><span style=color:#b48ead>raise </span><span style=color:#bf616a>ValueError</span><span>("</span><span style=color:#a3be8c>Invalid API key</span><span>")
</span><span>        </span><span style=color:#b48ead>return </span><span style=color:#bf616a>func</span><span>(*args, **kwargs)
</span><span>    </span><span style=color:#b48ead>return </span><span>wrapper
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span>@</span><span style=color:#bf616a>api_key_required
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>protected_function</span><span>() -> str:
</span><span>    </span><span style=color:#65737e>"""éœ€è¦APIå¯†é’¥çš„ä¿æŠ¤åŠŸèƒ½"""
</span><span>    </span><span style=color:#b48ead>return </span><span>"</span><span style=color:#a3be8c>Authorized access granted</span><span>"
</span></code></pre><hr><h3 id=dart-slide-13-xing-neng-you-hua-sheng-chan-ji-xing-neng-diao-you>ğŸ¯ Slide 13: æ€§èƒ½ä¼˜åŒ– - ç”Ÿäº§çº§æ€§èƒ½è°ƒä¼˜</h3><p><strong>è¿æ¥æ± ç®¡ç†</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>import </span><span>asyncio
</span><span style=color:#b48ead>import </span><span>aiohttp
</span><span style=color:#b48ead>from </span><span>contextlib </span><span style=color:#b48ead>import </span><span>asynccontextmanager
</span><span>
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>OptimizedMCPServer</span><span style=color:#eff1f5>(</span><span style=color:#a3be8c>FastMCP</span><span style=color:#eff1f5>):
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#96b5b4>__init__</span><span>(</span><span style=color:#bf616a>self</span><span>):
</span><span>        </span><span style=color:#96b5b4>super</span><span>().</span><span style=color:#96b5b4>__init__</span><span>("</span><span style=color:#a3be8c>Optimized Server</span><span>")
</span><span>        </span><span style=color:#bf616a>self</span><span>.session = </span><span style=color:#d08770>None
</span><span>        </span><span style=color:#bf616a>self</span><span>.db_pool = </span><span style=color:#d08770>None
</span><span>    
</span><span>    @</span><span style=color:#bf616a>asynccontextmanager
</span><span>    </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>lifespan</span><span>(</span><span style=color:#bf616a>self</span><span>):
</span><span>        </span><span style=color:#65737e># å¯åŠ¨æ—¶åˆå§‹åŒ–è¿æ¥æ± 
</span><span>        </span><span style=color:#bf616a>self</span><span>.session = aiohttp.</span><span style=color:#bf616a>ClientSession</span><span>(
</span><span>            </span><span style=color:#bf616a>connector</span><span>=aiohttp.</span><span style=color:#bf616a>TCPConnector</span><span>(</span><span style=color:#bf616a>limit</span><span>=</span><span style=color:#d08770>100</span><span>)
</span><span>        )
</span><span>        </span><span style=color:#bf616a>self</span><span>.db_pool = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>create_db_pool</span><span>(
</span><span>            </span><span style=color:#bf616a>max_connections</span><span>=</span><span style=color:#d08770>20
</span><span>        )
</span><span>        
</span><span>        </span><span style=color:#b48ead>try</span><span>:
</span><span>            </span><span style=color:#b48ead>yield
</span><span>        </span><span style=color:#b48ead>finally</span><span>:
</span><span>            </span><span style=color:#65737e># å…³é—­æ—¶æ¸…ç†èµ„æº
</span><span>            </span><span style=color:#b48ead>await </span><span style=color:#bf616a>self</span><span>.session.</span><span style=color:#bf616a>close</span><span>()
</span><span>            </span><span style=color:#b48ead>await </span><span style=color:#bf616a>self</span><span>.db_pool.</span><span style=color:#bf616a>close</span><span>()
</span></code></pre><p><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>import </span><span>redis
</span><span style=color:#b48ead>from </span><span>functools </span><span style=color:#b48ead>import </span><span>wraps
</span><span>
</span><span style=color:#65737e># Redisç¼“å­˜è£…é¥°å™¨
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>cached</span><span>(</span><span style=color:#bf616a>ttl</span><span>: int = </span><span style=color:#d08770>300</span><span>):
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>decorator</span><span>(</span><span style=color:#bf616a>func</span><span>):
</span><span>        @</span><span style=color:#bf616a>wraps</span><span>(func)
</span><span>        </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>wrapper</span><span>(*</span><span style=color:#bf616a>args</span><span>, **</span><span style=color:#bf616a>kwargs</span><span>):
</span><span>            </span><span style=color:#65737e># ç”Ÿæˆç¼“å­˜é”®
</span><span>            cache_key = </span><span style=color:#b48ead>f</span><span>"{func.__name__}</span><span style=color:#a3be8c>:</span><span>{</span><span style=color:#96b5b4>hash</span><span>(</span><span style=color:#bf616a>str</span><span>(args))}"
</span><span>            
</span><span>            </span><span style=color:#65737e># å°è¯•ä»ç¼“å­˜è·å–
</span><span>            cached_result = </span><span style=color:#b48ead>await </span><span>redis_client.</span><span style=color:#bf616a>get</span><span>(cache_key)
</span><span>            </span><span style=color:#b48ead>if </span><span>cached_result:
</span><span>                </span><span style=color:#b48ead>return </span><span>json.</span><span style=color:#bf616a>loads</span><span>(cached_result)
</span><span>            
</span><span>            </span><span style=color:#65737e># æ‰§è¡Œå‡½æ•°å¹¶ç¼“å­˜ç»“æœ
</span><span>            result = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>func</span><span>(*args, **kwargs)
</span><span>            </span><span style=color:#b48ead>await </span><span>redis_client.</span><span style=color:#bf616a>setex</span><span>(
</span><span>                cache_key, ttl, json.</span><span style=color:#bf616a>dumps</span><span>(result)
</span><span>            )
</span><span>            </span><span style=color:#b48ead>return </span><span>result
</span><span>        </span><span style=color:#b48ead>return </span><span>wrapper
</span><span>    </span><span style=color:#b48ead>return </span><span>decorator
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span>@</span><span style=color:#bf616a>cached</span><span>(</span><span style=color:#bf616a>ttl</span><span>=</span><span style=color:#d08770>600</span><span>)  </span><span style=color:#65737e># ç¼“å­˜10åˆ†é’Ÿ
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>expensive_operation</span><span>(</span><span style=color:#bf616a>data</span><span>: str) -> str:
</span><span>    </span><span style=color:#65737e>"""æ˜‚è´µçš„è®¡ç®—æ“ä½œ"""
</span><span>    </span><span style=color:#b48ead>return await </span><span style=color:#bf616a>compute_heavy_task</span><span>(data)
</span></code></pre><p><strong>æ‰¹å¤„ç†ä¼˜åŒ–</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>from </span><span>collections </span><span style=color:#b48ead>import </span><span>defaultdict
</span><span style=color:#b48ead>import </span><span>asyncio
</span><span>
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>BatchProcessor</span><span style=color:#eff1f5>:
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#96b5b4>__init__</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>batch_size</span><span>: int = </span><span style=color:#d08770>10</span><span>, </span><span style=color:#bf616a>timeout</span><span>: float = </span><span style=color:#d08770>1.0</span><span>):
</span><span>        </span><span style=color:#bf616a>self</span><span>.batch_size = batch_size
</span><span>        </span><span style=color:#bf616a>self</span><span>.timeout = timeout
</span><span>        </span><span style=color:#bf616a>self</span><span>.pending_requests = </span><span style=color:#bf616a>defaultdict</span><span>(list)
</span><span>    
</span><span>    </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>process_batch</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>operation</span><span>: str, </span><span style=color:#bf616a>items</span><span>: list):
</span><span>        </span><span style=color:#65737e>"""æ‰¹é‡å¤„ç†è¯·æ±‚"""
</span><span>        </span><span style=color:#b48ead>if </span><span style=color:#96b5b4>len</span><span>(items) >= </span><span style=color:#bf616a>self</span><span>.batch_size:
</span><span>            </span><span style=color:#b48ead>return await </span><span style=color:#bf616a>self</span><span>.</span><span style=color:#bf616a>_execute_batch</span><span>(operation, items)
</span><span>        
</span><span>        </span><span style=color:#65737e># ç­‰å¾…æ›´å¤šè¯·æ±‚æˆ–è¶…æ—¶
</span><span>        </span><span style=color:#b48ead>await </span><span>asyncio.</span><span style=color:#bf616a>sleep</span><span>(</span><span style=color:#bf616a>self</span><span>.timeout)
</span><span>        </span><span style=color:#b48ead>return await </span><span style=color:#bf616a>self</span><span>.</span><span style=color:#bf616a>_execute_batch</span><span>(operation, items)
</span><span>
</span><span>@mcp.</span><span style=color:#bf616a>tool</span><span>()
</span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>optimized_batch_operation</span><span>(</span><span style=color:#bf616a>items</span><span>: list[str]) -> str:
</span><span>    </span><span style=color:#65737e>"""ä¼˜åŒ–çš„æ‰¹å¤„ç†æ“ä½œ"""
</span><span>    processor = </span><span style=color:#bf616a>BatchProcessor</span><span>(</span><span style=color:#bf616a>batch_size</span><span>=</span><span style=color:#d08770>50</span><span>, </span><span style=color:#bf616a>timeout</span><span>=</span><span style=color:#d08770>0.5</span><span>)
</span><span>    results = </span><span style=color:#b48ead>await </span><span>processor.</span><span style=color:#bf616a>process_batch</span><span>("</span><span style=color:#a3be8c>process</span><span>", items)
</span><span>    </span><span style=color:#b48ead>return f</span><span>"</span><span style=color:#a3be8c>Processed </span><span>{</span><span style=color:#96b5b4>len</span><span>(results)}</span><span style=color:#a3be8c> items efficiently</span><span>"
</span></code></pre><p><strong>ç›‘æ§å’ŒæŒ‡æ ‡</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>import </span><span>time
</span><span style=color:#b48ead>from </span><span>prometheus_client </span><span style=color:#b48ead>import </span><span>Counter, Histogram
</span><span>
</span><span style=color:#65737e># PrometheusæŒ‡æ ‡
</span><span style=color:#bf616a>REQUEST_COUNT </span><span>= </span><span style=color:#bf616a>Counter</span><span>('</span><span style=color:#a3be8c>mcp_requests_total</span><span>', '</span><span style=color:#a3be8c>Total requests</span><span>')
</span><span style=color:#bf616a>REQUEST_DURATION </span><span>= </span><span style=color:#bf616a>Histogram</span><span>('</span><span style=color:#a3be8c>mcp_request_duration_seconds</span><span>', '</span><span style=color:#a3be8c>Request duration</span><span>')
</span><span>
</span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>monitor_performance</span><span>(</span><span style=color:#bf616a>func</span><span>):
</span><span>    </span><span style=color:#65737e>"""æ€§èƒ½ç›‘æ§è£…é¥°å™¨"""
</span><span>    @</span><span style=color:#bf616a>wraps</span><span>(func)
</span><span>    </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>wrapper</span><span>(*</span><span style=color:#bf616a>args</span><span>, **</span><span style=color:#bf616a>kwargs</span><span>):
</span><span>        start_time = time.</span><span style=color:#bf616a>time</span><span>()
</span><span>        REQUEST_COUNT.</span><span style=color:#bf616a>inc</span><span>()
</span><span>        
</span><span>        </span><span style=color:#b48ead>try</span><span>:
</span><span>            result = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>func</span><span>(*args, **kwargs)
</span><span>            </span><span style=color:#b48ead>return </span><span>result
</span><span>        </span><span style=color:#b48ead>finally</span><span>:
</span><span>            duration = time.</span><span style=color:#bf616a>time</span><span>() - start_time
</span><span>            REQUEST_DURATION.</span><span style=color:#bf616a>observe</span><span>(duration)
</span><span>    
</span><span>    </span><span style=color:#b48ead>return </span><span>wrapper
</span></code></pre><hr><h3 id=dart-slide-14-wei-lai-fa-zhan-qu-shi-mcpsheng-tai-zhan-wang>ğŸ¯ Slide 14: æœªæ¥å‘å±•è¶‹åŠ¿ - MCPç”Ÿæ€å±•æœ›</h3><p><strong>æŠ€æœ¯æ¼”è¿›æ–¹å‘</strong>ï¼š<ol><li><p><strong>åè®®æ ‡å‡†åŒ–</strong></p> <ul><li>ğŸ”„ <strong>è·¨å¹³å°å…¼å®¹</strong>: æ›´å¤šAIåº”ç”¨åŸç”Ÿæ”¯æŒMCP<li>ğŸ“‹ <strong>è§„èŒƒå®Œå–„</strong>: åè®®è§„èŒƒçš„æŒç»­æ”¹è¿›å’Œæ‰©å±•<li>ğŸŒ <strong>å›½é™…æ ‡å‡†</strong>: å¯èƒ½æˆä¸ºIEEEæˆ–W3Cæ ‡å‡†</ul><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p> <ul><li>âš¡ <strong>é›¶æ‹·è´é€šä¿¡</strong>: å‡å°‘æ•°æ®ä¼ è¾“å¼€é”€<li>ğŸ”€ <strong>å¹¶å‘å¤„ç†</strong>: æ›´å¥½çš„å¹¶å‘å’Œå¼‚æ­¥å¤„ç†<li>ğŸ“Š <strong>æµå¼å¤„ç†</strong>: æ”¯æŒå¤§æ•°æ®æµå¼ä¼ è¾“</ul><li><p><strong>å®‰å…¨å¢å¼º</strong></p> <ul><li>ğŸ” <strong>é›¶ä¿¡ä»»æ¶æ„</strong>: åŸºäºé›¶ä¿¡ä»»åŸåˆ™çš„å®‰å…¨æ¨¡å‹<li>ğŸ›¡ï¸ <strong>æ²™ç®±éš”ç¦»</strong>: æ›´å¼ºçš„èµ„æºéš”ç¦»å’Œå®‰å…¨æ§åˆ¶<li>ğŸ” <strong>å®¡è®¡è¿½è¸ª</strong>: å®Œæ•´çš„æ“ä½œå®¡è®¡å’Œåˆè§„æ”¯æŒ</ul></ol><p><strong>ç”Ÿæ€ç³»ç»Ÿå‘å±•</strong>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#65737e># æœªæ¥å¯èƒ½çš„MCPæ‰©å±•
</span><span style=color:#b48ead>class </span><span style=color:#ebcb8b>NextGenMCPServer</span><span style=color:#eff1f5>(</span><span style=color:#a3be8c>FastMCP</span><span style=color:#eff1f5>):
</span><span>    </span><span style=color:#65737e># AIä»£ç†åä½œ
</span><span>    @mcp.</span><span style=color:#bf616a>agent_collaboration</span><span>()
</span><span>    </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>multi_agent_task</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>agents</span><span>: List[str]) -> str:
</span><span>        </span><span style=color:#65737e>"""å¤šAIä»£ç†åä½œä»»åŠ¡"""
</span><span>        </span><span style=color:#b48ead>pass
</span><span>    
</span><span>    </span><span style=color:#65737e># æµå¼æ•°æ®å¤„ç†
</span><span>    @mcp.</span><span style=color:#bf616a>stream_processor</span><span>()
</span><span>    </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>process_data_stream</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>stream</span><span>: AsyncIterator) -> AsyncIterator:
</span><span>        </span><span style=color:#65737e>"""æµå¼æ•°æ®å¤„ç†"""
</span><span>        </span><span style=color:#b48ead>async for </span><span>data </span><span style=color:#b48ead>in </span><span>stream:
</span><span>            processed = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>process_item</span><span>(data)
</span><span>            </span><span style=color:#b48ead>yield </span><span>processed
</span><span>    
</span><span>    </span><span style=color:#65737e># è‡ªé€‚åº”æ‰©ç¼©å®¹
</span><span>    @mcp.</span><span style=color:#bf616a>auto_scaling</span><span>(</span><span style=color:#bf616a>min_instances</span><span>=</span><span style=color:#d08770>1</span><span>, </span><span style=color:#bf616a>max_instances</span><span>=</span><span style=color:#d08770>10</span><span>)
</span><span>    </span><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>scalable_operation</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>load</span><span>: int) -> str:
</span><span>        </span><span style=color:#65737e>"""è‡ªåŠ¨æ‰©ç¼©å®¹çš„æ“ä½œ"""
</span><span>        </span><span style=color:#b48ead>pass
</span></code></pre><p><strong>è¡Œä¸šåº”ç”¨é¢„æµ‹</strong>ï¼š<ul><li>ğŸ¥ <strong>åŒ»ç–—å¥åº·</strong>: æ ‡å‡†åŒ–çš„åŒ»ç–—AIå·¥å…·ç”Ÿæ€<li>ğŸ“ <strong>æ•™è‚²ç§‘ç ”</strong>: å­¦æœ¯AIåŠ©æ‰‹çš„ç»Ÿä¸€å¹³å°<li>ğŸ­ <strong>ä¼ä¸šåº”ç”¨</strong>: ä¼ä¸šçº§AIå·¥å…·çš„æ ‡å‡†åŒ–æ¥å£<li>ğŸŒ <strong>ç‰©è”ç½‘</strong>: IoTè®¾å¤‡çš„AIèƒ½åŠ›æ ‡å‡†åŒ–</ul><p><strong>å¼€å‘è€…æœºé‡</strong>ï¼š<ul><li>ğŸ“š <strong>å­¦ä¹ æŠ•èµ„</strong>: ç°åœ¨å­¦ä¹ MCPï¼Œæœªæ¥æ”¶ç›Šå·¨å¤§<li>ğŸ› ï¸ <strong>å·¥å…·å¼€å‘</strong>: æ„å»ºä¸“ä¸šåŒ–çš„MCPå·¥å…·åº“<li>ğŸ¢ <strong>å•†ä¸šæœºä¼š</strong>: MCPæœåŠ¡çš„å•†ä¸šåŒ–è¿è¥</ul><hr><h3 id=dart-slide-15-zong-jie-yu-xing-dong-zhi-nan>ğŸ¯ Slide 15: æ€»ç»“ä¸è¡ŒåŠ¨æŒ‡å—</h3><p><strong>æ ¸å¿ƒè¦ç‚¹å›é¡¾</strong>ï¼š<ol><li><strong>MCPçš„ä»·å€¼</strong>: æ ‡å‡†åŒ–AIå·¥å…·é›†æˆçš„æ¸¸æˆè§„åˆ™æ”¹å˜è€…<li><strong>æŠ€æœ¯é€‰æ‹©</strong>: FastMCPæ˜¯ç°ä»£åŒ–MCPå¼€å‘çš„æœ€ä½³é€‰æ‹©<li><strong>æ¶æ„è®¾è®¡</strong>: å¾®æœåŠ¡æ¶æ„é€‚åˆå¤æ‚ç³»ç»Ÿï¼Œå•ä½“æ¶æ„é€‚åˆå¿«é€ŸåŸå‹<li><strong>æœ€ä½³å®è·µ</strong>: å®‰å…¨ã€æ€§èƒ½ã€å¯ç»´æŠ¤æ€§æ˜¯ç”Ÿäº§çº§ç³»ç»Ÿçš„å…³é”®<li><strong>æœªæ¥è¶‹åŠ¿</strong>: MCPå°†æˆä¸ºAIå·¥å…·ç”Ÿæ€çš„åŸºç¡€è®¾æ–½</ol><p><strong>ç«‹å³è¡ŒåŠ¨è®¡åˆ’</strong>ï¼š<p><strong>Week 1 - åŸºç¡€å­¦ä¹ </strong>ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#65737e># 1. ç¯å¢ƒæ­å»º
</span><span style=color:#bf616a>uv</span><span> init my-first-mcp-server
</span><span style=color:#96b5b4>cd</span><span> my-first-mcp-server
</span><span style=color:#bf616a>uv</span><span> add "</span><span style=color:#a3be8c>mcp[cli]</span><span>" fastmcp
</span><span>
</span><span style=color:#65737e># 2. Hello World
</span><span style=color:#bf616a>mcp</span><span> dev hello_world.py
</span><span>
</span><span style=color:#65737e># 3. Claude Desktopé›†æˆ
</span><span style=color:#bf616a>mcp</span><span> install hello_world.py
</span></code></pre><p><strong>Week 2 - å®æˆ˜ç»ƒä¹ </strong>ï¼š<ul><li>ğŸ¯ æ„å»ºä¸€ä¸ªåŒ…å«Resourcesã€Toolsã€Promptsçš„å®Œæ•´æœåŠ¡å™¨<li>ğŸ”§ å®ç°é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•<li>ğŸš€ å°è¯•éƒ¨ç½²åˆ°äº‘å¹³å°</ul><p><strong>Week 3 - è¿›é˜¶ç‰¹æ€§</strong>ï¼š<ul><li>ğŸ” æ·»åŠ èº«ä»½éªŒè¯å’Œæƒé™æ§åˆ¶<li>âš¡ å®ç°æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜<li>ğŸ“Š é›†æˆç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†</ul><p><strong>Week 4 - ç”Ÿäº§éƒ¨ç½²</strong>ï¼š<ul><li>ğŸ³ Dockerå®¹å™¨åŒ–éƒ¨ç½²<li>ğŸ”„ CI/CDæµæ°´çº¿é›†æˆ<li>ğŸ“ˆ ç”Ÿäº§ç¯å¢ƒç›‘æ§å’Œç»´æŠ¤</ul><p><strong>æ¨èèµ„æº</strong>ï¼š<ul><li>ğŸ“– <strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href=https://modelcontextprotocol.io>modelcontextprotocol.io</a><li>ğŸ± <strong>GitHubé¡¹ç›®</strong>: <a href=https://github.com/modelcontextprotocol/python-sdk>mcp-python-sdk</a><li>ğŸ’¬ <strong>ç¤¾åŒºè®¨è®º</strong>: <a href=https://github.com/modelcontextprotocol/python-sdk/discussions>GitHub Discussions</a><li>ğŸ¬ <strong>æˆ‘çš„å®æˆ˜æ¡ˆä¾‹</strong>: <a href=https://github.com/Polly2014/Blog-MCP-Server>Blog MCP Server</a></ul><p><strong>ç»“è¯­</strong>ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>MCPä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯åè®®ï¼Œå®ƒä»£è¡¨äº†AIå·¥å…·ç”Ÿæ€çš„æœªæ¥æ–¹å‘ã€‚
</span><span>æŒæ¡MCPå¼€å‘æŠ€èƒ½ï¼Œå°±æ˜¯æŒæ¡äº†AIæ—¶ä»£çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚
</span><span>ç°åœ¨å¼€å§‹å­¦ä¹ MCPï¼Œæ‚¨å°†åœ¨è¿™ä¸ªå¿«é€Ÿå‘å±•çš„é¢†åŸŸå æ®å…ˆå‘ä¼˜åŠ¿ã€‚
</span></code></pre><hr><h2 id=dart-pptshe-ji-jian-yi>ğŸ¯ PPTè®¾è®¡å»ºè®®</h2><h3 id=shi-jue-feng-ge>è§†è§‰é£æ ¼</h3><ul><li><strong>ä¸»è‰²è°ƒ</strong>: æ·±è“è‰²(#1e3a8a) + ç”µå…‰è“(#3b82f6)<li><strong>è¾…åŠ©è‰²</strong>: ç»¿è‰²(#10b981) + æ©™è‰²(#f59e0b)<li><strong>å­—ä½“</strong>: æ ‡é¢˜ç”¨ç°ä»£æ— è¡¬çº¿å­—ä½“ï¼Œæ­£æ–‡ç”¨æ¸…æ™°æ˜“è¯»å­—ä½“<li><strong>å›¾æ ‡</strong>: ä½¿ç”¨ä¸€è‡´çš„çº¿æ€§å›¾æ ‡é£æ ¼</ul><h3 id=dong-hua-xiao-guo>åŠ¨ç”»æ•ˆæœ</h3><ul><li><strong>è¿›å…¥åŠ¨ç”»</strong>: æ·¡å…¥ + è½»å¾®ä¸Šç§»<li><strong>å¼ºè°ƒåŠ¨ç”»</strong>: è„‰å†² + é«˜äº®<li><strong>åˆ‡æ¢åŠ¨ç”»</strong>: å¹³æ»‘çš„å·¦å³æ»‘åŠ¨<li><strong>ä»£ç å±•ç¤º</strong>: æ‰“å­—æœºæ•ˆæœ</ul><h3 id=hu-dong-yuan-su>äº’åŠ¨å…ƒç´ </h3><ul><li><strong>å®æ—¶æ¼”ç¤º</strong>: å‡†å¤‡MCP Inspectorçš„ç°åœºæ¼”ç¤º<li><strong>ä»£ç ç¼–è¾‘</strong>: VS Codeå®æ—¶ç¼–ç æ¼”ç¤º<li><strong>Q&Aç¯èŠ‚</strong>: æ¯ä¸ªéƒ¨åˆ†ç»“æŸåçš„è®¨è®ºæ—¶é—´<li><strong>å®æˆ˜ç»ƒä¹ </strong>: æä¾›åŠ¨æ‰‹ç»ƒä¹ çš„GitHubä»“åº“</ul><h3 id=fu-zhu-cai-liao>è¾…åŠ©ææ–™</h3><ul><li><strong>ç¤ºä¾‹ä»£ç </strong>: å®Œæ•´çš„GitHubä»“åº“<li><strong>é…ç½®æ–‡ä»¶</strong>: å³ç”¨çš„é…ç½®æ¨¡æ¿<li><strong>æ–‡æ¡£é“¾æ¥</strong>: æ•´ç†çš„å­¦ä¹ èµ„æºæ¸…å•<li><strong>è”ç³»æ–¹å¼</strong>: åç»­æŠ€æœ¯äº¤æµæ¸ é“</ul><hr><p><strong>æ€»æ¼”è®²æ—¶é•¿</strong>: 60åˆ†é’Ÿ <strong>ç›®æ ‡å—ä¼—</strong>: AIå¼€å‘è€…ã€æŠ€æœ¯æ¶æ„å¸ˆã€äº§å“ç»ç† <strong>æŠ€æœ¯æ°´å¹³</strong>: ä¸­çº§åˆ°é«˜çº§ <strong>å®æˆ˜å¯¼å‘</strong>: æä¾›å®Œæ•´çš„ä»£ç ç¤ºä¾‹å’Œéƒ¨ç½²æŒ‡å—</div><div class=navigation></div></div><div id=giscus-container><h2>ç•™è¨€ä¸è®¨è®º</h2><div class=giscus></div></div><script data-category="Blog Comments" async crossorigin data-category-id=DIC_kwDOL45duM4CnjlZ data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=Polly2014/polly2014.github.io data-repo-id=R_kgDOL45duA data-strict=0 data-theme=noborder_light src=https://giscus.app/client.js></script></div></div><script>document.addEventListener('DOMContentLoaded',function(){const c=document.querySelector('.menu-toggle');const d=document.querySelector('.sidebar');const e=document.querySelector('.overlay');function a(){d.classList.toggle('active');e.classList.toggle('active')}c.addEventListener('click',a);e.addEventListener('click',a);let f=0;let g=0;document.addEventListener('touchstart',h=>{f=h.changedTouches[0].screenX},false);document.addEventListener('touchend',h=>{g=h.changedTouches[0].screenX;b()},false);function b(){const h=g- f;if(h>50&&f<30){d.classList.add('active');e.classList.add('active')}else if(h<-50&&d.classList.contains('active')){d.classList.remove('active');e.classList.remove('active')}}})</script>