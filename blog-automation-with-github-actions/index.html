<!doctype html><html><head><title>Polly Blog - AI Assistant, Tutorials, and Insights</title><meta content="Explore Polly Blog for AI tutorials, insights, and updates on cutting-edge technology." name=description><meta content="Polly, Blog, AI Blog, AI Assistant, Tutorials, Technology Blog, Baoli Wang" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta content="text/html; charset=utf-8" http-equiv=content-type><link href=https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css rel=stylesheet><link href=https://polly2014.github.io/css/style_new.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-8JD13N7PHS" async></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-8JD13N7PHS')</script><body><div class=menu-toggle><img alt=Menu src=https://polly2014.github.io/images/polly.png></div><div class=overlay></div><div class="pure-g container"><div class="sidebar pure-u-1 pure-u-md-1-5"><div class=title><a class=pure-menu-heading href=https://polly2014.github.io> <img class="avatar pure-img-responsive" src=https://polly2014.github.io/images/polly.png> </a><div class=introduction><p>Polly's Blog</div><div class=nav><ul class=nav-links><li><a href=https://polly2014.github.io><i class="fas fa-home"></i>Home</a><li><a href=https://polly2014.github.io/archive><i class="fas fa-archive"></i>Archive</a><li><a href=https://polly2014.github.io/tags><i class="fas fa-folder"></i>Category</a><li><a href=https://polly2014.github.io/blog><i class="fas fa-file-alt"></i>Posts</a><li><a href=https://polly2014.github.io/publication><i class="fas fa-file-pdf"></i>Research</a><li><a href=https://polly2014.github.io/changelog><i class="fas fa-history"></i>Change log</a><li><a href=https://polly2014.github.io/about><i class="fas fa-info-circle"></i>About Me</a></ul></div><div class=social><ul class=social-links><li><a href=mailto:26716201@qq.com><i class="fas fa-envelope"></i></a><li><a href=https://twitter.com/Polly__007><i class="fab fa-twitter"></i></a><li><a href=https://www.linkedin.com/in/baoliwang><i class="fab fa-linkedin-in"></i></a><li><a href=https://github.com/Polly2014><i class="fab fa-github"></i></a></ul></div></div></div><div class="content pure-u-1 pure-u-md-4-5"><div class=blog-post><h1>GitHub Actions: 实现Zola博客的自动化部署</h1><div class=content><p>管理一个 Zola 博客是一件令人愉快的事情，但手动构建和部署博客的步骤可能会随着时间的推移变得繁琐。在本文中，我们将探讨如何利用 <strong>GitHub Actions</strong> 来完全自动化 Zola 博客的构建和部署过程。这种方法消除了手动干预的需要，使得工作流程更加高效且无错误。<h2 id=dang-qian-gong-zuo-liu-cheng-de-tiao-zhan>当前工作流程的挑战</h2><p>之前，管理 Zola 博客的工作流程包括以下步骤：<ol><li>在 <code>www.polly.com</code> 仓库中修改博客内容或配置。<li>本地运行 <code>zola build</code> 生成 <code>public</code> 文件夹中的静态文件。<li>手动将 <code>public</code> 文件夹的内容复制到 <code>polly2014.github.io</code> 仓库。<li>将更改推送到 GitHub，从而触发 GitHub Pages 部署。</ol><p>虽然这种工作流程可以正常工作，但它耗时且容易出错，尤其是忘记构建或推送更改时。<h2 id=wei-shi-yao-xuan-ze-github-actions>为什么选择 GitHub Actions？</h2><p>GitHub Actions 是一个强大的 CI/CD 工具，允许直接在 GitHub 仓库中自动化任务。使用 GitHub Actions，可以：<ul><li>自动化构建和部署过程。<li>确保部署管道的一致性。<li>节省时间并减少人为错误的风险。</ul><h2 id=github-pages-yu-github-actions-de-dui-bi>GitHub Pages 与 GitHub Actions 的对比</h2><table><thead><tr><th>特性<th>GitHub Pages<th>GitHub Actions<tbody><tr><td><strong>自动化程度</strong><td>需要手动构建和推送<td>完全自动化<tr><td><strong>灵活性</strong><td>仅支持静态文件部署<td>支持复杂的构建和部署逻辑<tr><td><strong>适用场景</strong><td>简单的静态网站<td>需要频繁更新或复杂流程的项目<tr><td><strong>集成能力</strong><td>无法轻松集成其他工具<td>可集成测试、代码检查等工具<tr><td><strong>学习成本</strong><td>低<td>需要编写和配置 Workflow 文件</table><p>如果博客更新频率较低且不需要复杂的构建流程，GitHub Pages 是一个简单的选择。但如果希望提高效率并减少手动操作，GitHub Actions 是更好的选择。<h2 id=shi-yong-github-actions-she-zhi-zola-zi-dong-hua-bu-shu>使用 GitHub Actions 设置 Zola 自动化部署</h2><p>以下是设置 GitHub Actions 自动化部署 Zola 博客的步骤。<h3 id=di-yi-bu-chuang-jian-workflow-wen-jian>第一步：创建 Workflow 文件</h3><p>在 <code>www.polly.com</code> 仓库中，创建一个新文件 <code>.github/workflows/deploy.yml</code>，内容如下：<pre class=language-yaml data-lang=yaml style=background:#2b303b;color:#c0c5ce><code class=language-yaml data-lang=yaml><span style=color:#bf616a>name</span><span>: </span><span style=color:#a3be8c>Deploy Zola Blog
</span><span>
</span><span style=color:#d08770>on</span><span>:
</span><span>  </span><span style=color:#bf616a>push</span><span>:
</span><span>    </span><span style=color:#bf616a>branches</span><span>:
</span><span>      - </span><span style=color:#a3be8c>main  </span><span style=color:#65737e># 监听 main 分支的提交
</span><span>
</span><span style=color:#bf616a>jobs</span><span>:
</span><span>  </span><span style=color:#bf616a>build-and-deploy</span><span>:
</span><span>    </span><span style=color:#bf616a>runs-on</span><span>: </span><span style=color:#a3be8c>ubuntu-latest
</span><span>
</span><span>    </span><span style=color:#bf616a>steps</span><span>:
</span><span>    - </span><span style=color:#bf616a>name</span><span>: </span><span style=color:#a3be8c>Checkout Source Code
</span><span>      </span><span style=color:#bf616a>uses</span><span>: </span><span style=color:#a3be8c>actions/checkout@v3
</span><span>      </span><span style=color:#bf616a>with</span><span>:
</span><span>        </span><span style=color:#bf616a>fetch-depth</span><span>: </span><span style=color:#d08770>1
</span><span>
</span><span>    - </span><span style=color:#bf616a>name</span><span>: </span><span style=color:#a3be8c>Install Zola
</span><span>      </span><span style=color:#bf616a>run</span><span>: </span><span style=color:#b48ead>|
</span><span style=color:#a3be8c>        curl -sSf https://sh.rustup.rs | sh -s -- -y
</span><span style=color:#a3be8c>        export PATH="$HOME/.cargo/bin:$PATH"
</span><span style=color:#a3be8c>        cargo install zola
</span><span style=color:#a3be8c>
</span><span>    - </span><span style=color:#bf616a>name</span><span>: </span><span style=color:#a3be8c>Build Zola Site
</span><span>      </span><span style=color:#bf616a>run</span><span>: </span><span style=color:#a3be8c>zola build
</span><span>
</span><span>    - </span><span style=color:#bf616a>name</span><span>: </span><span style=color:#a3be8c>Deploy to polly2014.github.io
</span><span>      </span><span style=color:#bf616a>uses</span><span>: </span><span style=color:#a3be8c>peaceiris/actions-gh-pages@v3
</span><span>      </span><span style=color:#bf616a>with</span><span>:
</span><span>        </span><span style=color:#bf616a>github_token</span><span>: </span><span style=color:#a3be8c>${{ secrets.GITHUB_TOKEN }}
</span><span>        </span><span style=color:#bf616a>publish_dir</span><span>: </span><span style=color:#a3be8c>./public
</span><span>        </span><span style=color:#bf616a>external_repository</span><span>: </span><span style=color:#a3be8c>polly2014/polly2014.github.io
</span><span>        </span><span style=color:#bf616a>publish_branch</span><span>: </span><span style=color:#a3be8c>main
</span></code></pre><h3 id=di-er-bu-workflow-de-guan-jian-dian>第二步：Workflow 的关键点</h3><ol><li><p><strong>触发条件</strong>：</p> <ul><li>Workflow 在每次推送到 <code>main</code> 分支时触发。</ul><li><p><strong>安装 Zola</strong>：</p> <ul><li>使用 Rust 的包管理工具 <code>cargo</code> 安装 Zola。</ul><li><p><strong>构建站点</strong>：</p> <ul><li>运行 <code>zola build</code> 命令生成 <code>public</code> 文件夹中的静态文件。</ul><li><p><strong>部署</strong>：</p> <ul><li>使用 <code>peaceiris/actions-gh-pages</code> Action 将 <code>public</code> 文件夹的内容部署到 <code>polly2014.github.io</code> 仓库。</ul></ol><h3 id=di-san-bu-ce-shi-workflow>第三步：测试 Workflow</h3><p>提交 Workflow 文件后，对博客进行更改并推送到 <code>main</code> 分支。GitHub Actions 将自动：<ol><li>检出源代码。<li>安装 Zola。<li>构建站点。<li>将生成的文件部署到 <code>polly2014.github.io</code> 仓库。</ol><p>可以在仓库的 <strong>Actions</strong> 标签中监控 Workflow 的进度。<h2 id=xin-gong-zuo-liu-cheng-de-you-shi>新工作流程的优势</h2><ul><li><strong>自动化</strong>：无需手动构建和复制文件。<li><strong>一致性</strong>：确保每次部署过程都相同。<li><strong>高效性</strong>：节省时间并减少错误风险。</ul><h2 id=jie-lun>结论</h2><p>通过将GitHub Actions集成到Zola博客工作流程中，可以实现完全自动化的构建和部署管道。这不仅简化了工作流程，还让你能够专注于真正重要的事情——创作优质内容。<p>如果还没有尝试过 GitHub Actions，现在正是探索其功能并将您的 Zola 博客提升到新水平的最佳时机！</div><div class=navigation></div></div><div id=giscus-container><h2>留言与讨论</h2><div class=giscus></div></div><script data-category="Blog Comments" async crossorigin data-category-id=DIC_kwDOL45duM4CnjlZ data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=Polly2014/polly2014.github.io data-repo-id=R_kgDOL45duA data-strict=0 data-theme=preferred_color_scheme src=https://giscus.app/client.js></script></div></div><script>document.addEventListener('DOMContentLoaded',function(){const c=document.querySelector('.menu-toggle');const d=document.querySelector('.sidebar');const e=document.querySelector('.overlay');function a(){d.classList.toggle('active');e.classList.toggle('active')}c.addEventListener('click',a);e.addEventListener('click',a);let f=0;let g=0;document.addEventListener('touchstart',h=>{f=h.changedTouches[0].screenX},false);document.addEventListener('touchend',h=>{g=h.changedTouches[0].screenX;b()},false);function b(){const h=g- f;if(h>50&&f<30){d.classList.add('active');e.classList.add('active')}else if(h<-50&&d.classList.contains('active')){d.classList.remove('active');e.classList.remove('active')}}})</script>