<!doctype html><html><head><title>ğŸ” CopilotX v2.3.3ï¼šä¸€ä¸ªç©ºè¡Œå¼•å‘çš„ã€Œè¡€æ¡ˆã€</title><meta content="å½“ OpenAI Python SDK å‘ CopilotX å‘èµ· streaming è¯·æ±‚æ—¶ï¼Œæ€»æ˜¯æŠ¥ JSONDecodeErrorã€‚è°ƒè¯•å‘ç°æ ¹å› æ˜¯ä¸€è¡Œçœ‹ä¼¼æ— å®³çš„ if line: è¿‡æ»¤æ‰äº† SSE åè®®çš„äº‹ä»¶åˆ†éš”ç¬¦â€”â€”ä¸€ä¸ªç©ºè¡Œã€‚ä¿®å¤åªæ”¹äº†ä¸€è¡Œä»£ç ï¼Œä½†èƒŒåæ˜¯å¯¹ SSE åè®®çš„æ·±å…¥ç†è§£ã€‚" name=description><meta content="Polly, Blog, AI Blog, AI Assistant, Tutorials, Technology Blog, Baoli Wang" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content=#333 name=theme-color><meta content=article property=og:type><meta content=https://polly.wang/copilotx-v233-sse-streaming-fix/ property=og:url><meta content="ğŸ” CopilotX v2.3.3ï¼šä¸€ä¸ªç©ºè¡Œå¼•å‘çš„ã€Œè¡€æ¡ˆã€" property=og:title><meta content="å½“ OpenAI Python SDK å‘ CopilotX å‘èµ· streaming è¯·æ±‚æ—¶ï¼Œæ€»æ˜¯æŠ¥ JSONDecodeErrorã€‚è°ƒè¯•å‘ç°æ ¹å› æ˜¯ä¸€è¡Œçœ‹ä¼¼æ— å®³çš„ if line: è¿‡æ»¤æ‰äº† SSE åè®®çš„äº‹ä»¶åˆ†éš”ç¬¦â€”â€”ä¸€ä¸ªç©ºè¡Œã€‚ä¿®å¤åªæ”¹äº†ä¸€è¡Œä»£ç ï¼Œä½†èƒŒåæ˜¯å¯¹ SSE åè®®çš„æ·±å…¥ç†è§£ã€‚" property=og:description><meta content=https://polly.wang/copilotx-v233-sse-streaming-fix/cover.jpg property=og:image><meta content="Polly Blog" property=og:site_name><meta content=zh_CN property=og:locale><meta content=summary_large_image name=twitter:card><meta content=https://polly.wang/copilotx-v233-sse-streaming-fix/ name=twitter:url><meta content="ğŸ” CopilotX v2.3.3ï¼šä¸€ä¸ªç©ºè¡Œå¼•å‘çš„ã€Œè¡€æ¡ˆã€" name=twitter:title><meta content="å½“ OpenAI Python SDK å‘ CopilotX å‘èµ· streaming è¯·æ±‚æ—¶ï¼Œæ€»æ˜¯æŠ¥ JSONDecodeErrorã€‚è°ƒè¯•å‘ç°æ ¹å› æ˜¯ä¸€è¡Œçœ‹ä¼¼æ— å®³çš„ if line: è¿‡æ»¤æ‰äº† SSE åè®®çš„äº‹ä»¶åˆ†éš”ç¬¦â€”â€”ä¸€ä¸ªç©ºè¡Œã€‚ä¿®å¤åªæ”¹äº†ä¸€è¡Œä»£ç ï¼Œä½†èƒŒåæ˜¯å¯¹ SSE åè®®çš„æ·±å…¥ç†è§£ã€‚" name=twitter:description><meta content=https://polly.wang/copilotx-v233-sse-streaming-fix/cover.jpg name=twitter:image><meta content=2026-02-20T00:00:00 property=article:published_time><meta content=Polly property=article:author><meta content=CopilotX property=article:tag><meta content=SSE property=article:tag><meta content=Streaming property=article:tag><meta content="OpenAI SDK" property=article:tag><meta content=Debug property=article:tag><meta content="API ä»£ç†" property=article:tag><link rel="shortcut icon" href=https://polly.wang/images/polly.ico type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=icon type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=apple-touch-icon><link href=https://polly.wang/vendor/purecss/pure-min.css rel=stylesheet><link href=https://polly.wang/vendor/purecss/grids-responsive-min.css rel=stylesheet><link href=https://polly.wang/vendor/font-awesome/css/all.min.css rel=stylesheet><link href=https://polly.wang/css/style_new.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-8JD13N7PHS" async></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-8JD13N7PHS')</script><body><div class=menu-toggle><img alt=Menu src=https://polly.wang/images/polly.png></div><div class=overlay></div><div class="pure-g container"><div class="sidebar pure-u-1 pure-u-md-1-5"><div class=title><a class=pure-menu-heading href=https://polly.wang> <img class="avatar pure-img-responsive" src=https://polly.wang/images/polly.png> </a><div class=introduction><p>Polly's Blog</div><div class=nav><ul class=nav-links><li><a href=https://polly.wang><i class="fas fa-home"></i>Home</a><li><a href=https://polly.wang/archive><i class="fas fa-archive"></i>Archive</a><li><a href=https://polly.wang/category><i class="fas fa-folder"></i>Category</a><li><a href=https://polly.wang/blog><i class="fas fa-file-alt"></i>Posts</a><li><a href=https://polly.wang/cfp><i class="fas fa-calendar-alt"></i>CFP</a><li><a href=https://polly.wang/publication><i class="fas fa-file-pdf"></i>Research</a><li><a href=https://polly.wang/changelog><i class="fas fa-history"></i>Change Log</a><li><a href=https://polly.wang/about><i class="fas fa-info-circle"></i>About Me</a></ul></div><div class=social><ul class=social-links><li><a href=mailto:26716201@qq.com><i class="fas fa-envelope"></i></a><li><a href=https://twitter.com/Polly__007><i class="fab fa-twitter"></i></a><li><a href=https://www.linkedin.com/in/baoliwang><i class="fab fa-linkedin-in"></i></a><li><a href=https://github.com/Polly2014><i class="fab fa-github"></i></a></ul></div></div></div><div class="content pure-u-1 pure-u-md-4-5"><div class=blog-post><h1>ğŸ” CopilotX v2.3.3ï¼šä¸€ä¸ªç©ºè¡Œå¼•å‘çš„ã€Œè¡€æ¡ˆã€</h1><div class=cover-image><img alt="ğŸ” CopilotX v2.3.3ï¼šä¸€ä¸ªç©ºè¡Œå¼•å‘çš„ã€Œè¡€æ¡ˆã€" loading=lazy src=cover.jpg></div><div class=content><pre style=background:#2b303b;color:#c0c5ce><code><span>Extra data: line 2 column 1 (char 160)
</span></code></pre><p>è·‘ç¿»è¯‘å®éªŒçš„æ—¶å€™ï¼Œterminal åˆ·å‡ºäº†è¿™è¡Œé”™è¯¯ã€‚ä¸‰ä¸ª streaming æµ‹è¯•ï¼Œå…¨å†›è¦†æ²¡ã€‚</p><span id=continue-reading></span><h2 id=bei-jing-shi-yan-xu-yao-streaming>èƒŒæ™¯ï¼šå®éªŒéœ€è¦ Streaming</h2><p>æ¥ä¸Šå›ï¼š<a href=/copilotx-v23-tools-support-journey>CopilotX v2.3 è®© OpenClaw ç»ˆäºèƒ½åŠ¨æ‰‹äº†</a>ã€‚<p>è¿™æ¬¡çš„åœºæ™¯ä¸åŒã€‚æˆ‘åœ¨åš ContextWeave è®ºæ–‡çš„è¡¥å……å®éªŒï¼ˆEXP18ï¼‰ï¼Œéœ€è¦é€šè¿‡ CopilotX è°ƒç”¨ Claude Sonnet 4 å’Œ Gemini 2.5 Pro ç¿»è¯‘ 100K å­—ç¬¦çš„æ–‡æ¡£ã€‚å®éªŒè„šæœ¬ç”¨çš„æ˜¯ OpenAI Python SDKï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>from </span><span>openai </span><span style=color:#b48ead>import </span><span>OpenAI
</span><span>
</span><span>client = </span><span style=color:#bf616a>OpenAI</span><span>(
</span><span>    </span><span style=color:#bf616a>base_url</span><span>="</span><span style=color:#a3be8c>https://api.polly.wang/v1</span><span>",
</span><span>    </span><span style=color:#bf616a>api_key</span><span>="</span><span style=color:#a3be8c>polly-copilotx-xxx</span><span>"
</span><span>)
</span><span>
</span><span>response = client.chat.completions.</span><span style=color:#bf616a>create</span><span>(
</span><span>    </span><span style=color:#bf616a>model</span><span>="</span><span style=color:#a3be8c>claude-sonnet-4</span><span>",
</span><span>    </span><span style=color:#bf616a>messages</span><span>=[{"</span><span style=color:#a3be8c>role</span><span>": "</span><span style=color:#a3be8c>user</span><span>", "</span><span style=color:#a3be8c>content</span><span>": huge_document}],
</span><span>    </span><span style=color:#bf616a>stream</span><span>=</span><span style=color:#d08770>True</span><span>,
</span><span>    </span><span style=color:#bf616a>max_tokens</span><span>=</span><span style=color:#d08770>16384
</span><span>)
</span><span>
</span><span style=color:#b48ead>for </span><span>chunk </span><span style=color:#b48ead>in </span><span>response:  </span><span style=color:#65737e># ğŸ’¥ JSONDecodeError!
</span><span>    </span><span style=color:#d08770>...
</span></code></pre><p>Non-streaming ä¸€åˆ‡æ­£å¸¸ã€‚ä½† streaming æ˜¯å¿…é¡»çš„â€”â€”100K æ–‡æ¡£ç¿»è¯‘åŠ¨è¾„å‡ åˆ†é’Ÿï¼Œä¸ç”¨ streaming çš„è¯ 120 ç§’ timeout ä¼šæŠŠè¯·æ±‚æ€æ‰ã€‚<h2 id=zhen-duan-160-ge-zi-fu-chu-duan-lie>è¯Šæ–­ï¼š160 ä¸ªå­—ç¬¦å¤„æ–­è£‚</h2><p><code>Extra data: line 2 column 1 (char 160)</code> â€”â€” è¿™ä¸ªé”™è¯¯ä¿¡æ¯å¾ˆç²¾ç¡®ï¼šJSON è§£æå™¨åœ¨ç¬¬ 160 ä¸ªå­—ç¬¦å¤„é‡åˆ°äº†ã€Œå¤šä½™çš„æ•°æ®ã€ã€‚<p>è¿™æ„å‘³ç€ SDK æœŸæœ›æ”¶åˆ°ä¸€ä¸ª JSON å¯¹è±¡ï¼Œä½†å®é™…æ”¶åˆ°çš„æ˜¯ä¸¤ä¸ªï¼ˆæˆ–æ›´å¤šï¼‰JSON å¯¹è±¡æ‹¼åœ¨ä¸€èµ·ã€‚<p>æˆ‘ç”¨ <code>curl</code> ç›´æ¥çœ‹åŸå§‹ SSE è¾“å‡ºï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>curl -s --no-buffer -X</span><span> POST https://api.polly.wang/v1/chat/completions \
</span><span style=color:#bf616a>  -H </span><span>"</span><span style=color:#a3be8c>Authorization: Bearer </span><span>$</span><span style=color:#bf616a>KEY</span><span>" \
</span><span style=color:#bf616a>  -d </span><span>'</span><span style=color:#a3be8c>{"model":"gpt-4o","messages":[{"role":"user","content":"Say hi"}],"stream":true}</span><span>' \
</span><span>  | </span><span style=color:#bf616a>head -20
</span></code></pre><p>è¾“å‡ºï¼ˆä¿®å¤å‰ï¼‰ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>data: {"choices":[...],"id":"chatcmpl-xxx"}data: {"choices":[...],"id":"chatcmpl-xxx"}data: {"choices":[...],"id":"chatcmpl-xxx"}data: [DONE]
</span></code></pre><p>æ‰€æœ‰ <code>data:</code> è¡Œ<strong>ç²˜åœ¨ä¸€èµ·äº†</strong>ã€‚æ²¡æœ‰ç©ºè¡Œåˆ†éš”ã€‚<h2 id=sse-xie-yi-kong-xing-shi-ling-hun>SSE åè®®ï¼šç©ºè¡Œæ˜¯çµé­‚</h2><p>Server-Sent Events (SSE) æ˜¯ä¸€ä¸ªç®€å•ä½†ä¸¥æ ¼çš„åè®®ã€‚æ ‡å‡†æ ¼å¼é•¿è¿™æ ·ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>data: {"id":"chunk1","choices":[...]}\n
</span><span>\n                                      â† ç©ºè¡Œ = äº‹ä»¶ç»“æŸ
</span><span>data: {"id":"chunk2","choices":[...]}\n
</span><span>\n                                      â† ç©ºè¡Œ = äº‹ä»¶ç»“æŸ
</span><span>data: [DONE]\n
</span><span>\n
</span></code></pre><p>æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ª <code>data:</code> è¡Œå’Œä¸€ä¸ª<strong>ç©ºè¡Œ</strong>ç»„æˆã€‚ç©ºè¡Œæ˜¯äº‹ä»¶ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚<p>OpenAI Python SDKï¼ˆä»¥åŠä»»ä½•æ ‡å‡† SSE å®¢æˆ·ç«¯ï¼‰ä¾èµ–ç©ºè¡Œæ¥åˆ‡åˆ†äº‹ä»¶ã€‚æ²¡æœ‰ç©ºè¡Œï¼ŒSDK å°±æŠŠå¤šä¸ª JSON å¯¹è±¡å½“æˆä¸€ä¸ªæ¥è§£æ â†’ ğŸ’¥ <code>Extra data</code>ã€‚<h2 id=gen-yin-si-ge-zi-fu-de-bug>æ ¹å› ï¼šå››ä¸ªå­—ç¬¦çš„ Bug</h2><p>æ‰“å¼€ CopilotX çš„ streaming ä»£ç ï¼ˆ<a href=https://github.com/Polly2014/CopilotX/blob/main/src/copilotx/proxy/client.py>client.py</a>ï¼‰ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>chat_completions_stream</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>payload</span><span>: dict) -> AsyncIterator[bytes]:
</span><span>    </span><span style=color:#65737e>"""POST /chat/completions with stream=true â€” yields raw SSE lines."""
</span><span>    </span><span style=color:#b48ead>async with </span><span style=color:#bf616a>self</span><span>._client.</span><span style=color:#bf616a>stream</span><span>("</span><span style=color:#a3be8c>POST</span><span>", url, </span><span style=color:#bf616a>json</span><span>=payload, </span><span style=color:#d08770>...</span><span>) </span><span style=color:#b48ead>as </span><span>resp:
</span><span>        </span><span style=color:#b48ead>async for </span><span>line </span><span style=color:#b48ead>in </span><span>resp.</span><span style=color:#bf616a>aiter_lines</span><span>():
</span><span>            </span><span style=color:#b48ead>if </span><span>line:                          </span><span style=color:#65737e># â† ğŸ› å°±æ˜¯è¿™è¡Œ
</span><span>                </span><span style=color:#b48ead>yield </span><span>(line + "</span><span style=color:#96b5b4>\n</span><span>").</span><span style=color:#bf616a>encode</span><span>("</span><span style=color:#a3be8c>utf-8</span><span>")
</span><span>        </span><span style=color:#b48ead>yield b</span><span>"</span><span style=color:#96b5b4>\n</span><span>"
</span></code></pre><p><code>httpx.aiter_lines()</code> æŒ‰ <code>\n</code> æ‹†åˆ†æµã€‚åŸå§‹ SSE æµé•¿è¿™æ ·ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>data: {"id":"chunk1",...}\n     â†’ line = 'data: {"id":"chunk1",...}'
</span><span>\n                               â†’ line = ''  (ç©ºå­—ç¬¦ä¸²ï¼)
</span><span>data: {"id":"chunk2",...}\n     â†’ line = 'data: {"id":"chunk2",...}'
</span><span>\n                               â†’ line = ''
</span></code></pre><p><code>if line:</code> åœ¨ Python ä¸­æŠŠç©ºå­—ç¬¦ä¸²åˆ¤ä¸º <code>False</code>ï¼Œäºæ˜¯æ‰€æœ‰ç©ºè¡Œè¢«è¿‡æ»¤æ‰äº†ã€‚<p>SSE äº‹ä»¶åˆ†éš”ç¬¦ â†’ ç©ºè¡Œ â†’ ç©ºå­—ç¬¦ä¸² â†’ <code>if line:</code> è·³è¿‡ â†’ äº‹ä»¶ç²˜è¿ â†’ JSON è§£æå¤±è´¥ã€‚<p>å››ä¸ªå­—ç¬¦ï¼ˆ<code>if l</code>ï¼‰ï¼Œæ¯æ‰äº†æ•´ä¸ª streamingã€‚<h2 id=xiu-fu-shan-diao-yi-xing>ä¿®å¤ï¼šåˆ æ‰ä¸€è¡Œ</h2><pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>async for </span><span>line </span><span style=color:#b48ead>in </span><span>resp.</span><span style=color:#bf616a>aiter_lines</span><span>():
</span><span>    </span><span style=color:#65737e># Yield ALL lines including empty ones â€” empty lines are
</span><span>    </span><span style=color:#65737e># SSE event delimiters and MUST be preserved for clients
</span><span>    </span><span style=color:#65737e># (e.g. OpenAI Python SDK) that rely on them to separate
</span><span>    </span><span style=color:#65737e># JSON chunks.
</span><span>    </span><span style=color:#b48ead>yield </span><span>(line + "</span><span style=color:#96b5b4>\n</span><span>").</span><span style=color:#bf616a>encode</span><span>("</span><span style=color:#a3be8c>utf-8</span><span>")
</span></code></pre><p>å»æ‰ <code>if line:</code> å®ˆå«ï¼Œè®©ç©ºè¡ŒåŸæ ·é€ä¼ ã€‚<p>ä¿®å¤åçš„ curl è¾“å‡ºï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>data: {"choices":[...],"id":"chatcmpl-xxx"}
</span><span>
</span><span>data: {"choices":[...],"id":"chatcmpl-xxx"}
</span><span>
</span><span>data: {"choices":[...],"id":"chatcmpl-xxx"}
</span><span>
</span><span>data: [DONE]
</span><span>
</span></code></pre><p>æ¯ä¸ª <code>data:</code> è¡Œä¹‹é—´æœ‰äº†ç©ºè¡Œåˆ†éš”ã€‚âœ…<h2 id=yan-zheng-shi-yan-pao-qi-lai-liao>éªŒè¯ï¼šå®éªŒè·‘èµ·æ¥äº†</h2><p>éƒ¨ç½²ä¿®å¤ï¼Œé‡å¯æœåŠ¡ï¼Œå†è·‘ EXP18ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>======================================================================
</span><span>EXP18: Long-Context LLM Baseline
</span><span>======================================================================
</span><span>ğŸ“„ Loading pseudo-document (100K)...
</span><span>   99,848 chars, 158 paragraphs
</span><span>
</span><span>ğŸ”¬ A1: Claude Sonnet 4 Â· direct Â· minimal
</span><span>   â³ Translating (may take 5-15 minutes)...
</span><span>   ... streaming: 197 chars received
</span><span>   ... streaming: 423 chars received
</span><span>   ... streaming: 633 chars received
</span><span>   ... streaming: 833 chars received
</span></code></pre><p>Streaming ç¨³å®šè¾“å‡ºï¼Œä¸å†æŠ¥é”™ã€‚100K æ–‡æ¡£ç¿»è¯‘å®éªŒé¡ºåˆ©å¯åŠ¨ã€‚<h2 id=wei-shi-yao-zhe-ge-bug-qian-fu-liao-zhe-yao-jiu>ä¸ºä»€ä¹ˆè¿™ä¸ª Bug æ½œä¼äº†è¿™ä¹ˆä¹…ï¼Ÿ</h2><p>å›çœ‹ CopilotX çš„ç‰ˆæœ¬çº¿ï¼š<table><thead><tr><th>æ—¥æœŸ<th>ç‰ˆæœ¬<th>é‡Œç¨‹ç¢‘<tbody><tr><td>2/9<td>v2.0<td><a href=/copilotx-v2-remote-deployment>è¿œç¨‹éƒ¨ç½²</a><tr><td>2/13<td>v2.3.0-2.3.1<td><a href=/copilotx-v23-tools-support-journey>Tools æ”¯æŒ</a><tr><td>2/13<td>v2.3.2<td>é”™è¯¯é€ä¼  + æµ‹è¯•å¥—ä»¶<tr><td><strong>2/20</strong><td><strong>v2.3.3</strong><td><strong>SSE ç©ºè¡Œä¿®å¤</strong> â† æœ¬æ–‡</table><p>v2.3.2 åŠ äº†æµ‹è¯•å¥—ä»¶ï¼Œä½†æµ‹è¯•ç”¨çš„æ˜¯ <code>httpx</code> ç›´æ¥è°ƒç”¨ï¼Œä¸æ˜¯æ ‡å‡† SSE å®¢æˆ·ç«¯ã€‚<code>httpx</code> ä¸åœ¨ä¹ç©ºè¡Œåˆ†éš”â€”â€”å®ƒæœ¬æ¥å°±æ˜¯æŒ‰è¡Œè¯»çš„ã€‚åªæœ‰å½“çœŸæ­£ç”¨ OpenAI SDKï¼ˆå®ƒå®ç°äº†å®Œæ•´çš„ SSE è§£æï¼‰å»æ¶ˆè´¹æµæ—¶ï¼Œé—®é¢˜æ‰æš´éœ²ã€‚<p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„ã€Œæµ‹è¯•å’Œå®¢æˆ·ç«¯ä¸åŒè·¯å¾„ã€caseï¼š<ul><li><strong>å¼€å‘æ—¶</strong>: curl çœ‹åˆ°è¾“å‡ºï¼Œè§‰å¾—æ²¡é—®é¢˜ï¼ˆäººçœ¼ä¸åœ¨ä¹ç©ºè¡Œï¼‰<li><strong>æµ‹è¯•æ—¶</strong>: httpx ç›´æ¥è¯»è¡Œï¼Œä¸è§£æ SSE äº‹ä»¶è¾¹ç•Œ<li><strong>å®æˆ˜æ—¶</strong>: OpenAI SDK ä¸¥æ ¼æŒ‰ SSE åè®®è§£æ â†’ ğŸ’¥</ul><p><strong>æ•™è®­</strong>ï¼šProxy çš„æµ‹è¯•åº”è¯¥ç”¨<strong>æœ€ç»ˆå®¢æˆ·ç«¯</strong>æ¥æµ‹ï¼Œè€Œä¸æ˜¯åº•å±‚ HTTP åº“ã€‚<h2 id=ji-zhu-xiao-jie>æŠ€æœ¯å°ç»“</h2><table><thead><tr><th>é¡¹<th>å†…å®¹<tbody><tr><td><strong>Bug</strong><td><code>if line:</code> è¿‡æ»¤äº† SSE ç©ºè¡Œåˆ†éš”ç¬¦<tr><td><strong>ç—‡çŠ¶</strong><td>OpenAI SDK æŠ¥ <code>JSONDecodeError: Extra data</code><tr><td><strong>æ ¹å› </strong><td>ç©ºè¡Œ â†’ ç©ºå­—ç¬¦ä¸² â†’ Python falsy â†’ è¢«è·³è¿‡<tr><td><strong>ä¿®å¤</strong><td>å»æ‰ <code>if line:</code> æ¡ä»¶ï¼Œè®©æ‰€æœ‰è¡Œé€ä¼ <tr><td><strong>æ”¹åŠ¨é‡</strong><td>1 ä¸ªæ–‡ä»¶ï¼Œ5 è¡Œæ”¹åŠ¨<tr><td><strong>å½±å“</strong><td>æ‰€æœ‰ streaming å®¢æˆ·ç«¯æ¢å¤æ­£å¸¸</table><hr><p><em>æœ‰æ—¶å€™ï¼Œæœ€è‡´å‘½çš„ bug åªæœ‰å››ä¸ªå­—ç¬¦ã€‚</em><hr><p><strong>CopilotX ç‰ˆæœ¬çº¿ï¼š</strong><table><thead><tr><th>æ—¥æœŸ<th>ç‰ˆæœ¬<th>åšæ–‡<tbody><tr><td>2/9<td>v1.0<td><a href=/copilotx-turn-copilot-into-local-api>æŠŠ Copilot å˜æˆæœ¬åœ° API</a><tr><td>2/9<td>v2.0<td><a href=/copilotx-v2-remote-deployment>ä»æœ¬åœ°å·¥å…·åˆ°è¿œç¨‹æœåŠ¡</a><tr><td>2/13<td>v2.3.0-2.3.1<td><a href=/copilotx-v23-tools-support-journey>è®© OpenClaw ç»ˆäºèƒ½åŠ¨æ‰‹äº†</a><tr><td><strong>2/20</strong><td><strong>v2.3.3</strong><td><strong>ä¸€ä¸ªç©ºè¡Œå¼•å‘çš„ã€Œè¡€æ¡ˆã€</strong> â† æœ¬æ–‡</table></div><div class=navigation></div></div><div id=giscus-container><h2>Comments</h2><div class=giscus></div></div><script data-category="Blog Comments" async crossorigin data-category-id=DIC_kwDOL45duM4CnjlZ data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=Polly2014/polly2014.github.io data-repo-id=R_kgDOL45duA data-strict=0 data-theme=noborder_light src=https://giscus.app/client.js></script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                // ç°ç™½é»‘è‰²è°ƒ + è“è‰²ç‚¹ç¼€
                primaryColor: '#e8e8e8',
                primaryTextColor: '#333',
                primaryBorderColor: '#999',
                lineColor: 'rgb(61, 146, 201)',
                secondaryColor: '#f5f5f5',
                tertiaryColor: '#fafafa',
                background: '#f2f2f2',
                mainBkg: '#f5f5f5',
                nodeBorder: '#999',
                clusterBkg: '#eee',
                clusterBorder: '#ccc',
                titleColor: '#333',
                edgeLabelBackground: '#f2f2f2',
                // æ–‡æœ¬é¢œè‰²
                textColor: '#333',
                nodeTextColor: '#333',
                // å…¶ä»–
                fontFamily: "'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace"
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // æŸ¥æ‰¾æ‰€æœ‰ mermaid ä»£ç å—å¹¶æ¸²æŸ“
        document.querySelectorAll('pre code.language-mermaid').forEach((block, index) => {
            const container = document.createElement('div');
            container.className = 'mermaid';
            container.textContent = block.textContent;
            block.parentNode.replaceWith(container);
        });

        // æ¸²æŸ“æ‰€æœ‰ mermaid å›¾è¡¨
        await mermaid.run();
    </script><style>.cover-image{text-align:center;margin:1.5em 0 2em 0}.cover-image img{width:60%;height:auto;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15)}.mermaid{background:#fafafa;border:1px solid #ddd;padding:20px;margin:20px 0;overflow-x:auto}.mermaid svg{max-width:100%;height:auto}@media (max-width:768px){.cover-image img{width:100%}}</style></div></div><script>document.addEventListener('DOMContentLoaded',function(){const c=document.querySelector('.menu-toggle');const d=document.querySelector('.sidebar');const e=document.querySelector('.overlay');function a(){d.classList.toggle('active');e.classList.toggle('active')}c.addEventListener('click',a);e.addEventListener('click',a);let f=0;let g=0;document.addEventListener('touchstart',h=>{f=h.changedTouches[0].screenX},false);document.addEventListener('touchend',h=>{g=h.changedTouches[0].screenX;b()},false);function b(){const h=g- f;if(h>50&&f<30){d.classList.add('active');e.classList.add('active')}else if(h<-50&&d.classList.contains('active')){d.classList.remove('active');e.classList.remove('active')}}})</script>