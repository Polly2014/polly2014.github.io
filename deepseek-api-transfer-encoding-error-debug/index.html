<!doctype html><html><head><title>æ·±åº¦è°ƒè¯•ï¼šDeepSeek API TransferEncodingError çš„æ ¹å› åˆ†æä¸æµå¼ä¼ è¾“ä¿®å¤</title><meta content="åœ¨å¼€å‘é•¿æ–‡æ¡£ç¿»è¯‘ç³»ç»Ÿæ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªè¯¡å¼‚çš„ TransferEncodingError é”™è¯¯ã€‚æœ¬æ–‡è®°å½•äº†ä»ç°è±¡è§‚å¯Ÿã€å‡è®¾æ¨ç†ã€è¯Šæ–­éªŒè¯åˆ°æœ€ç»ˆä¿®å¤çš„å®Œæ•´è¿‡ç¨‹ï¼Œæ­ç¤ºäº†ä¸€ä¸ªéšè—åœ¨ HTTP ä¼ è¾“å±‚çš„ CDN è¶…æ—¶é™·é˜±ã€‚" name=description><meta content="Polly, Blog, AI Blog, AI Assistant, Tutorials, Technology Blog, Baoli Wang" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content=#333 name=theme-color><meta content=article property=og:type><meta content=https://polly.wang/deepseek-api-transfer-encoding-error-debug/ property=og:url><meta content="æ·±åº¦è°ƒè¯•ï¼šDeepSeek API TransferEncodingError çš„æ ¹å› åˆ†æä¸æµå¼ä¼ è¾“ä¿®å¤" property=og:title><meta content="åœ¨å¼€å‘é•¿æ–‡æ¡£ç¿»è¯‘ç³»ç»Ÿæ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªè¯¡å¼‚çš„ TransferEncodingError é”™è¯¯ã€‚æœ¬æ–‡è®°å½•äº†ä»ç°è±¡è§‚å¯Ÿã€å‡è®¾æ¨ç†ã€è¯Šæ–­éªŒè¯åˆ°æœ€ç»ˆä¿®å¤çš„å®Œæ•´è¿‡ç¨‹ï¼Œæ­ç¤ºäº†ä¸€ä¸ªéšè—åœ¨ HTTP ä¼ è¾“å±‚çš„ CDN è¶…æ—¶é™·é˜±ã€‚" property=og:description><meta content=https://polly.wang/images/polly.png property=og:image><meta content="Polly Blog" property=og:site_name><meta content=zh_CN property=og:locale><meta content=summary_large_image name=twitter:card><meta content=https://polly.wang/deepseek-api-transfer-encoding-error-debug/ name=twitter:url><meta content="æ·±åº¦è°ƒè¯•ï¼šDeepSeek API TransferEncodingError çš„æ ¹å› åˆ†æä¸æµå¼ä¼ è¾“ä¿®å¤" name=twitter:title><meta content="åœ¨å¼€å‘é•¿æ–‡æ¡£ç¿»è¯‘ç³»ç»Ÿæ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªè¯¡å¼‚çš„ TransferEncodingError é”™è¯¯ã€‚æœ¬æ–‡è®°å½•äº†ä»ç°è±¡è§‚å¯Ÿã€å‡è®¾æ¨ç†ã€è¯Šæ–­éªŒè¯åˆ°æœ€ç»ˆä¿®å¤çš„å®Œæ•´è¿‡ç¨‹ï¼Œæ­ç¤ºäº†ä¸€ä¸ªéšè—åœ¨ HTTP ä¼ è¾“å±‚çš„ CDN è¶…æ—¶é™·é˜±ã€‚" name=twitter:description><meta content=https://polly.wang/images/polly.png name=twitter:image><meta content=2026-01-08T00:00:00 property=article:published_time><meta content=Polly property=article:author><meta content=DeepSeek property=article:tag><meta content=APIè°ƒè¯• property=article:tag><meta content=TransferEncodingError property=article:tag><meta content=æµå¼ä¼ è¾“ property=article:tag><meta content=HTTPåè®® property=article:tag><meta content=Python property=article:tag><meta content=aiohttp property=article:tag><meta content=ç½‘ç»œè¯Šæ–­ property=article:tag><link rel="shortcut icon" href=https://polly.wang/images/polly.ico type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=icon type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=apple-touch-icon><link href=https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css rel=stylesheet><link href=https://polly.wang/css/style_new.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-8JD13N7PHS" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-8JD13N7PHS';);</script><body><div class=menu-toggle><img alt=Menu src=https://polly.wang/images/polly.png></div><div class=overlay></div><div class="pure-g container"><div class="sidebar pure-u-1 pure-u-md-1-5"><div class=title><a class=pure-menu-heading href=https://polly.wang> <img class="avatar pure-img-responsive" src=https://polly.wang/images/polly.png> </a><div class=introduction><p>Polly's Blog</div><div class=nav><ul class=nav-links><li><a href=https://polly.wang><i class="fas fa-home"></i>Home</a><li><a href=https://polly.wang/archive><i class="fas fa-archive"></i>Archive</a><li><a href=https://polly.wang/category><i class="fas fa-folder"></i>Category</a><li><a href=https://polly.wang/blog><i class="fas fa-file-alt"></i>Posts</a><li><a href=https://polly.wang/cfp><i class="fas fa-calendar-alt"></i>CFP</a><li><a href=https://polly.wang/publication><i class="fas fa-file-pdf"></i>Research</a><li><a href=https://polly.wang/changelog><i class="fas fa-history"></i>Change log</a><li><a href=https://polly.wang/about><i class="fas fa-info-circle"></i>About Me</a></ul></div><div class=social><ul class=social-links><li><a href=mailto:26716201@qq.com><i class="fas fa-envelope"></i></a><li><a href=https://twitter.com/Polly__007><i class="fab fa-twitter"></i></a><li><a href=https://www.linkedin.com/in/baoliwang><i class="fab fa-linkedin-in"></i></a><li><a href=https://github.com/Polly2014><i class="fab fa-github"></i></a></ul></div></div></div><div class="content pure-u-1 pure-u-md-4-5"><div class=blog-post><h1>æ·±åº¦è°ƒè¯•ï¼šDeepSeek API TransferEncodingError çš„æ ¹å› åˆ†æä¸æµå¼ä¼ è¾“ä¿®å¤</h1><div class=content><blockquote><p>è°ƒè¯•çš„ä¹è¶£åœ¨äºï¼šä½ ä»¥ä¸ºé—®é¢˜å‡ºåœ¨ Aï¼Œç»“æœæ ¹å› åœ¨ Bï¼Œè€Œæœ€ç»ˆè§£æ³•æ˜¯ Cã€‚</blockquote><h2 id=wen-ti-xian-xiang>é—®é¢˜ç°è±¡</h2><p>æœ€è¿‘æˆ‘åœ¨å¼€å‘ä¸€ä¸ªåŸºäº LLM çš„é•¿æ–‡æ¡£ç¿»è¯‘ç³»ç»Ÿ ContextWeaveï¼Œç”¨äºå°†æŠ€æœ¯ä¹¦ç±è¿›è¡Œé«˜è´¨é‡çš„åŒè¯­ç¿»è¯‘ã€‚ç³»ç»Ÿä½¿ç”¨ DeepSeek V3 API ä½œä¸ºç¿»è¯‘å¼•æ“ï¼Œé€šè¿‡åˆ†å—ç­–ç•¥å¤„ç†è¶…é•¿æ–‡æ¡£ã€‚<p>ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆç¾å¥½ï¼Œç›´åˆ°æˆ‘å¼€å§‹ç¿»è¯‘ä¸€æœ¬ 12 ä¸‡å­—ç¬¦çš„ AV1 è§†é¢‘ç¼–ç æŠ€æœ¯ä¹¦ç±æ—¶ï¼Œé‡åˆ°äº†è¿™ä¸ªé”™è¯¯ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>TransferEncodingError: 400, message='Not enough data to satisfy transfer length header.'
</span></code></pre><p>æ›´è¯¡å¼‚çš„æ˜¯ï¼š<ul><li><strong>çŸ­æ–‡æœ¬ç¿»è¯‘ï¼ˆ~200å­—ç¬¦ï¼‰</strong>ï¼šâœ… æ­£å¸¸<li><strong>ä¸­ç­‰æ–‡æœ¬ç¿»è¯‘ï¼ˆ~1Kå­—ç¬¦ï¼‰</strong>ï¼šâœ… æ­£å¸¸<li><strong>é•¿æ–‡æœ¬ç¿»è¯‘ï¼ˆ~4Kå­—ç¬¦ï¼‰</strong>ï¼šâŒ å¿…ç°å¤±è´¥<li><strong>é‡è¯• 3 æ¬¡</strong>ï¼šâŒ å…¨éƒ¨å¤±è´¥</ul><p>è¿™ä¸ªé”™è¯¯ä¿¡æ¯ç›¸å½“"æŠ€æœ¯"ï¼Œç›´è¯‘å°±æ˜¯ï¼š"ä¼ è¾“é•¿åº¦å¤´å£°æ˜çš„æ•°æ®é‡ï¼Œä¸å®é™…æ¥æ”¶åˆ°çš„æ•°æ®é‡ä¸åŒ¹é…"ã€‚<p>æˆ‘çš„ç¬¬ä¸€ååº”æ˜¯ï¼šéš¾é“ DeepSeek API æœ‰ bugï¼Ÿ<h2 id=jia-she-yu-pai-chu>å‡è®¾ä¸æ’é™¤</h2><p>ä½œä¸ºä¸€ä¸ªæœ‰ç»éªŒçš„å·¥ç¨‹å¸ˆï¼ˆè‡ªå¤¸ä¸€ä¸‹ï¼‰ï¼Œæˆ‘å¼€å§‹åˆ—ä¸¾å¯èƒ½çš„åŸå› ï¼š<table><thead><tr><th>å‡è®¾<th>å¯èƒ½æ€§<th>éªŒè¯æ–¹æ³•<tbody><tr><td>1. API Key å¤±æ•ˆ<td>ä½<td>çŸ­è¯·æ±‚æ­£å¸¸<tr><td>2. è¾“å‡ºè¶…è¿‡ 8K token é™åˆ¶<td>ä¸­<td>æ£€æŸ¥ max_tokens é…ç½®<tr><td>3. ç½‘ç»œä¸ç¨³å®š<td>ä¸­<td>è¯Šæ–­è„šæœ¬<tr><td>4. aiohttp å®¢æˆ·ç«¯é…ç½®é—®é¢˜<td>ä¸­<td>è°ƒæ•´è¶…æ—¶å‚æ•°<tr><td>5. ä¸­é—´ä»£ç†/CDN é—®é¢˜<td>ä½<td>traceroute åˆ†æ</table><p>æœ€åˆæˆ‘æ€€ç–‘æ˜¯ <strong>8K token é™åˆ¶</strong> çš„é—®é¢˜ã€‚DeepSeek å®˜æ–¹æ–‡æ¡£æ˜ç¡®è¯´æ˜ï¼š<blockquote><p>æµå¼è¾“å‡ºåªæ˜¯ä¸€ç§å“åº”ä¼ è¾“æ–¹å¼ï¼Œä¸ä¼šæ”¹å˜ 8K çš„è¾“å‡º token é™åˆ¶ã€‚è¿™ä¸ªé™åˆ¶æ˜¯ç”±æ¨¡å‹æœ¬èº«çš„èƒ½åŠ›å†³å®šçš„ï¼Œä¸ API è°ƒç”¨æ–¹å¼æ— å…³ã€‚</blockquote><p>ä½†é—®é¢˜æ˜¯ï¼š4K å­—ç¬¦çš„ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡ï¼Œè¾“å‡ºä¸ä¼šè¶…è¿‡ 8K tokensï¼ˆå®æµ‹çº¦ 2-3K tokensï¼‰ã€‚<p>è¿™æ¡è·¯èµ°ä¸é€šã€‚<h2 id=bian-xie-zhen-duan-jiao-ben>ç¼–å†™è¯Šæ–­è„šæœ¬</h2><p>æ—¢ç„¶çŒœä¸å‡ºæ¥ï¼Œé‚£å°±ç”¨æ•°æ®è¯´è¯ã€‚æˆ‘å†™äº†ä¸€ä¸ªå®Œæ•´çš„è¯Šæ–­è„šæœ¬ <code>diagnose_deepseek_api.py</code>ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>test_large_translation</span><span>():
</span><span>    </span><span style=color:#65737e>"""æµ‹è¯• 4: å¤§æ–‡æœ¬ç¿»è¯‘ (~4K å­—ç¬¦)"""
</span><span>    </span><span style=color:#65737e># è¯»å–å®é™…çš„ AV1 Book æ–‡æœ¬
</span><span>    test_text = full_text[:</span><span style=color:#d08770>4000</span><span>]  </span><span style=color:#65737e># å–å‰ 4K
</span><span>    
</span><span>    payload = {
</span><span>        "</span><span style=color:#a3be8c>model</span><span>": "</span><span style=color:#a3be8c>deepseek-chat</span><span>",
</span><span>        "</span><span style=color:#a3be8c>messages</span><span>": [</span><span style=color:#d08770>...</span><span>],
</span><span>        "</span><span style=color:#a3be8c>max_tokens</span><span>": </span><span style=color:#d08770>8192</span><span>,
</span><span>        "</span><span style=color:#a3be8c>temperature</span><span>": </span><span style=color:#d08770>1.3
</span><span>    }
</span><span>    
</span><span>    </span><span style=color:#b48ead>try</span><span>:
</span><span>        </span><span style=color:#b48ead>async with </span><span>aiohttp.</span><span style=color:#bf616a>ClientSession</span><span>() </span><span style=color:#b48ead>as </span><span>session:
</span><span>            </span><span style=color:#b48ead>async with </span><span>session.</span><span style=color:#bf616a>post</span><span>(</span><span style=color:#bf616a>API_URL</span><span>, </span><span style=color:#bf616a>json</span><span>=payload) </span><span style=color:#b48ead>as </span><span>resp:
</span><span>                </span><span style=color:#b48ead>if </span><span>resp.status == </span><span style=color:#d08770>200</span><span>:
</span><span>                    data = </span><span style=color:#b48ead>await </span><span>resp.</span><span style=color:#bf616a>json</span><span>()  </span><span style=color:#65737e># &LT- è¿™é‡ŒæŠ›å‡º TransferEncodingError
</span><span>                    </span><span style=color:#b48ead>return </span><span style=color:#d08770>True
</span><span>    </span><span style=color:#b48ead>except </span><span>aiohttp.ClientPayloadError </span><span style=color:#b48ead>as </span><span>e:
</span><span>        </span><span style=color:#96b5b4>print</span><span>(</span><span style=color:#b48ead>f</span><span>"</span><span style=color:#a3be8c>âŒ ClientPayloadError: </span><span>{e}")
</span><span>        </span><span style=color:#96b5b4>print</span><span>("</span><span style=color:#a3be8c>   è¿™æ˜¯ TransferEncodingError çš„çˆ¶ç±»é”™è¯¯</span><span>")
</span><span>        </span><span style=color:#b48ead>return </span><span style=color:#d08770>False
</span></code></pre><p>è¿è¡Œç»“æœï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>============================================================
</span><span>æµ‹è¯• 1: åŸºæœ¬è¿æ¥ (Hello World)
</span><span>============================================================
</span><span>çŠ¶æ€ç : 200
</span><span>è€—æ—¶: 1.23s
</span><span>å“åº”: Hello! How can I assist you today?
</span><span>âœ… åŸºæœ¬è¿æ¥æ­£å¸¸
</span><span>
</span><span>============================================================
</span><span>æµ‹è¯• 2: çŸ­æ–‡æœ¬ç¿»è¯‘ (~200 å­—ç¬¦)
</span><span>============================================================
</span><span>æºæ–‡æœ¬: 78 å­—ç¬¦
</span><span>çŠ¶æ€ç : 200
</span><span>è€—æ—¶: 2.45s
</span><span>è¯‘æ–‡: 156 å­—ç¬¦
</span><span>âœ… çŸ­æ–‡æœ¬ç¿»è¯‘æ­£å¸¸
</span><span>
</span><span>============================================================
</span><span>æµ‹è¯• 3: ä¸­ç­‰æ–‡æœ¬ç¿»è¯‘ (~1K å­—ç¬¦)
</span><span>============================================================
</span><span>æºæ–‡æœ¬: 892 å­—ç¬¦
</span><span>çŠ¶æ€ç : 200
</span><span>è€—æ—¶: 8.67s
</span><span>è¯‘æ–‡: 1847 å­—ç¬¦
</span><span>âœ… ä¸­ç­‰æ–‡æœ¬ç¿»è¯‘æ­£å¸¸
</span><span>
</span><span>============================================================
</span><span>æµ‹è¯• 4: å¤§æ–‡æœ¬ç¿»è¯‘ (~4K å­—ç¬¦)
</span><span>============================================================
</span><span>æºæ–‡æœ¬: 4000 å­—ç¬¦
</span><span>çŠ¶æ€ç : 200
</span><span>âŒ ClientPayloadError: 400, message='Not enough data to satisfy transfer length header.'
</span><span>   è¿™æ˜¯ TransferEncodingError çš„çˆ¶ç±»é”™è¯¯
</span><span>   å¯èƒ½åŸå› ï¼šå“åº”è¢«ä¸­é€”æˆªæ–­
</span></code></pre><p>å…³é”®å‘ç°ï¼š<strong>çŠ¶æ€ç æ˜¯ 200</strong>ï¼<p>è¿™æ„å‘³ç€ DeepSeek API æˆåŠŸç”Ÿæˆäº†å“åº”ï¼Œä½†åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºäº†é—®é¢˜ã€‚<h2 id=liu-shi-chuan-shu-ce-shi>æµå¼ä¼ è¾“æµ‹è¯•</h2><p>æ¥ä¸‹æ¥æˆ‘æ·»åŠ äº†æµå¼ä¼ è¾“æµ‹è¯•ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>test_with_stream</span><span>():
</span><span>    </span><span style=color:#65737e>"""æµ‹è¯• 5: ä½¿ç”¨æµå¼ä¼ è¾“"""
</span><span>    payload = {
</span><span>        "</span><span style=color:#a3be8c>model</span><span>": "</span><span style=color:#a3be8c>deepseek-chat</span><span>",
</span><span>        "</span><span style=color:#a3be8c>messages</span><span>": [</span><span style=color:#d08770>...</span><span>],
</span><span>        "</span><span style=color:#a3be8c>max_tokens</span><span>": </span><span style=color:#d08770>8192</span><span>,
</span><span>        "</span><span style=color:#a3be8c>stream</span><span>": </span><span style=color:#d08770>True  </span><span style=color:#65737e># ğŸ”‘ å…³é”®ï¼šå¯ç”¨æµå¼ä¼ è¾“
</span><span>    }
</span><span>    
</span><span>    </span><span style=color:#b48ead>async with </span><span>session.</span><span style=color:#bf616a>post</span><span>(</span><span style=color:#bf616a>API_URL</span><span>, </span><span style=color:#bf616a>json</span><span>=payload) </span><span style=color:#b48ead>as </span><span>resp:
</span><span>        result_chunks = []
</span><span>        </span><span style=color:#b48ead>async for </span><span>line </span><span style=color:#b48ead>in </span><span>resp.content:
</span><span>            </span><span style=color:#65737e># é€è¡Œè¯»å– SSE æ•°æ®
</span><span>            </span><span style=color:#b48ead>if </span><span>line.</span><span style=color:#bf616a>startswith</span><span>('</span><span style=color:#a3be8c>data: </span><span>'):
</span><span>                data = json.</span><span style=color:#bf616a>loads</span><span>(line[</span><span style=color:#d08770>6</span><span>:])
</span><span>                content = data['</span><span style=color:#a3be8c>choices</span><span>'][</span><span style=color:#d08770>0</span><span>]['</span><span style=color:#a3be8c>delta</span><span>'].</span><span style=color:#bf616a>get</span><span>('</span><span style=color:#a3be8c>content</span><span>', '')
</span><span>                result_chunks.</span><span style=color:#bf616a>append</span><span>(content)
</span><span>        
</span><span>        </span><span style=color:#b48ead>return </span><span>''.</span><span style=color:#bf616a>join</span><span>(result_chunks)
</span></code></pre><p>ç»“æœä»¤äººæƒŠå–œï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>============================================================
</span><span>æµ‹è¯• 5: æµå¼ä¼ è¾“
</span><span>============================================================
</span><span>æºæ–‡æœ¬: 4000 å­—ç¬¦
</span><span>çŠ¶æ€ç : 200
</span><span>è€—æ—¶: 45.32s
</span><span>æ”¶åˆ° chunks: 1847
</span><span>è¯‘æ–‡: 9234 å­—ç¬¦
</span><span>æ¯”ç‡: 230.9%
</span><span>âœ… æµå¼ä¼ è¾“æ­£å¸¸
</span></code></pre><p><strong>åŒæ ·çš„è¯·æ±‚ï¼Œæµå¼æ¨¡å¼æˆåŠŸäº†ï¼</strong><h2 id=wang-luo-lu-jing-fen-xi>ç½‘ç»œè·¯å¾„åˆ†æ</h2><p>ä¸ºä»€ä¹ˆéæµå¼å¤±è´¥ï¼Œæµå¼æˆåŠŸï¼Ÿæˆ‘å¼€å§‹æ€€ç–‘ä¸­é—´ä»£ç†çš„é—®é¢˜ã€‚<p>ä½¿ç”¨ traceroute åˆ†æç½‘ç»œè·¯å¾„ï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> traceroute</span><span style=color:#bf616a> -m</span><span> 10 api.deepseek.com
</span><span>
</span><span> </span><span style=color:#bf616a>1</span><span>  192.168.31.1 (192.168.31.1)    </span><span style=color:#bf616a>6.296</span><span> ms   3.957 ms   3.599 ms
</span><span> </span><span style=color:#bf616a>2</span><span>  192.168.1.1 (192.168.1.1)      </span><span style=color:#bf616a>4.828</span><span> ms   4.850 ms   4.957 ms
</span><span> </span><span style=color:#bf616a>3</span><span>  123.116.96.1 (åŒ—äº¬è”é€š)        </span><span style=color:#bf616a>5.163</span><span> ms   7.575 ms   5.734 ms
</span><span> </span><span style=color:#bf616a>4</span><span>  114.245.244.129                7.896 ms   *   *
</span><span> </span><span style=color:#bf616a>5  </span><span>* * *
</span><span> </span><span style=color:#bf616a>6</span><span>  219.158.8.38 (ä¸­å›½éª¨å¹²ç½‘)      </span><span style=color:#bf616a>9.924</span><span> ms
</span><span> </span><span style=color:#bf616a>7</span><span>  219.158.10.86                  8.833 ms   *   *
</span><span> </span><span style=color:#bf616a>8</span><span>  219.158.12.162                 198.562 ms
</span><span> </span><span style=color:#bf616a>9</span><span>  151.148.9.32 (å›½é™…å‡ºå£)        </span><span style=color:#bf616a>137.116</span><span> ms  165.002 ms  154.920 ms
</span><span style=color:#bf616a>10  </span><span>* * *
</span><span>
</span><span style=color:#bf616a>PING</span><span> d3bbv8sr76az5s.cloudfront.net (3.173.21.63)
</span><span style=color:#bf616a>64</span><span> bytes from 3.173.21.63: time=196.103 ms
</span><span style=color:#bf616a>64</span><span> bytes from 3.173.21.63: time=194.315 ms
</span><span style=color:#bf616a>64</span><span> bytes from 3.173.21.63: time=201.644 ms
</span></code></pre><p>å…³é”®å‘ç°ï¼š<ol><li><strong>DeepSeek API ä½¿ç”¨ AWS CloudFront CDN</strong>ï¼ˆåŸŸåè§£æåˆ° cloudfront.netï¼‰<li>ç½‘ç»œè·¯å¾„ï¼šå®¶åº­è·¯ç”±å™¨ â†’ åŒ—äº¬è”é€š â†’ ä¸­å›½éª¨å¹²ç½‘ â†’ å›½é™…å‡ºå£ â†’ AWS CloudFront<li>å»¶è¿Ÿçº¦ 200msï¼Œå±äºè·¨å›½è¯·æ±‚çš„æ­£å¸¸èŒƒå›´</ol><h2 id=gen-yin-fen-xi>æ ¹å› åˆ†æ</h2><p>ç»“åˆæ‰€æœ‰è¯æ®ï¼Œæˆ‘ç”»å‡ºäº†é—®é¢˜çš„å®Œæ•´é“¾è·¯ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>éæµå¼è¯·æ±‚çš„ä¼ è¾“è¿‡ç¨‹ï¼š
</span><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span>â”‚  DeepSeek API                                              â”‚
</span><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
</span><span>â”‚  â”‚ ç”Ÿæˆå®Œæ•´å“åº”      â”‚  â† è¿™ä¸€æ­¥éœ€è¦ 30-60 ç§’              â”‚
</span><span>â”‚  â”‚ (8K tokens)      â”‚                                      â”‚
</span><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
</span><span>â”‚           â”‚                                                â”‚
</span><span>â”‚           â–¼                                                â”‚
</span><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
</span><span>â”‚  â”‚ å‘é€HTTPå“åº”      â”‚                                      â”‚
</span><span>â”‚  â”‚ Content-Length:  â”‚  â† å£°æ˜ï¼šæˆ‘è¦å‘é€ 50000 bytes        â”‚
</span><span>â”‚  â”‚ 50000            â”‚                                      â”‚
</span><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
</span><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span>            â”‚
</span><span>    â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•  CloudFront CDN / è¿è¥å•†ç½‘ç»œ
</span><span>            â”‚
</span><span>            â”‚  âŒ ä¼ è¾“åœ¨è¿™é‡Œè¢«ä¸­æ–­ï¼
</span><span>            â”‚     CloudFront Origin Response Timeout: 30ç§’
</span><span>            â”‚     è¿æ¥å¤„äº"ç­‰å¾…"çŠ¶æ€è¶…æ—¶ï¼Œè¢« CDN æ–­å¼€
</span><span>            â”‚
</span><span>            â–¼ (åªæ”¶åˆ° 30000 bytes)
</span><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span>â”‚  aiohttp å®¢æˆ·ç«¯                                            â”‚
</span><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
</span><span>â”‚  â”‚ æœŸæœ›: 50000 bytes â”‚                                      â”‚
</span><span>â”‚  â”‚ å®é™…: 30000 bytes â”‚  â†’ TransferEncodingError!           â”‚
</span><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
</span><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre><p><strong>æ ¹å› ï¼šCloudFront CDN çš„ Origin Response Timeout</strong><p>å½“ DeepSeek API åœ¨ç”Ÿæˆå¤§æ–‡æœ¬å“åº”æ—¶ï¼ˆéœ€è¦ 30 ç§’ä»¥ä¸Šï¼‰ï¼ŒHTTP è¿æ¥å¤„äº"ç­‰å¾…"çŠ¶æ€â€”â€”æ²¡æœ‰ä»»ä½•æ•°æ®ä¼ è¾“ã€‚CloudFront CDN æ£€æµ‹åˆ°è¿æ¥"ç©ºé—²"ï¼Œåœ¨è¾¾åˆ°è¶…æ—¶é˜ˆå€¼åæ–­å¼€è¿æ¥ã€‚<p>è¿™å¯¼è‡´ï¼š<ul><li><code>Content-Length</code> å¤´å£°æ˜äº†å®Œæ•´å“åº”å¤§å°ï¼ˆæ¯”å¦‚ 50000 bytesï¼‰<li>ä½†å®é™…åªæ”¶åˆ°éƒ¨åˆ†æ•°æ®ï¼ˆæ¯”å¦‚ 30000 bytesï¼‰<li>aiohttp æ£€æµ‹åˆ°ä¸ä¸€è‡´ï¼ŒæŠ›å‡º <code>TransferEncodingError</code></ul><h2 id=wei-shi-yao-liu-shi-chuan-shu-neng-jie-jue>ä¸ºä»€ä¹ˆæµå¼ä¼ è¾“èƒ½è§£å†³ï¼Ÿ</h2><pre style=background:#2b303b;color:#c0c5ce><code><span>æµå¼è¯·æ±‚çš„ä¼ è¾“è¿‡ç¨‹ï¼š
</span><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span>â”‚  DeepSeek API                                              â”‚
</span><span>â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
</span><span>â”‚  â”‚ è¾¹ç”Ÿæˆè¾¹å‘é€      â”‚  â† ä¸éœ€è¦ç­‰å¾…å®Œæ•´å“åº”                â”‚
</span><span>â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
</span><span>â”‚           â”‚ chunk1 (100 bytes)                             â”‚
</span><span>â”‚           â”‚ chunk2 (100 bytes)                             â”‚
</span><span>â”‚           â”‚ chunk3 (100 bytes)                             â”‚
</span><span>â”‚           â”‚ ... (æŒç»­å‘é€)                                  â”‚
</span><span>â”‚           â”‚                                                â”‚
</span><span>â”‚  HTTPå“åº”: Transfer-Encoding: chunked  â† æ²¡æœ‰ Content-Lengthï¼
</span><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span>            â”‚
</span><span>    â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•  CloudFront CDN / è¿è¥å•†ç½‘ç»œ
</span><span>            â”‚
</span><span>            â”‚  âœ… æ¯ä¸ªå° chunk å¿«é€Ÿä¼ è¾“å®Œæˆ
</span><span>            â”‚     CDN çœ‹åˆ°çš„æ˜¯"æ´»è·ƒè¿æ¥"
</span><span>            â”‚     ä¸ä¼šè§¦å‘è¶…æ—¶
</span><span>            â”‚
</span><span>            â–¼
</span><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span>â”‚  aiohttp å®¢æˆ·ç«¯                                            â”‚
</span><span>â”‚  âœ… é€ chunk æ¥æ”¶ï¼Œæ‹¼æ¥æˆå®Œæ•´ç»“æœ                           â”‚
</span><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre><p>å…³é”®åŒºåˆ«ï¼š<table><thead><tr><th>æ¨¡å¼<th>HTTP ä¼ è¾“æ–¹å¼<th>å“åº”å¤´<th>CDN è¡Œä¸º<tbody><tr><td><strong>éæµå¼</strong><td>ä¸€æ¬¡æ€§å‘é€å®Œæ•´å“åº”<td><code>Content-Length: 50000</code><td>ç­‰å¾… 30s+ æ— æ•°æ® â†’ è¶…æ—¶æ–­å¼€<tr><td><strong>æµå¼</strong><td>åˆ†å—æŒç»­å‘é€<td><code>Transfer-Encoding: chunked</code><td>æŒç»­æ”¶åˆ°æ•°æ® â†’ ä¿æŒè¿æ¥</table><h2 id=xiu-fu-fang-an>ä¿®å¤æ–¹æ¡ˆ</h2><p>ä¿®æ”¹ <code>llm_provider.py</code>ï¼Œå°† DeepSeek API è°ƒç”¨æ”¹ä¸ºæµå¼æ¨¡å¼ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>_complete_deepseek_direct</span><span>(
</span><span>    </span><span style=color:#bf616a>self</span><span>,
</span><span>    </span><span style=color:#bf616a>system_prompt</span><span>: str,
</span><span>    </span><span style=color:#bf616a>user_prompt</span><span>: str,
</span><span>    </span><span style=color:#bf616a>max_retries</span><span>: int = </span><span style=color:#d08770>3</span><span>,
</span><span>    </span><span style=color:#bf616a>timeout</span><span>: int = </span><span style=color:#d08770>600
</span><span>) -> str:
</span><span>    </span><span style=color:#65737e>"""
</span><span style=color:#65737e>    ç›´æ¥è°ƒç”¨ DeepSeek å®˜æ–¹ APIï¼ˆä½¿ç”¨æµå¼ä¼ è¾“ï¼‰
</span><span style=color:#65737e>    
</span><span style=color:#65737e>    ä¸ºä»€ä¹ˆä½¿ç”¨ stream=True:
</span><span style=color:#65737e>    ---------------------
</span><span style=color:#65737e>    é—®é¢˜: éæµå¼æ¨¡å¼åœ¨å¤§å“åº”(~4K+å­—ç¬¦)æ—¶å‡ºç° TransferEncodingError
</span><span style=color:#65737e>    
</span><span style=color:#65737e>    æ ¹æœ¬åŸå› åˆ†æ:
</span><span style=color:#65737e>    1. éæµå¼æ¨¡å¼ä½¿ç”¨ Content-Length å¤´ï¼Œå£°æ˜å®Œæ•´å“åº”å¤§å°
</span><span style=color:#65737e>    2. å¤§å“åº”ç”Ÿæˆéœ€è¦30ç§’+ï¼Œæ­¤æœŸé—´ HTTP è¿æ¥å¤„äº"ç­‰å¾…"çŠ¶æ€
</span><span style=color:#65737e>    3. ä¸­é—´ä»£ç†/CDN è®¾æœ‰ç©ºé—²è¶…æ—¶é™åˆ¶ï¼Œä¼šåœ¨30-60ç§’åæ–­å¼€è¿æ¥
</span><span style=color:#65737e>    4. è¿æ¥æ–­å¼€å¯¼è‡´å®é™…æ”¶åˆ°çš„æ•°æ®å°‘äº Content-Length å£°æ˜çš„é•¿åº¦
</span><span style=color:#65737e>    5. aiohttp æ£€æµ‹åˆ°ä¸ä¸€è‡´ï¼ŒæŠ›å‡º TransferEncodingError
</span><span style=color:#65737e>    
</span><span style=color:#65737e>    è§£å†³æ–¹æ¡ˆ:
</span><span style=color:#65737e>    - æµå¼æ¨¡å¼ä½¿ç”¨ Transfer-Encoding: chunkedï¼Œæ²¡æœ‰ Content-Length
</span><span style=color:#65737e>    - è¾¹ç”Ÿæˆè¾¹å‘é€ï¼Œæ¯ä¸ª chunk éƒ½å¾ˆå°(~100 bytes)ï¼Œå¿«é€Ÿä¼ è¾“
</span><span style=color:#65737e>    - ä¸­é—´ä»£ç†çœ‹åˆ°æŒç»­çš„æ•°æ®æµåŠ¨ï¼Œä¸ä¼šè§¦å‘è¶…æ—¶
</span><span style=color:#65737e>    
</span><span style=color:#65737e>    æ³¨æ„: è¿™ä¸ 8K token é™åˆ¶æ— å…³ã€‚æµå¼ä¸æ”¹å˜ token é™åˆ¶ï¼Œ
</span><span style=color:#65737e>          å®ƒåªæ”¹å˜äº† HTTP ä¼ è¾“æ–¹å¼ï¼Œé¿å…ä¸­é—´ä»£ç†è¶…æ—¶é—®é¢˜ã€‚
</span><span style=color:#65737e>    """
</span><span>    payload = {
</span><span>        "</span><span style=color:#a3be8c>model</span><span>": "</span><span style=color:#a3be8c>deepseek-chat</span><span>",
</span><span>        "</span><span style=color:#a3be8c>messages</span><span>": [
</span><span>            {"</span><span style=color:#a3be8c>role</span><span>": "</span><span style=color:#a3be8c>system</span><span>", "</span><span style=color:#a3be8c>content</span><span>": system_prompt},
</span><span>            {"</span><span style=color:#a3be8c>role</span><span>": "</span><span style=color:#a3be8c>user</span><span>", "</span><span style=color:#a3be8c>content</span><span>": user_prompt}
</span><span>        ],
</span><span>        "</span><span style=color:#a3be8c>max_tokens</span><span>": </span><span style=color:#bf616a>self</span><span>.config.max_tokens,
</span><span>        "</span><span style=color:#a3be8c>temperature</span><span>": </span><span style=color:#bf616a>self</span><span>.config.temperature,
</span><span>        "</span><span style=color:#a3be8c>stream</span><span>": </span><span style=color:#d08770>True</span><span>,  </span><span style=color:#65737e># ğŸ”‘ å¯ç”¨æµå¼ä¼ è¾“
</span><span>    }
</span><span>    
</span><span>    </span><span style=color:#b48ead>async with </span><span>aiohttp.</span><span style=color:#bf616a>ClientSession</span><span>() </span><span style=color:#b48ead>as </span><span>session:
</span><span>        </span><span style=color:#b48ead>async with </span><span>session.</span><span style=color:#bf616a>post</span><span>(url, </span><span style=color:#bf616a>headers</span><span>=headers, </span><span style=color:#bf616a>json</span><span>=payload) </span><span style=color:#b48ead>as </span><span>response:
</span><span>            </span><span style=color:#65737e># æµå¼è¯»å–å¹¶æ‹¼æ¥ç»“æœ
</span><span>            result_chunks = []
</span><span>            </span><span style=color:#b48ead>async for </span><span>line </span><span style=color:#b48ead>in </span><span>response.content:
</span><span>                line = line.</span><span style=color:#bf616a>decode</span><span>('</span><span style=color:#a3be8c>utf-8</span><span>').</span><span style=color:#bf616a>strip</span><span>()
</span><span>                </span><span style=color:#b48ead>if </span><span>line.</span><span style=color:#bf616a>startswith</span><span>('</span><span style=color:#a3be8c>data: </span><span>'):
</span><span>                    data_str = line[</span><span style=color:#d08770>6</span><span>:]
</span><span>                    </span><span style=color:#b48ead>if </span><span>data_str == '</span><span style=color:#a3be8c>[DONE]</span><span>':
</span><span>                        </span><span style=color:#b48ead>break
</span><span>                    </span><span style=color:#b48ead>try</span><span>:
</span><span>                        data = json.</span><span style=color:#bf616a>loads</span><span>(data_str)
</span><span>                        content = data['</span><span style=color:#a3be8c>choices</span><span>'][</span><span style=color:#d08770>0</span><span>].</span><span style=color:#bf616a>get</span><span>('</span><span style=color:#a3be8c>delta</span><span>', {}).</span><span style=color:#bf616a>get</span><span>('</span><span style=color:#a3be8c>content</span><span>', '')
</span><span>                        </span><span style=color:#b48ead>if </span><span>content:
</span><span>                            result_chunks.</span><span style=color:#bf616a>append</span><span>(content)
</span><span>                    </span><span style=color:#b48ead>except </span><span>json.JSONDecodeError:
</span><span>                        </span><span style=color:#b48ead>continue  </span><span style=color:#65737e># SSE åè®®ä¸­çš„ç©ºè¡Œæˆ–ä¸å®Œæ•´è¡Œï¼Œæ­£å¸¸è·³è¿‡
</span><span>            
</span><span>            </span><span style=color:#b48ead>return </span><span>''.</span><span style=color:#bf616a>join</span><span>(result_chunks)
</span></code></pre><h2 id=xiu-fu-yan-zheng>ä¿®å¤éªŒè¯</h2><p>ä¿®å¤åé‡æ–°è¿è¡Œç¿»è¯‘å®éªŒï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>============================================================
</span><span>E14 AV1 ç¿»è¯‘å®éªŒç»“æœ
</span><span>============================================================
</span><span>
</span><span>é…ç½®: A1_fixed_only
</span><span>  æºæ–‡æœ¬: 20,000 å­—ç¬¦
</span><span>  è¯‘æ–‡: 46,755 å­—ç¬¦
</span><span>  æ‰©å±•æ¯”: 233.8%
</span><span>  æœ¯è¯­è¦†ç›–ç‡: 65.4%
</span><span>  è€—æ—¶: 366.6s
</span><span>  âœ… æˆåŠŸ
</span><span>
</span><span>é…ç½®: A2_section_only
</span><span>  æºæ–‡æœ¬: 20,000 å­—ç¬¦
</span><span>  è¯‘æ–‡: 47,062 å­—ç¬¦
</span><span>  æ‰©å±•æ¯”: 235.3%
</span><span>  æœ¯è¯­è¦†ç›–ç‡: 66.1%
</span><span>  è€—æ—¶: 365.1s
</span><span>  âœ… æˆåŠŸ
</span><span>
</span><span>é…ç½®: A4_full (ContextWeave)
</span><span>  æºæ–‡æœ¬: 20,000 å­—ç¬¦
</span><span>  è¯‘æ–‡: 47,736 å­—ç¬¦
</span><span>  æ‰©å±•æ¯”: 238.7%
</span><span>  æœ¯è¯­è¦†ç›–ç‡: 65.4%
</span><span>  è€—æ—¶: 672.0s
</span><span>  âœ… æˆåŠŸ
</span></code></pre><p>æ‰€æœ‰é…ç½®éƒ½æˆåŠŸå®Œæˆï¼ç¿»è¯‘è´¨é‡å’Œå®Œæ•´æ€§ä¹Ÿç»è¿‡éªŒè¯ï¼Œæ²¡æœ‰å†…å®¹ä¸¢å¤±ã€‚<h2 id=jing-yan-zong-jie>ç»éªŒæ€»ç»“</h2><h3 id=1-cuo-wu-xin-xi-ke-neng-ju-you-wu-dao-xing>1. é”™è¯¯ä¿¡æ¯å¯èƒ½å…·æœ‰è¯¯å¯¼æ€§</h3><p><code>TransferEncodingError</code> çœ‹èµ·æ¥åƒæ˜¯å®¢æˆ·ç«¯çš„é—®é¢˜ï¼Œä½†æ ¹å› åœ¨ç½‘ç»œä¼ è¾“å±‚ã€‚ä¸è¦è¢«é”™è¯¯ä¿¡æ¯çš„è¡¨é¢å«ä¹‰è¯¯å¯¼ã€‚<h3 id=2-http-xie-yi-xi-jie-hen-zhong-yao>2. HTTP åè®®ç»†èŠ‚å¾ˆé‡è¦</h3><ul><li><code>Content-Length</code> vs <code>Transfer-Encoding: chunked</code> æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„ä¼ è¾“æ–¹å¼<li>å‰è€…éœ€è¦é¢„å…ˆçŸ¥é“å®Œæ•´å“åº”å¤§å°ï¼Œåè€…æ”¯æŒè¾¹ç”Ÿæˆè¾¹å‘é€<li>åœ¨æ¶‰åŠ CDNã€ä»£ç†çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªåŒºåˆ«å¯èƒ½å¯¼è‡´å®Œå…¨ä¸åŒçš„ç»“æœ</ul><h3 id=3-liu-shi-chuan-shu-bu-jin-jin-shi-ux-you-hua>3. æµå¼ä¼ è¾“ä¸ä»…ä»…æ˜¯ UX ä¼˜åŒ–</h3><p>å¾ˆå¤šäººè®¤ä¸ºæµå¼ä¼ è¾“åªæ˜¯ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰ã€‚ä½†åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæµå¼ä¼ è¾“æ˜¯<strong>åŠŸèƒ½æ€§å¿…éœ€</strong>â€”â€”æ²¡æœ‰å®ƒï¼Œå¤§å“åº”æ ¹æœ¬æ— æ³•å®Œæ•´ä¼ è¾“ã€‚<h3 id=4-zhong-jian-dai-li-wu-chu-bu-zai>4. ä¸­é—´ä»£ç†æ— å¤„ä¸åœ¨</h3><p>ä½ çš„è¯·æ±‚å¯èƒ½ç»è¿‡ï¼š<ul><li>å®¶åº­è·¯ç”±å™¨<li>è¿è¥å•†é€æ˜ä»£ç†<li>å›½é™…å‡ºå£ç½‘å…³<li>CDN èŠ‚ç‚¹ï¼ˆæœ¬æ¡ˆä¾‹ä¸­çš„ CloudFrontï¼‰<li>ç›®æ ‡æœåŠ¡å™¨å‰çš„è´Ÿè½½å‡è¡¡å™¨</ul><p>ä»»ä½•ä¸€ä¸ªç¯èŠ‚éƒ½å¯èƒ½æœ‰è‡ªå·±çš„è¶…æ—¶ç­–ç•¥ã€‚<h3 id=5-zhen-duan-jiao-ben-de-jie-zhi>5. è¯Šæ–­è„šæœ¬çš„ä»·å€¼</h3><p>ç¼–å†™ä¸“é—¨çš„è¯Šæ–­è„šæœ¬ï¼Œé€æ­¥ç¼©å°é—®é¢˜èŒƒå›´ï¼Œæ¯”ç›²ç›®çŒœæµ‹é«˜æ•ˆå¾—å¤šã€‚è¿™æ¬¡çš„è¯Šæ–­è„šæœ¬å¸®æˆ‘åœ¨ 30 åˆ†é’Ÿå†…å®šä½äº†æ ¹å› ã€‚<h2 id=fu-lu-zhen-duan-jiao-ben-wan-zheng-dai-ma>é™„å½•ï¼šè¯Šæ–­è„šæœ¬å®Œæ•´ä»£ç </h2><p>ä¸ºäº†æ–¹ä¾¿å…¶ä»–é‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…ï¼Œæˆ‘å°†è¯Šæ–­è„šæœ¬å¼€æºåœ¨ï¼š<p>ğŸ“ <a href=https://github.com/Polly2014/Master-Translator-MCP-Server/blob/main/diagnose_deepseek_api.py>diagnose_deepseek_api.py</a><p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©é‡åˆ°ç±»ä¼¼é—®é¢˜çš„ä½ èŠ‚çœè°ƒè¯•æ—¶é—´ã€‚<hr><p><em>å¦‚æœä½ åœ¨ä½¿ç”¨ DeepSeek API æˆ–å…¶ä»– LLM API æ—¶é‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</em></div><div class=navigation></div></div><div id=giscus-container><h2>ç•™è¨€ä¸è®¨è®º</h2><div class=giscus></div></div><script data-category="Blog Comments" async crossorigin data-category-id=DIC_kwDOL45duM4CnjlZ data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=Polly2014/polly2014.github.io data-repo-id=R_kgDOL45duA data-strict=0 data-theme=noborder_light src=https://giscus.app/client.js></script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                // ç°ç™½é»‘è‰²è°ƒ + è“è‰²ç‚¹ç¼€
                primaryColor: '#e8e8e8',
                primaryTextColor: '#333',
                primaryBorderColor: '#999',
                lineColor: 'rgb(61, 146, 201)',
                secondaryColor: '#f5f5f5',
                tertiaryColor: '#fafafa',
                background: '#f2f2f2',
                mainBkg: '#f5f5f5',
                nodeBorder: '#999',
                clusterBkg: '#eee',
                clusterBorder: '#ccc',
                titleColor: '#333',
                edgeLabelBackground: '#f2f2f2',
                // æ–‡æœ¬é¢œè‰²
                textColor: '#333',
                nodeTextColor: '#333',
                // å…¶ä»–
                fontFamily: "'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace"
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // æŸ¥æ‰¾æ‰€æœ‰ mermaid ä»£ç å—å¹¶æ¸²æŸ“
        document.querySelectorAll('pre code.language-mermaid').forEach((block, index) => {
            const container = document.createElement('div');
            container.className = 'mermaid';
            container.textContent = block.textContent;
            block.parentNode.replaceWith(container);
        });

        // æ¸²æŸ“æ‰€æœ‰ mermaid å›¾è¡¨
        await mermaid.run();
    </script><style>.cover-image{text-align:center;margin:1.5em 0 2em 0}.cover-image img{width:60%;height:auto;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15)}.mermaid{background:#fafafa;border:1px solid #ddd;padding:20px;margin:20px 0;overflow-x:auto}.mermaid svg{max-width:100%;height:auto}@media (max-width:768px){.cover-image img{width:100%}}</style></div></div><script>document.addEventListener('DOMContentLoaded',function(){const c=document.querySelector('.menu-toggle');const d=document.querySelector('.sidebar');const e=document.querySelector('.overlay');function a(){d.classList.toggle('active');e.classList.toggle('active')}c.addEventListener('click',a);e.addEventListener('click',a);let f=0;let g=0;document.addEventListener('touchstart',h=>{f=h.changedTouches[0].screenX},false);document.addEventListener('touchend',h=>{g=h.changedTouches[0].screenX;b()},false);function b(){const h=g- f;if(h>50&&f<30){d.classList.add('active');e.classList.add('active')}else if(h<-50&&d.classList.contains('active')){d.classList.remove('active');e.classList.remove('active')}}})</script>