<!doctype html><html><head><title>ğŸ§  Jarvis Phase 2ï¼šä»è¢«åŠ¨é—®ç­”åˆ°ä¸»åŠ¨æ€è€ƒ</title><meta content="Jarvis-Agent ç¬¬äºŒé˜¶æ®µå¼€å‘è®°å½•ï¼šè®¾è®¡æ··åˆè®°å¿†ç³»ç»Ÿï¼ˆMarkdown + SQLite FTS5ï¼‰ï¼Œå®ç° Think Loop è®© Agent èƒ½ä¸»åŠ¨æ€è€ƒã€‚ä»æ¶æ„æŠ‰æ‹©åˆ°å‡Œæ™¨äº”ç‚¹çš„ç«¯åˆ°ç«¯éªŒè¯ï¼Œè®°å½•ä¸€ä¸ª AI Agent å­¦ä¼šã€Œè®°å¿†ã€çš„å…¨è¿‡ç¨‹ã€‚" name=description><meta content="Polly, Blog, AI Blog, AI Assistant, Tutorials, Technology Blog, Baoli Wang" name=keywords><meta content="width=device-width,initial-scale=1" name=viewport><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content=#333 name=theme-color><meta content=article property=og:type><meta content=https://polly.wang/jarvis-agent-phase2-memory-system/ property=og:url><meta content="ğŸ§  Jarvis Phase 2ï¼šä»è¢«åŠ¨é—®ç­”åˆ°ä¸»åŠ¨æ€è€ƒ" property=og:title><meta content="Jarvis-Agent ç¬¬äºŒé˜¶æ®µå¼€å‘è®°å½•ï¼šè®¾è®¡æ··åˆè®°å¿†ç³»ç»Ÿï¼ˆMarkdown + SQLite FTS5ï¼‰ï¼Œå®ç° Think Loop è®© Agent èƒ½ä¸»åŠ¨æ€è€ƒã€‚ä»æ¶æ„æŠ‰æ‹©åˆ°å‡Œæ™¨äº”ç‚¹çš„ç«¯åˆ°ç«¯éªŒè¯ï¼Œè®°å½•ä¸€ä¸ª AI Agent å­¦ä¼šã€Œè®°å¿†ã€çš„å…¨è¿‡ç¨‹ã€‚" property=og:description><meta content=https://polly.wang/jarvis-agent-phase2-memory-system/cover.jpg property=og:image><meta content="Polly Blog" property=og:site_name><meta content=zh_CN property=og:locale><meta content=summary_large_image name=twitter:card><meta content=https://polly.wang/jarvis-agent-phase2-memory-system/ name=twitter:url><meta content="ğŸ§  Jarvis Phase 2ï¼šä»è¢«åŠ¨é—®ç­”åˆ°ä¸»åŠ¨æ€è€ƒ" name=twitter:title><meta content="Jarvis-Agent ç¬¬äºŒé˜¶æ®µå¼€å‘è®°å½•ï¼šè®¾è®¡æ··åˆè®°å¿†ç³»ç»Ÿï¼ˆMarkdown + SQLite FTS5ï¼‰ï¼Œå®ç° Think Loop è®© Agent èƒ½ä¸»åŠ¨æ€è€ƒã€‚ä»æ¶æ„æŠ‰æ‹©åˆ°å‡Œæ™¨äº”ç‚¹çš„ç«¯åˆ°ç«¯éªŒè¯ï¼Œè®°å½•ä¸€ä¸ª AI Agent å­¦ä¼šã€Œè®°å¿†ã€çš„å…¨è¿‡ç¨‹ã€‚" name=twitter:description><meta content=https://polly.wang/jarvis-agent-phase2-memory-system/cover.jpg name=twitter:image><meta content=2026-02-05T00:00:00 property=article:published_time><meta content=Polly property=article:author><meta content=Jarvis-Agent property=article:tag><meta content="AI Agent" property=article:tag><meta content=è®°å¿†ç³»ç»Ÿ property=article:tag><meta content=SQLite property=article:tag><meta content=FTS5 property=article:tag><meta content=Claude property=article:tag><meta content=ä¸ªäººé¡¹ç›® property=article:tag><link rel="shortcut icon" href=https://polly.wang/images/polly.ico type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=icon type=image/x-icon><link href=https://polly.wang/images/polly.ico rel=apple-touch-icon><link href=https://polly.wang/vendor/purecss/pure-min.css rel=stylesheet><link href=https://polly.wang/vendor/purecss/grids-responsive-min.css rel=stylesheet><link href=https://polly.wang/vendor/font-awesome/css/all.min.css rel=stylesheet><link href=https://polly.wang/css/style_new.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-1N289C8N8W" async></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-1N289C8N8W')</script><body><div class=menu-toggle><img alt=Menu src=https://polly.wang/images/polly.png></div><div class=overlay></div><div class="pure-g container"><div class="sidebar pure-u-1 pure-u-md-1-5"><div class=title><a class=pure-menu-heading href=https://polly.wang> <img class="avatar pure-img-responsive" src=https://polly.wang/images/polly.png> </a><div class=introduction><p>Polly's Blog</div><div class=nav><ul class=nav-links><li><a href=https://polly.wang><i class="fas fa-home"></i>Home</a><li><a href=https://polly.wang/archive><i class="fas fa-archive"></i>Archive</a><li><a href=https://polly.wang/category><i class="fas fa-folder"></i>Category</a><li><a href=https://polly.wang/blog><i class="fas fa-file-alt"></i>Posts</a><li><a href=https://polly.wang/cfp><i class="fas fa-calendar-alt"></i>CFP</a><li><a href=https://polly.wang/publication><i class="fas fa-file-pdf"></i>Research</a><li><a href=https://polly.wang/changelog><i class="fas fa-history"></i>Change Log</a><li><a href=https://polly.wang/about><i class="fas fa-info-circle"></i>About Me</a></ul></div><div class=social><ul class=social-links><li><a href=mailto:26716201@qq.com><i class="fas fa-envelope"></i></a><li><a href=https://twitter.com/Polly__007><i class="fab fa-twitter"></i></a><li><a href=https://www.linkedin.com/in/baoliwang><i class="fab fa-linkedin-in"></i></a><li><a href=https://github.com/Polly2014><i class="fab fa-github"></i></a></ul></div></div></div><div class="content pure-u-1 pure-u-md-4-5"><div class=blog-post><h1>ğŸ§  Jarvis Phase 2ï¼šä»è¢«åŠ¨é—®ç­”åˆ°ä¸»åŠ¨æ€è€ƒ</h1><div class=cover-image><img alt="ğŸ§  Jarvis Phase 2ï¼šä»è¢«åŠ¨é—®ç­”åˆ°ä¸»åŠ¨æ€è€ƒ" loading=lazy src=cover.jpg></div><div class=content><p>å‡Œæ™¨äº”ç‚¹ï¼Œå½“ <code>jarvis recall</code> æˆåŠŸè¿”å›åˆšæ‰ Daemon è‡ªåŠ¨è®°å½•çš„å‘ç°æ—¶ï¼Œæˆ‘çŸ¥é“ Phase 2 ç»ˆäºå®Œæˆäº†ã€‚<p>è¿™æ˜¯ <a href=/jarvis-agent-genesis/>Jarvis-Agent</a> çš„ç¬¬äºŒé˜¶æ®µâ€”â€”è®© Agent ä»ã€Œä½ é—®æˆ‘ç­”ã€è¿›åŒ–åˆ°ã€Œä¸»åŠ¨æ€è€ƒã€ã€‚å¬èµ·æ¥ç®€å•ï¼Œä½†å½“æˆ‘çœŸæ­£å¼€å§‹è®¾è®¡è®°å¿†ç³»ç»Ÿæ—¶ï¼Œæ‰å‘ç°è¿™æ˜¯ä¸€ä¸ªå……æ»¡å–èˆçš„è¿‡ç¨‹ã€‚<h2 id=clipboard-phase-2-de-he-xin-mu-biao>ğŸ“‹ Phase 2 çš„æ ¸å¿ƒç›®æ ‡</h2><p>Phase 1 å®Œæˆåï¼ŒJarvis å·²ç»èƒ½ï¼š<ul><li>æ‰«æç›®å½•ï¼Œå‘ç°é¡¹ç›®<li>åå°ç›‘æ§æ–‡ä»¶å˜åŒ–<li>ä¸ç”¨æˆ·æ­£å¸¸å¯¹è¯</ul><p>ä½†å®ƒæœ‰ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼š<strong>æ²¡æœ‰è®°å¿†</strong>ã€‚<p>æ¯æ¬¡å¯¹è¯éƒ½æ˜¯ä»é›¶å¼€å§‹ã€‚æ˜¨å¤©å‘Šè¯‰å®ƒçš„åå¥½ï¼Œä»Šå¤©å°±å¿˜äº†ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå®ƒä¸ä¼šä¸»åŠ¨æ€è€ƒâ€”â€”åªèƒ½è¢«åŠ¨ç­‰å¾…ç”¨æˆ·æé—®ã€‚<p>Phase 2 çš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼š<table><thead><tr><th>èƒ½åŠ›<th>è¯´æ˜<tbody><tr><td>ğŸ’­ <strong>Think Loop</strong><td>å®ˆæŠ¤è¿›ç¨‹å®šæœŸ"æ€è€ƒ"ï¼Œä¸åªæ˜¯ç›‘æ§<tr><td>ğŸ§  <strong>æŒä¹…è®°å¿†</strong><td>å¯¹è¯ã€å‘ç°ã€å†³ç­–éƒ½èƒ½è¢«è®°ä½<tr><td>ğŸ” <strong>è®°å¿†æ£€ç´¢</strong><td>èƒ½å¿«é€Ÿæ‰¾åˆ°ç›¸å…³è®°å¿†</table><h2 id=thinking-di-yi-ge-nan-ti-markdown-vs-sqlite>ğŸ¤” ç¬¬ä¸€ä¸ªéš¾é¢˜ï¼šMarkdown vs SQLite</h2><p>è®°å¿†å­˜åœ¨å“ªé‡Œï¼Ÿè¿™æ˜¯ç¬¬ä¸€ä¸ªè¦å›ç­”çš„é—®é¢˜ã€‚<p>æˆ‘åˆ—å‡ºäº†ä¸¤ä¸ªå€™é€‰æ–¹æ¡ˆï¼š<h3 id=fang-an-a-chun-sqlite>æ–¹æ¡ˆ Aï¼šçº¯ SQLite</h3><pre class=language-sql data-lang=sql style=background:#2b303b;color:#c0c5ce><code class=language-sql data-lang=sql><span style=color:#b48ead>CREATE TABLE </span><span style=color:#8fa1b3>memories</span><span> (
</span><span>    id </span><span style=color:#b48ead>TEXT PRIMARY KEY</span><span>,
</span><span>    content </span><span style=color:#b48ead>TEXT</span><span>,
</span><span>    tags </span><span style=color:#b48ead>TEXT</span><span>,
</span><span>    importance </span><span style=color:#b48ead>INTEGER</span><span>,
</span><span>    created_at </span><span style=color:#b48ead>DATETIME
</span><span>);
</span></code></pre><p>ä¼˜ç‚¹ï¼šæŸ¥è¯¢å¿«ã€ç»“æ„åŒ–ã€FTS5 æ”¯æŒå…¨æ–‡æœç´¢<p>ç¼ºç‚¹ï¼š<strong>LLM ä¸å‹å¥½</strong>ã€‚å½“ Agent éœ€è¦"å›é¡¾è®°å¿†"æ—¶ï¼Œæˆ‘å¾—æŠŠ SQLite çš„æ•°æ®è½¬æˆ Promptï¼Œè¿™ä¸ªè¿‡ç¨‹å¾ˆ hackyã€‚<h3 id=fang-an-b-chun-markdown>æ–¹æ¡ˆ Bï¼šçº¯ Markdown</h3><pre class=language-markdown data-lang=markdown style=background:#2b303b;color:#c0c5ce><code class=language-markdown data-lang=markdown><span style=color:#8fa1b3># 2026-02-05 æ—¥å¿—
</span><span>
</span><span style=color:#8fa1b3>## 10:30 å‘ç°
</span><span style=color:#bf616a>- æ£€æµ‹åˆ° Jarvis-Agent/src/cli.py è¢«ä¿®æ”¹
</span><span style=color:#bf616a>- </span><span style=font-weight:700;color:#ebcb8b>**é‡è¦æ€§**</span><span style=color:#bf616a>: â­â­â­
</span><span style=color:#bf616a>
</span><span style=color:#8fa1b3>## 14:20 å¯¹è¯
</span><span style=color:#bf616a>- ç”¨æˆ·è¯¢é—®äº†...
</span></code></pre><p>ä¼˜ç‚¹ï¼šäººç±»å¯è¯»ã€Git å‹å¥½ã€<strong>LLM åŸç”Ÿæ ¼å¼</strong><p>ç¼ºç‚¹ï¼šæœç´¢æ…¢ã€‚å½“è®°å¿†ç§¯ç´¯åˆ°å‡ ç™¾æ¡æ—¶ï¼Œéå† Markdown æ–‡ä»¶ä¼šå¾ˆç—›è‹¦ã€‚<h3 id=zui-zhong-xuan-ze-hun-he-jia-gou>æœ€ç»ˆé€‰æ‹©ï¼šæ··åˆæ¶æ„</h3><p>çº ç»“äº†ä¸€ä¼šå„¿åï¼Œæˆ‘æ„è¯†åˆ°ä¸¤è€…ä¸æ˜¯äº’æ–¥çš„ï¼š<blockquote><p><strong>Markdown å­˜å†…å®¹ï¼ŒSQLite åšç´¢å¼•</strong></blockquote><pre style=background:#2b303b;color:#c0c5ce><code><span>~/.jarvis/memory/
</span><span>â”œâ”€â”€ daily/           # ğŸ“… ç¼–å¹´ä½“æ—¥å¿—
</span><span>â”‚   â””â”€â”€ 2026-02-05.md
</span><span>â”œâ”€â”€ topics/          # ğŸ“š çºªä¼ ä½“ä¸»é¢˜
</span><span>â”‚   â””â”€â”€ jarvis-development.md
</span><span>â””â”€â”€ persona.md       # ğŸ­ äººæ ¼å®šä¹‰
</span><span>
</span><span>~/.jarvis/index.db   # ğŸ” FTS5 å…¨æ–‡ç´¢å¼•
</span></code></pre><p>è¿™æ ·ä¸¤è¾¹çš„ä¼˜ç‚¹éƒ½ä¿ç•™äº†ï¼š<ul><li>LLM æ€è€ƒæ—¶ï¼Œç›´æ¥è¯» Markdown<li>ç”¨æˆ·æœç´¢æ—¶ï¼Œèµ° SQLite FTS5<li>äººç±»æƒ³çœ‹è®°å¿†ï¼Ÿæ‰“å¼€æ–‡ä»¶å¤¹å°±è¡Œ</ul><h2 id=floppy-disk-ji-yi-xie-ru-memorywriter>ğŸ’¾ è®°å¿†å†™å…¥ï¼šMemoryWriter</h2><p><code>MemoryWriter</code> è´Ÿè´£æŠŠè®°å¿†å†™å…¥ Markdownï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>class </span><span style=color:#ebcb8b>MemoryWriter</span><span style=color:#eff1f5>:
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>append_to_daily</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>entry</span><span>: MemoryEntry) -> Path:
</span><span>        </span><span style=color:#65737e>"""è¿½åŠ åˆ°ä»Šæ—¥æ—¥å¿—"""
</span><span>        daily_file = </span><span style=color:#bf616a>self</span><span>.daily_dir / </span><span style=color:#b48ead>f</span><span>"{date.</span><span style=color:#bf616a>today</span><span>()}</span><span style=color:#a3be8c>.md</span><span>"
</span><span>        
</span><span>        </span><span style=color:#65737e># å¦‚æœæ˜¯æ–°æ–‡ä»¶ï¼Œå†™å…¥æ ‡é¢˜
</span><span>        </span><span style=color:#b48ead>if </span><span>not daily_file.</span><span style=color:#bf616a>exists</span><span>():
</span><span>            daily_file.</span><span style=color:#bf616a>write_text</span><span>(</span><span style=color:#b48ead>f</span><span>"</span><span style=color:#a3be8c># </span><span>{date.</span><span style=color:#bf616a>today</span><span>()}</span><span style=color:#a3be8c> æ—¥å¿—</span><span style=color:#96b5b4>\n\n</span><span>")
</span><span>        
</span><span>        </span><span style=color:#65737e># è¿½åŠ è®°å¿†æ¡ç›®
</span><span>        importance_stars = "</span><span style=color:#a3be8c>â­</span><span>" * entry.importance
</span><span>        content = </span><span style=color:#b48ead>f</span><span>"""
</span><span style=color:#a3be8c>## </span><span>{entry.timestamp.</span><span style=color:#bf616a>strftime</span><span>('</span><span style=color:#d08770>%H</span><span style=color:#a3be8c>:</span><span style=color:#d08770>%M</span><span>')} {importance_stars}</span><span style=color:#a3be8c> **</span><span>{entry.title}</span><span style=color:#a3be8c>**
</span><span style=color:#a3be8c>
</span><span>{entry.content}
</span><span style=color:#a3be8c>
</span><span style=color:#a3be8c>---
</span><span>"""
</span><span>        </span><span style=color:#b48ead>with </span><span>daily_file.</span><span style=color:#bf616a>open</span><span>("</span><span style=color:#a3be8c>a</span><span>") </span><span style=color:#b48ead>as </span><span>f:
</span><span>            f.</span><span style=color:#bf616a>write</span><span>(content)
</span><span>        
</span><span>        </span><span style=color:#b48ead>return </span><span>daily_file
</span></code></pre><p>æ¯æ¡è®°å¿†éƒ½æœ‰é‡è¦æ€§è¯„çº§ï¼ˆ1-5 æ˜Ÿï¼‰ï¼Œè¿™æ˜¯ LLM æ ¹æ®å†…å®¹è‡ªåŠ¨åˆ¤æ–­çš„ã€‚<h2 id=mag-ji-yi-jian-suo-fts5-de-wei-li>ğŸ” è®°å¿†æ£€ç´¢ï¼šFTS5 çš„å¨åŠ›</h2><p>SQLite çš„ FTS5 æ‰©å±•æ˜¯ä¸ªå®è—ã€‚å®ƒæ”¯æŒï¼š<ul><li>å…¨æ–‡æœç´¢<li>å‰ç¼€åŒ¹é…<li>ç›¸å…³æ€§æ’åº</ul><pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>class </span><span style=color:#ebcb8b>MemoryIndex</span><span style=color:#eff1f5>:
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#96b5b4>__init__</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>db_path</span><span>: Path):
</span><span>        </span><span style=color:#bf616a>self</span><span>.conn = sqlite3.</span><span style=color:#bf616a>connect</span><span>(</span><span style=color:#bf616a>str</span><span>(db_path))
</span><span>        </span><span style=color:#bf616a>self</span><span>.conn.</span><span style=color:#bf616a>execute</span><span>("""
</span><span style=color:#a3be8c>            CREATE VIRTUAL TABLE IF NOT </span><span>EXISTS</span><span style=color:#a3be8c> memory_index 
</span><span style=color:#a3be8c>            </span><span style=color:#b48ead>USING</span><span style=color:#a3be8c> fts5(
</span><span style=color:#a3be8c>                id, title, content, tags, importance, </span><span style=color:#b48ead>date</span><span style=color:#a3be8c>,
</span><span style=color:#a3be8c>                tokenize</span><span>='</span><span style=color:#a3be8c>unicode61</span><span>'
</span><span style=color:#a3be8c>            )
</span><span style=color:#a3be8c>        </span><span>""")
</span><span>    
</span><span>    </span><span style=color:#b48ead>def </span><span style=color:#8fa1b3>search</span><span>(</span><span style=color:#bf616a>self</span><span>, </span><span style=color:#bf616a>query</span><span>: str, </span><span style=color:#bf616a>limit</span><span>: int = </span><span style=color:#d08770>10</span><span>) -> List[IndexEntry]:
</span><span>        </span><span style=color:#65737e># æ·»åŠ é€šé…ç¬¦æ”¯æŒå‰ç¼€åŒ¹é…
</span><span>        fts_query = </span><span style=color:#b48ead>f</span><span>"{query}</span><span style=color:#a3be8c>*</span><span>" </span><span style=color:#b48ead>if </span><span>not query.</span><span style=color:#bf616a>endswith</span><span>("</span><span style=color:#a3be8c>*</span><span>") </span><span style=color:#b48ead>else </span><span>query
</span><span>        
</span><span>        cursor = </span><span style=color:#bf616a>self</span><span>.conn.</span><span style=color:#bf616a>execute</span><span>("""
</span><span style=color:#a3be8c>            </span><span style=color:#b48ead>SELECT</span><span style=color:#a3be8c> id, title, importance, </span><span style=color:#b48ead>date
</span><span style=color:#a3be8c>            </span><span style=color:#b48ead>FROM</span><span style=color:#a3be8c> memory_index
</span><span style=color:#a3be8c>            </span><span style=color:#b48ead>WHERE</span><span style=color:#a3be8c> memory_index MATCH ?
</span><span style=color:#a3be8c>            </span><span style=color:#b48ead>ORDER BY</span><span style=color:#a3be8c> rank
</span><span style=color:#a3be8c>            </span><span style=color:#b48ead>LIMIT</span><span style=color:#a3be8c> ?
</span><span style=color:#a3be8c>        </span><span>""", (fts_query, limit))
</span><span>        
</span><span>        </span><span style=color:#b48ead>return </span><span>[</span><span style=color:#bf616a>IndexEntry</span><span>(*row) </span><span style=color:#b48ead>for </span><span>row </span><span style=color:#b48ead>in </span><span>cursor.</span><span style=color:#bf616a>fetchall</span><span>()]
</span></code></pre><p>å…³é”®ç»†èŠ‚ï¼š<strong>å‰ç¼€åŒ¹é…</strong>ã€‚<p>ç”¨æˆ·è¾“å…¥ <code>jarvis recall test</code>ï¼ŒFTS5 éœ€è¦æœç´¢ <code>test*</code> æ‰èƒ½åŒ¹é…åˆ° "testing"ã€"test-file" ç­‰ç»“æœã€‚è¿™ä¸ªå°ç»†èŠ‚è®©æˆ‘ debug äº† 20 åˆ†é’Ÿã€‚<h2 id=thought-balloon-think-loop-rang-agent-hui-xiang>ğŸ’­ Think Loopï¼šè®© Agent ä¼šæƒ³</h2><p>è®°å¿†åªæ˜¯åŸºç¡€ï¼Œæ›´é‡è¦çš„æ˜¯è®© Agent <strong>ä½¿ç”¨</strong>è®°å¿†æ¥æ€è€ƒã€‚<p>å®ˆæŠ¤è¿›ç¨‹çš„æ ¸å¿ƒå¾ªç¯åŠ å…¥äº† Think é€»è¾‘ï¼š<pre class=language-python data-lang=python style=background:#2b303b;color:#c0c5ce><code class=language-python data-lang=python><span style=color:#b48ead>async def </span><span style=color:#8fa1b3>_think_cycle</span><span>(</span><span style=color:#bf616a>self</span><span>):
</span><span>    </span><span style=color:#65737e>"""å®šæœŸæ€è€ƒå¾ªç¯"""
</span><span>    </span><span style=color:#65737e># æ”¶é›†æœ€è¿‘çš„å‘ç°
</span><span>    recent_discoveries = </span><span style=color:#bf616a>self</span><span>.discoveries[-</span><span style=color:#d08770>5</span><span>:]
</span><span>    
</span><span>    </span><span style=color:#65737e># è¯»å–ä»Šæ—¥è®°å¿†
</span><span>    daily_memory = </span><span style=color:#bf616a>self</span><span>.memory_writer.</span><span style=color:#bf616a>read_today</span><span>()
</span><span>    
</span><span>    </span><span style=color:#65737e># æ„é€ æ€è€ƒ Prompt
</span><span>    prompt = </span><span style=color:#b48ead>f</span><span>"""
</span><span style=color:#a3be8c>    ä½ æ˜¯ Jarvisï¼ŒPolly çš„ AI åŠ©æ‰‹ã€‚
</span><span style=color:#a3be8c>    
</span><span style=color:#a3be8c>    ## æœ€è¿‘å‘ç°
</span><span style=color:#a3be8c>    </span><span>{</span><span style=color:#bf616a>format_discoveries</span><span>(recent_discoveries)}
</span><span style=color:#a3be8c>    
</span><span style=color:#a3be8c>    ## ä»Šæ—¥è®°å¿†
</span><span style=color:#a3be8c>    </span><span>{daily_memory}
</span><span style=color:#a3be8c>    
</span><span style=color:#a3be8c>    åŸºäºä»¥ä¸Šä¿¡æ¯ï¼Œæœ‰ä»€ä¹ˆå€¼å¾—æ³¨æ„çš„æ´å¯Ÿå—ï¼Ÿ
</span><span style=color:#a3be8c>    å¦‚æœæœ‰ï¼Œè¯·ç®€æ´æè¿°ã€‚å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„ï¼Œå›å¤"æ— "ã€‚
</span><span style=color:#a3be8c>    </span><span>"""
</span><span>    
</span><span>    insight = </span><span style=color:#b48ead>await </span><span style=color:#bf616a>self</span><span>.llm.</span><span style=color:#bf616a>chat</span><span>(prompt)
</span><span>    
</span><span>    </span><span style=color:#b48ead>if </span><span>insight != "</span><span style=color:#a3be8c>æ— </span><span>":
</span><span>        </span><span style=color:#65737e># è®°å½•æ´å¯Ÿ
</span><span>        </span><span style=color:#bf616a>self</span><span>.memory_writer.</span><span style=color:#bf616a>append_to_daily</span><span>(</span><span style=color:#bf616a>MemoryEntry</span><span>(
</span><span>            </span><span style=color:#bf616a>title</span><span>="</span><span style=color:#a3be8c>æ€è€ƒæ´å¯Ÿ</span><span>",
</span><span>            </span><span style=color:#bf616a>content</span><span>=insight,
</span><span>            </span><span style=color:#bf616a>importance</span><span>=</span><span style=color:#d08770>3
</span><span>        ))
</span></code></pre><p>è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç®€å•ä½†æœ‰æ•ˆçš„æ€è€ƒå¾ªç¯ï¼š<ol><li>æ”¶é›†ä¸Šä¸‹æ–‡ï¼ˆå‘ç° + è®°å¿†ï¼‰<li>è®© LLM åˆ†æ<li>å¦‚æœæœ‰æ´å¯Ÿï¼Œè®°å½•ä¸‹æ¥</ol><h2 id=duan-dao-duan-yan-zheng-yi-bo-san-zhe>ğŸ§ª ç«¯åˆ°ç«¯éªŒè¯ï¼šä¸€æ³¢ä¸‰æŠ˜</h2><p>å†™å®Œä»£ç ï¼Œæˆ‘å¼€å§‹äº†ç«¯åˆ°ç«¯æµ‹è¯•ã€‚<h3 id=di-yi-ci-chang-shi-shi-bai>ç¬¬ä¸€æ¬¡å°è¯•ï¼šå¤±è´¥</h3><pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> jarvis recall "</span><span style=color:#a3be8c>test</span><span>"
</span><span style=color:#bf616a>ğŸ”</span><span> æœç´¢: test
</span><span style=color:#bf616a>ğŸ“­</span><span> æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è®°å¿†
</span></code></pre><p>SQLite è¡¨æ˜¯ç©ºçš„ã€‚æ£€æŸ¥åå‘ç° <code>MemoryIndex.add()</code> æ²¡æœ‰è¢«è°ƒç”¨ã€‚<h3 id=di-er-ci-chang-shi-bu-fen-cheng-gong>ç¬¬äºŒæ¬¡å°è¯•ï¼šéƒ¨åˆ†æˆåŠŸ</h3><p>ä¿®å¤åï¼Œè®°å¿†èƒ½å†™å…¥ SQLite äº†ï¼Œä½† Markdown æ–‡ä»¶æ²¡æ›´æ–°ã€‚<p>åŸå› ï¼šæˆ‘åœ¨ <code>daemon.py</code> é‡Œå…ˆå†™äº† SQLiteï¼Œä½† Markdown çš„é€»è¾‘è¢«æˆ‘æ³¨é‡Šæ‰å¿˜äº†å–æ¶ˆæ³¨é‡Š... ğŸ¤¦<h3 id=di-san-ci-chang-shi-mu-lu-gao-cuo-liao>ç¬¬ä¸‰æ¬¡å°è¯•ï¼šç›®å½•æé”™äº†</h3><pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> cat </span><span style=color:#bf616a>~</span><span>/.jarvis/memory/daily/2026-02-05.md
</span><span style=color:#65737e># 2026-02-05 æ—¥å¿—
</span><span>
</span><span style=color:#65737e>## 03:15 â­â­â­ **æµ‹è¯•å‘ç°**
</span><span style=color:#bf616a>...
</span></code></pre><p>Markdown æœ‰è®°å½•ï¼ä½†æˆ‘åœ¨ <code>Jarvis-Agent/</code> ç›®å½•åˆ›å»ºçš„æµ‹è¯•æ–‡ä»¶æ²¡æœ‰è§¦å‘æ–°è®°å½•ã€‚<p>æŸ¥çœ‹é…ç½®æ‰å‘ç°ï¼ŒDaemon ç›‘æ§çš„æ˜¯ <code>jarvis-test-ground/</code> ç›®å½•ï¼Œä¸æ˜¯ <code>Jarvis-Agent/</code>ï¼š<pre class=language-json data-lang=json style=background:#2b303b;color:#c0c5ce><code class=language-json data-lang=json><span>{
</span><span>  "</span><span style=color:#a3be8c>watch_paths</span><span>": ["</span><span style=color:#a3be8c>/Users/polly/.../jarvis-test-ground</span><span>"]
</span><span>}
</span></code></pre><h3 id=di-si-ci-chang-shi-cheng-gong>ç¬¬å››æ¬¡å°è¯•ï¼šæˆåŠŸï¼</h3><p>åœ¨æ­£ç¡®çš„ç›®å½•åˆ›å»ºæ–‡ä»¶ï¼Œç­‰å¾… 60 ç§’ï¼ˆThink å‘¨æœŸï¼‰ï¼ŒæŸ¥çœ‹ç»“æœï¼š<pre class=language-bash data-lang=bash style=background:#2b303b;color:#c0c5ce><code class=language-bash data-lang=bash><span style=color:#bf616a>$</span><span> jarvis recall
</span><span style=color:#bf616a>ğŸ§ </span><span> æœ€è¿‘è®°å¿†:
</span><span style=color:#bf616a>[2026-02-05]</span><span> åˆ›å»ºéªŒè¯æµ‹è¯•æ–‡æ¡£ â­â­â­
</span><span style=color:#bf616a>[2026-02-05]</span><span> æµ‹è¯•å‘ç° â­â­â­
</span><span>
</span><span style=color:#bf616a>$</span><span> jarvis insights
</span><span style=color:#bf616a>ğŸ“Š</span><span> æœ€è¿‘æ´å¯Ÿ (å…± 2 æ¡è®°å½•)</span><span style=color:#96b5b4>:
</span><span style=color:#bf616a>...
</span></code></pre><p><strong>å…¨é“¾è·¯æ‰“é€š</strong>ï¼šæ–‡ä»¶å˜åŒ– â†’ Daemon æ£€æµ‹ â†’ LLM åˆ†æ â†’ å†™å…¥ Markdown â†’ ç´¢å¼•åˆ° SQLite â†’ å¯æœç´¢ã€‚<h2 id=bar-chart-phase-2-jiao-fu-wu>ğŸ“Š Phase 2 äº¤ä»˜ç‰©</h2><table><thead><tr><th>ç»„ä»¶<th>çŠ¶æ€<th>è¯´æ˜<tbody><tr><td><code>MemoryWriter</code><td>âœ…<td>Markdown å†™å…¥<tr><td><code>MemoryIndex</code><td>âœ…<td>SQLite FTS5 ç´¢å¼•<tr><td><code>jarvis recall</code><td>âœ…<td>æœç´¢è®°å¿†<tr><td><code>jarvis think</code><td>âœ…<td>æ‰‹åŠ¨è§¦å‘æ€è€ƒ<tr><td><code>jarvis insights</code><td>âœ…<td>æŸ¥çœ‹æ´å¯Ÿ<tr><td>Daemon é›†æˆ<td>âœ…<td>è‡ªåŠ¨è®°å½•å‘ç°</table><p>ä¸¤æ¬¡ Git æäº¤ï¼š<pre style=background:#2b303b;color:#c0c5ce><code><span>feat(memory): Phase 2.0 æ··åˆè®°å¿†ç³»ç»Ÿ - Markdown + SQLite FTS5
</span><span>feat(cli): Phase 2 å®Œæˆ - think/insights å‘½ä»¤ + CLAUDE.md æ›´æ–°
</span></code></pre><h2 id=bulb-she-ji-yuan-ze-hui-gu>ğŸ’¡ è®¾è®¡åŸåˆ™å›é¡¾</h2><p>æ•´ä¸ª Phase 2 çš„å¼€å‘è¿‡ç¨‹ï¼Œæˆ‘ä¸€ç›´åœ¨æé†’è‡ªå·± Jarvis çš„è®¾è®¡åŸåˆ™ï¼š<blockquote><p><strong>ä¸€ç‚¹ä¸å¤šï¼Œä¸€ç‚¹ä¸å°‘</strong></blockquote><p>è¿™ä¸ªåŸåˆ™å¸®æˆ‘åšäº†å‡ ä¸ªå…³é”®å†³ç­–ï¼š<ol><li><strong>æ··åˆæ¶æ„è€Œéçº¯ SQLite</strong>ï¼šLLM éœ€è¦è¯» Markdownï¼Œè¿™æ˜¯åˆšéœ€ï¼Œä¸èƒ½çœ<li><strong>FTS5 è€Œé Elasticsearch</strong>ï¼šæœç´¢å‡ ç™¾æ¡è®°å¿†ï¼ŒSQLite å¤Ÿç”¨ï¼Œä¸éœ€è¦ä¸Šé‡å‹æ–¹æ¡ˆ<li><strong>Think Loop è€Œéå¤æ‚è°ƒåº¦</strong>ï¼šç®€å•çš„å®šæ—¶å¾ªç¯å°±å¤Ÿäº†ï¼Œä¸éœ€è¦ Celery é‚£å¥—</ol><h2 id=crystal-ball-phase-3-yu-gao>ğŸ”® Phase 3 é¢„å‘Š</h2><p>Phase 2 è®© Jarvis æœ‰äº†è®°å¿†å’Œæ€è€ƒèƒ½åŠ›ã€‚ä½†å®ƒä»ç„¶ã€Œåªèƒ½è¯´ï¼Œä¸èƒ½åšã€ã€‚<p>Phase 3 çš„ç›®æ ‡æ˜¯<strong>è¡ŒåŠ¨</strong>ï¼š<ul><li>Tool Registryï¼šå·¥å…·æ³¨å†Œå’Œè°ƒç”¨<li>MCP é›†æˆï¼šå¤ç”¨ç°æœ‰ MCP Server<li>ä»»åŠ¡æ‰§è¡Œï¼šä»å¯¹è¯åˆ°å®é™…æ“ä½œ</ul><p>é¢„è®¡ 2-3 å‘¨å®Œæˆã€‚<hr><p>å‡Œæ™¨äº”ç‚¹çš„æˆåŠŸéªŒè¯ï¼Œè®©è¿™ä¸€å¤œçš„æŠ˜è…¾å˜å¾—å€¼å¾—ã€‚<p>Jarvis ç°åœ¨ä¸ä»…èƒ½çœ‹è§å˜åŒ–ï¼Œè¿˜èƒ½è®°ä½å®ƒä»¬ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶å€™å›æƒ³èµ·æ¥ã€‚è¿™ç§æ„Ÿè§‰å°±åƒâ€”â€”ä½ çš„ AI åŠ©æ‰‹ç»ˆäºå¼€å§‹ã€Œæ´»ã€èµ·æ¥äº†ã€‚<p>ä¸‹ä¸€æ­¥ï¼Œè®©å®ƒå­¦ä¼šåŠ¨æ‰‹ã€‚<blockquote><p>ç›¸å…³æ–‡ç« ï¼š<ul><li><a href=/jarvis-agent-genesis/>Jarvis çš„è¯ç”Ÿï¼šä»é›¶å¼€å§‹æ„å»ºæ•°ç å®è´å¼ AI Agent</a><li><a href=/attention-engineering-insight/>æ³¨æ„åŠ›å·¥ç¨‹ï¼šä¸€ç§æ–°çš„ AI åä½œèŒƒå¼</a></ul></blockquote></div><div class=navigation></div></div><div id=giscus-container><h2>Comments</h2><div class=giscus></div></div><script data-category="Blog Comments" async crossorigin data-category-id=DIC_kwDOL45duM4CnjlZ data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=Polly2014/polly2014.github.io data-repo-id=R_kgDOL45duA data-strict=0 data-theme=noborder_light src=https://giscus.app/client.js></script><script type=module>
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                // ç°ç™½é»‘è‰²è°ƒ + è“è‰²ç‚¹ç¼€
                primaryColor: '#e8e8e8',
                primaryTextColor: '#333',
                primaryBorderColor: '#999',
                lineColor: 'rgb(61, 146, 201)',
                secondaryColor: '#f5f5f5',
                tertiaryColor: '#fafafa',
                background: '#f2f2f2',
                mainBkg: '#f5f5f5',
                nodeBorder: '#999',
                clusterBkg: '#eee',
                clusterBorder: '#ccc',
                titleColor: '#333',
                edgeLabelBackground: '#f2f2f2',
                // æ–‡æœ¬é¢œè‰²
                textColor: '#333',
                nodeTextColor: '#333',
                // å…¶ä»–
                fontFamily: "'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace"
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // æŸ¥æ‰¾æ‰€æœ‰ mermaid ä»£ç å—å¹¶æ¸²æŸ“
        document.querySelectorAll('pre code.language-mermaid').forEach((block, index) => {
            const container = document.createElement('div');
            container.className = 'mermaid';
            container.textContent = block.textContent;
            block.parentNode.replaceWith(container);
        });

        // æ¸²æŸ“æ‰€æœ‰ mermaid å›¾è¡¨
        await mermaid.run();
    </script><style>.cover-image{text-align:center;margin:1.5em 0 2em 0}.cover-image img{width:60%;height:auto;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15)}.mermaid{background:#fafafa;border:1px solid #ddd;padding:20px;margin:20px 0;overflow-x:auto}.mermaid svg{max-width:100%;height:auto}@media (max-width:768px){.cover-image img{width:100%}}</style></div></div><script>document.addEventListener('DOMContentLoaded',function(){const c=document.querySelector('.menu-toggle');const d=document.querySelector('.sidebar');const e=document.querySelector('.overlay');function a(){d.classList.toggle('active');e.classList.toggle('active')}c.addEventListener('click',a);e.addEventListener('click',a);let f=0;let g=0;document.addEventListener('touchstart',h=>{f=h.changedTouches[0].screenX},false);document.addEventListener('touchend',h=>{g=h.changedTouches[0].screenX;b()},false);function b(){const h=g- f;if(h>50&&f<30){d.classList.add('active');e.classList.add('active')}else if(h<-50&&d.classList.contains('active')){d.classList.remove('active');e.classList.remove('active')}}})</script>